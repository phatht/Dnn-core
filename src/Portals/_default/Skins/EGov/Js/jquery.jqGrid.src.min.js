/**
 * @license jqGrid  4.1.2  - jQuery Grid
 * Copyright (c) 2008, Tony Tomov, tony@trirand.com
 * Dual licensed under the MIT and GPL licenses
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl-2.0.html
 * Date: 2011-07-20
 */
(function($){$.jgrid=$.jgrid||{};$.extend($.jgrid,{htmlDecode:function(n){return n&&(n=="&nbsp;"||n=="&#160;"||n.length==1&&n.charCodeAt(0)==160)?"":n?String(n).replace(/&amp;/g,"&").replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,'"'):n},htmlEncode:function(n){return n?String(n).replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/\"/g,"&quot;"):n},format:function(n){var t=$.makeArray(arguments).slice(1);return n===undefined&&(n=""),n.replace(/\{(\d+)\}/g,function(n,i){return t[i]})},getCellIndex:function(n){var t=$(n);return t.is("tr")?-1:(t=(!t.is("td")&&!t.is("th")?t.closest("td,th"):t)[0],$.browser.msie)?$.inArray(t,t.parentNode.cells):t.cellIndex},stripHtml:function(n){n=n+"";return n?(n=n.replace(/<("[^"]*"|'[^']*'|[^'">])*>/gi,""),n&&n!=="&nbsp;"&&n!=="&#160;"?n.replace(/\"/g,"'"):""):n},stringToDoc:function(n){var t,i;if(typeof n!="string")return n;try{i=new DOMParser;t=i.parseFromString(n,"text/xml")}catch(r){t=new ActiveXObject("Microsoft.XMLDOM");t.async=!1;t.loadXML(n)}return t&&t.documentElement&&t.documentElement.tagName!="parsererror"?t:null},parse:function(jsonString){var js=jsonString;return js.substr(0,9)=="while(1);"&&(js=js.substr(9)),js.substr(0,2)=="/*"&&(js=js.substr(2,js.length-4)),js||(js="{}"),$.jgrid.useJSON===!0&&typeof JSON=="object"&&typeof JSON.parse=="function"?JSON.parse(js):eval("("+js+")")},parseDate:function(n,t){var r={m:1,d:1,y:1970,h:0,i:0,s:0},i,o,u,s=/[\\\/:_;.,\t\T\s-]/,f;if(t&&t!==null&&t!==undefined){t=$.trim(t);t=t.split(s);n=n.split(s);var h=$.jgrid.formatter.date.monthNames,e=$.jgrid.formatter.date.AmPm,c=function(n,t){return n===0?t==12&&(t=0):t!=12&&(t+=12),t};for(i=0,o=n.length;i<o;i++)n[i]=="M"&&(u=$.inArray(t[i],h),u!==-1&&u<12&&(t[i]=u+1)),n[i]=="F"&&(u=$.inArray(t[i],h),u!==-1&&u>11&&(t[i]=u+1-12)),n[i]=="a"&&(u=$.inArray(t[i],e),u!==-1&&u<2&&t[i]==e[u]&&(t[i]=u,r.h=c(t[i],r.h))),n[i]=="A"&&(u=$.inArray(t[i],e),u!==-1&&u>1&&t[i]==e[u]&&(t[i]=u-2,r.h=c(t[i],r.h))),t[i]!==undefined&&(r[n[i].toLowerCase()]=parseInt(t[i],10));r.m=parseInt(r.m,10)-1;f=r.y;f>=70&&f<=99?r.y=1900+r.y:f>=0&&f<=69&&(r.y=2e3+r.y)}return new Date(r.y,r.m,r.d,r.h,r.i,r.s,0)},jqID:function(n){return String(n).replace(/[!"#$%&'()*+,.\/:;<=>?@\[\\\]\^`{|}~]/g,"\\$&")},guid:1,uidPref:"jqg",randId:function(n){return(n?n:$.jgrid.uidPref)+$.jgrid.guid++},getAccessor:function(n,t){var i,f,r=[],u;if(typeof t=="function")return t(n);if(i=n[t],i===undefined)try{if(typeof t=="string"&&(r=t.split(".")),u=r.length,u)for(i=n;i&&u--;)f=r.shift(),i=i[f]}catch(e){}return i},ajaxOptions:{},from:function(n){var t=function(n,t){typeof n=="string"&&(n=$.data(n));var i=this,r=n,c=!0,e=!1,u=t,a=/[\$,%]/g,s=null,v=null,y=0,f=!1,l="",o=[],h=!0;if(typeof n=="object"&&n.push)n.length>0&&(h=typeof n[0]!="object"?!1:!0);else throw"data provides is not an array";return this._hasData=function(){return r===null?!1:r.length===0?!1:!0},this._getStr=function(n){var t=[];return e&&t.push("jQuery.trim("),t.push("String("+n+")"),e&&t.push(")"),c||t.push(".toLowerCase()"),t.join("")},this._strComp=function(n){return typeof n=="string"?".toString()":""},this._group=function(n,t){return{field:n.toString(),unique:t,items:[]}},this._toStr=function(n){return e&&(n=$.trim(n)),c||(n=n.toLowerCase()),n.toString().replace(/\\/g,"\\\\").replace(/\"/g,'\\"')},this._funcLoop=function(n){var t=[];return $.each(r,function(i,r){t.push(n(r))}),t},this._append=function(n){var t;for(u===null?u="":u+=l===""?" && ":l,t=0;t<y;t++)u+="(";f&&(u+="!");u+="("+n+")";f=!1;l="";y=0},this._setCommand=function(n,t){s=n;v=t},this._resetNegate=function(){f=!1},this._repeatCommand=function(n,t){return s===null?i:n!==null&&t!==null?s(n,t):v===null?s(n):h?s(v,n):s(n)},this._equals=function(n,t){return i._compare(n,t,1)===0},this._compare=function(n,t,i){return(i===undefined&&(i=1),n===undefined&&(n=null),t===undefined&&(t=null),n===null&&t===null)?0:n===null&&t!==null?1:n!==null&&t===null?-1:(c||typeof n=="number"||typeof t=="number"||(n=String(n).toLowerCase(),t=String(t).toLowerCase()),n<t)?-i:n>t?i:0},this._performSort=function(){o.length!==0&&(r=i._doSort(r,0))},this._doSort=function(n,t){var h=o[t].by,c=o[t].dir,l=o[t].type,a=o[t].datefmt,f,e,r,s,u;if(t==o.length-1)return i._getOrder(n,h,c,l,a);for(t++,f=i._getGroup(n,h,c,l,a),e=[],r=0;r<f.length;r++)for(s=i._doSort(f[r].items,t),u=0;u<s.length;u++)e.push(s[u]);return e},this._getOrder=function(n,t,r,u,f){var h=[],s=[],y=r=="a"?1:-1,c,e,o,l,v;for(u===undefined&&(u="text"),l=u=="float"||u=="number"||u=="currency"||u=="numeric"?function(n){var t=parseFloat(String(n).replace(a,""));return isNaN(t)?0:t}:u=="int"||u=="integer"?function(n){return n?parseFloat(String(n).replace(a,"")):0}:u=="date"||u=="datetime"?function(n){return $.jgrid.parseDate(f,n).getTime()}:$.isFunction(u)?u:function(n){return n||(n=""),$.trim(String(n).toUpperCase())},$.each(n,function(n,i){e=t!==""?$.jgrid.getAccessor(i,t):i;e===undefined&&(e="");e=l(e,i);s.push({vSort:e,index:n})}),s.sort(function(n,t){return n=n.vSort,t=t.vSort,i._compare(n,t,y)}),o=0,v=n.length;o<v;)c=s[o].index,h.push(n[c]),o++;return h},this._getGroup=function(n,t,r,u,f){var s=[],e=null,h=null,o;return $.each(i._getOrder(n,t,r,u,f),function(n,r){o=$.jgrid.getAccessor(r,t);o===undefined&&(o="");i._equals(h,o)||(h=o,e!==null&&s.push(e),e=i._group(t,o));e.items.push(r)}),e!==null&&s.push(e),s},this.ignoreCase=function(){return c=!1,i},this.useCase=function(){return c=!0,i},this.trim=function(){return e=!0,i},this.noTrim=function(){return e=!1,i},this.execute=function(){var match=u,results=[];return match===null?i:($.each(r,function(){eval(match)&&results.push(this)}),r=results,i)},this.data=function(){return r},this.select=function(n){if(i._performSort(),!i._hasData())return[];if(i.execute(),$.isFunction(n)){var t=[];return $.each(r,function(i,r){t.push(n(r))}),t}return r},this.hasMatch=function(){return i._hasData()?(i.execute(),r.length>0):!1},this.andNot=function(n,t,r){return f=!f,i.and(n,t,r)},this.orNot=function(n,t,r){return f=!f,i.or(n,t,r)},this.not=function(n,t,r){return i.andNot(n,t,r)},this.and=function(n,t,r){return(l=" && ",n===undefined)?i:i._repeatCommand(n,t,r)},this.or=function(n,t,r){return(l=" || ",n===undefined)?i:i._repeatCommand(n,t,r)},this.orBegin=function(){return y++,i},this.orEnd=function(){return u!==null&&(u+=")"),i},this.isNot=function(n){return f=!f,i.is(n)},this.is=function(n){return i._append("this."+n),i._resetNegate(),i},this._compareValues=function(n,t,r,u,f){var o,e,s;if(o=h?"jQuery.jgrid.getAccessor(this,'"+t+"')":"this",r===undefined&&(r=null),e=r,s=f.stype===undefined?"text":f.stype,r!==null)switch(s){case"int":case"integer":e=isNaN(Number(e))||e===""?"0":e;o="parseInt("+o+",10)";e="parseInt("+e+",10)";break;case"float":case"number":case"numeric":e=String(e).replace(a,"");e=isNaN(Number(e))||e===""?"0":e;o="parseFloat("+o+")";e="parseFloat("+e+")";break;case"date":case"datetime":e=String($.jgrid.parseDate(f.newfmt||"Y-m-d",e).getTime());o='jQuery.jgrid.parseDate("'+f.srcfmt+'",'+o+").getTime()";break;default:o=i._getStr(o);e=i._getStr('"'+i._toStr(e)+'"')}return i._append(o+" "+u+" "+e),i._setCommand(n,t),i._resetNegate(),i},this.equals=function(n,t,r){return i._compareValues(i.equals,n,t,"==",r)},this.notEquals=function(n,t,r){return i._compareValues(i.equals,n,t,"!==",r)},this.isNull=function(n,t,r){return i._compareValues(i.equals,n,null,"===",r)},this.greater=function(n,t,r){return i._compareValues(i.greater,n,t,">",r)},this.less=function(n,t,r){return i._compareValues(i.less,n,t,"<",r)},this.greaterOrEquals=function(n,t,r){return i._compareValues(i.greaterOrEquals,n,t,">=",r)},this.lessOrEquals=function(n,t,r){return i._compareValues(i.lessOrEquals,n,t,"<=",r)},this.startsWith=function(n,t){var u=t===undefined||t===null?n:t,r=e?$.trim(u.toString()).length:u.toString().length;return h?i._append(i._getStr("jQuery.jgrid.getAccessor(this,'"+n+"')")+".substr(0,"+r+") == "+i._getStr('"'+i._toStr(t)+'"')):(r=e?$.trim(t.toString()).length:t.toString().length,i._append(i._getStr("this")+".substr(0,"+r+") == "+i._getStr('"'+i._toStr(n)+'"'))),i._setCommand(i.startsWith,n),i._resetNegate(),i},this.endsWith=function(n,t){var r=t===undefined||t===null?n:t,u=e?$.trim(r.toString()).length:r.toString().length;return h?i._append(i._getStr("jQuery.jgrid.getAccessor(this,'"+n+"')")+".substr("+i._getStr("jQuery.jgrid.getAccessor(this,'"+n+"')")+".length-"+u+","+u+') == "'+i._toStr(t)+'"'):i._append(i._getStr("this")+".substr("+i._getStr("this")+'.length-"'+i._toStr(n)+'".length,"'+i._toStr(n)+'".length) == "'+i._toStr(n)+'"'),i._setCommand(i.endsWith,n),i._resetNegate(),i},this.contains=function(n,t){return h?i._append(i._getStr("jQuery.jgrid.getAccessor(this,'"+n+"')")+'.indexOf("'+i._toStr(t)+'",0) > -1'):i._append(i._getStr("this")+'.indexOf("'+i._toStr(n)+'",0) > -1'),i._setCommand(i.contains,n),i._resetNegate(),i},this.groupBy=function(n,t,u,f){return i._hasData()?i._getGroup(r,n,t,u,f):null},this.orderBy=function(n,t,r,u){return t=t===undefined||t===null?"a":$.trim(t.toString().toLowerCase()),(r===null||r===undefined)&&(r="text"),(u===null||u===undefined)&&(u="Y-m-d"),(t=="desc"||t=="descending")&&(t="d"),(t=="asc"||t=="ascending")&&(t="a"),o.push({by:n,dir:t,type:r,datefmt:u}),i},i};return new t(n,null)},extend:function(n){$.extend($.fn.jqGrid,n);this.no_legacy_api||$.fn.extend(n)}});$.fn.jqGrid=function(n){var t,i;if(typeof n=="string"){if(t=$.jgrid.getAccessor($.fn.jqGrid,n),!t)throw"jqGrid - No such method: "+n;return i=$.makeArray(arguments).slice(1),t.apply(this,i)}return this.each(function(){var r,i,u,e,t,y,ci,ht,ct,wt,tt,bt,it,l,a,lt,ai;if(!this.grid){if(r=$.extend(!0,{url:"",height:150,page:1,rowNum:20,rowTotal:null,records:0,pager:"",pgbuttons:!0,pginput:!0,colModel:[],rowList:[],colNames:[],sortorder:"asc",sortname:"",datatype:"xml",mtype:"GET",altRows:!1,selarrrow:[],savedRow:[],shrinkToFit:!0,xmlReader:{},jsonReader:{},subGrid:!1,subGridModel:[],reccount:0,lastpage:0,lastsort:0,selrow:null,beforeSelectRow:null,onSelectRow:null,onSortCol:null,ondblClickRow:null,onRightClickRow:null,onPaging:null,onSelectAll:null,loadComplete:null,gridComplete:null,loadError:null,loadBeforeSend:null,afterInsertRow:null,beforeRequest:null,onHeaderClick:null,viewrecords:!1,loadonce:!1,multiselect:!1,multikey:!1,editurl:null,search:!1,caption:"",hidegrid:!0,hiddengrid:!1,postData:{},userData:{},treeGrid:!1,treeGridModel:"nested",treeReader:{},treeANode:-1,ExpandColumn:null,tree_root_level:0,prmNames:{page:"page",rows:"rows",sort:"sidx",order:"sord",search:"_search",nd:"nd",id:"id",oper:"oper",editoper:"edit",addoper:"add",deloper:"del",subgridid:"id",npage:null,totalrows:"totalrows"},forceFit:!1,gridstate:"visible",cellEdit:!1,cellsubmit:"remote",nv:0,loadui:"enable",toolbar:[!1,""],scroll:!1,multiboxonly:!1,deselectAfterSort:!0,scrollrows:!1,autowidth:!1,scrollOffset:18,cellLayout:5,subGridWidth:20,multiselectWidth:20,gridview:!1,rownumWidth:25,rownumbers:!1,pagerpos:"center",recordpos:"right",footerrow:!1,userDataOnFooter:!1,hoverrows:!0,altclass:"ui-priority-secondary",viewsortcols:[!1,"vertical",!0],resizeclass:"",autoencode:!1,remapColumns:[],ajaxGridOptions:{},direction:"ltr",toppager:!1,headertitles:!1,scrollTimeout:40,data:[],_index:{},grouping:!1,groupingView:{groupField:[],groupOrder:[],groupText:[],groupColumnShow:[],groupSummary:[],showSummaryOnHide:!1,sortitems:[],sortnames:[],groupDataSorted:!1,summary:[],summaryval:[],plusicon:"ui-icon-circlesmall-plus",minusicon:"ui-icon-circlesmall-minus"},ignoreCase:!1,cmTemplate:{}},$.jgrid.defaults,n||{}),i={headers:[],cols:[],footers:[],dragStart:function(n,t,i){this.resizing={idx:n,startX:t.clientX,sOL:i[0]};this.hDiv.style.cursor="col-resize";this.curGbox=$("#rs_m"+$.jgrid.jqID(r.id),"#gbox_"+$.jgrid.jqID(r.id));this.curGbox.css({display:"block",left:i[0],top:i[1],height:i[2]});$.isFunction(r.resizeStart)&&r.resizeStart.call(this,t,n);document.onselectstart=function(){return!1}},dragMove:function(n){if(this.resizing){var t=n.clientX-this.resizing.startX,i=this.headers[this.resizing.idx],f=r.direction==="ltr"?i.width+t:i.width-t,u,e;f>33&&(this.curGbox.css({left:this.resizing.sOL+t}),r.forceFit===!0?(u=this.headers[this.resizing.idx+r.nv],e=r.direction==="ltr"?u.width-t:u.width+t,e>33&&(i.newWidth=f,u.newWidth=e)):(this.newWidth=r.direction==="ltr"?r.tblwidth+t:r.tblwidth-t,i.newWidth=f))}},dragEnd:function(){if(this.hDiv.style.cursor="default",this.resizing){var n=this.resizing.idx,t=this.headers[n].newWidth||this.headers[n].width;t=parseInt(t,10);this.resizing=!1;$("#rs_m"+$.jgrid.jqID(r.id)).css("display","none");r.colModel[n].width=t;this.headers[n].width=t;this.headers[n].el.style.width=t+"px";this.cols[n].style.width=t+"px";this.footers.length>0&&(this.footers[n].style.width=t+"px");r.forceFit===!0?(t=this.headers[n+r.nv].newWidth||this.headers[n+r.nv].width,this.headers[n+r.nv].width=t,this.headers[n+r.nv].el.style.width=t+"px",this.cols[n+r.nv].style.width=t+"px",this.footers.length>0&&(this.footers[n+r.nv].style.width=t+"px"),r.colModel[n+r.nv].width=t):(r.tblwidth=this.newWidth||r.tblwidth,$("table:first",this.bDiv).css("width",r.tblwidth+"px"),$("table:first",this.hDiv).css("width",r.tblwidth+"px"),this.hDiv.scrollLeft=this.bDiv.scrollLeft,r.footerrow&&($("table:first",this.sDiv).css("width",r.tblwidth+"px"),this.sDiv.scrollLeft=this.bDiv.scrollLeft));$.isFunction(r.resizeStop)&&r.resizeStop.call(this,t,n)}this.curGbox=null;document.onselectstart=function(){return!0}},populateVisible:function(){var f,u,l,e;if(i.timer&&clearTimeout(i.timer),i.timer=null,f=$(i.bDiv).height(),f){if(u=$("table:first",i.bDiv),u[0].rows.length)try{l=u[0].rows[1];e=l?$(l).outerHeight()||i.prevRowHeight:i.prevRowHeight}catch(y){e=i.prevRowHeight}if(e){i.prevRowHeight=e;var v=r.rowNum,o=i.scrollTop=i.bDiv.scrollTop,s=Math.round(u.position().top)-o,h=s+u.height(),n=e*v,t,c,a;if(h<f&&s<=0&&(r.lastpage===undefined||parseInt((h+o+n-1)/n,10)<=r.lastpage)&&(c=parseInt((f-h+n-1)/n,10),h>=0||c<2||r.scroll===!0?(t=Math.round((h+o)/n)+1,s=-1):s=1),s>0&&(t=parseInt(o/n,10)+1,c=parseInt((o+f)/n,10)+2-t,a=!0),c){if(r.lastpage&&t>r.lastpage||r.lastpage==1||t===r.page&&t===r.lastpage)return;i.hDiv.loading?i.timer=setTimeout(i.populateVisible,r.scrollTimeout):(r.page=t,a&&(i.selectionPreserver(u[0]),i.emptyRows(i.bDiv,!1,!1)),i.populate(c))}}}},scrollGrid:function(n){if(r.scroll){var t=i.bDiv.scrollTop;i.scrollTop===undefined&&(i.scrollTop=0);t!=i.scrollTop&&(i.scrollTop=t,i.timer&&clearTimeout(i.timer),i.timer=setTimeout(i.populateVisible,r.scrollTimeout))}i.hDiv.scrollLeft=i.bDiv.scrollLeft;r.footerrow&&(i.sDiv.scrollLeft=i.bDiv.scrollLeft);n&&n.stopPropagation()},selectionPreserver:function(n){var t=n.p,r=t.selrow,i=t.selarrrow?$.makeArray(t.selarrrow):null,f=n.grid.bDiv.scrollLeft,u=t.gridComplete;t.gridComplete=function(){if(t.selrow=null,t.selarrrow=[],t.multiselect&&i&&i.length>0)for(var e=0;e<i.length;e++)i[e]!=r&&$(n).jqGrid("setSelection",i[e],!1);r&&$(n).jqGrid("setSelection",r,!1);n.grid.bDiv.scrollLeft=f;t.gridComplete=u;t.gridComplete&&u()}}},this.tagName.toUpperCase()!="TABLE"){alert("Element is not a table");return}if($(this).empty().attr("tabindex","1"),this.p=r,this.p.colNames.length===0)for(u=0;u<this.p.colModel.length;u++)this.p.colNames[u]=this.p.colModel[u].label||this.p.colModel[u].name;if(this.p.colNames.length!==this.p.colModel.length){alert($.jgrid.errors.model);return}var v=$("<div class='ui-jqgrid-view'><\/div>"),kt,w=$.browser.msie?!0:!1,at=$.browser.webkit||$.browser.safari?!0:!1;t=this;t.p.direction=$.trim(t.p.direction.toLowerCase());$.inArray(t.p.direction,["ltr","rtl"])==-1&&(t.p.direction="ltr");e=t.p.direction;$(v).insertBefore(this);$(this).appendTo(v).removeClass("scroll");y=$("<div class='ui-jqgrid ui-widget ui-widget-content ui-corner-all'><\/div>");$(y).insertBefore(v).attr({id:"gbox_"+this.id,dir:e});$(v).appendTo(y).attr("id","gview_"+this.id);kt=w&&$.browser.version<=6?'<iframe style="display:block;position:absolute;z-index:-1;filter:Alpha(Opacity=\'0\');" src="javascript:false;"><\/iframe>':"";$("<div class='ui-widget-overlay jqgrid-overlay' id='lui_"+this.id+"'><\/div>").append(kt).insertBefore(v);$("<div class='loading ui-state-default ui-state-active' id='load_"+this.id+"'>"+this.p.loadtext+"<\/div>").insertBefore(v);$(this).attr({cellspacing:"0",cellpadding:"0",border:"0",role:"grid","aria-multiselectable":!!this.p.multiselect,"aria-labelledby":"gbox_"+this.id});var b=function(n,t){return n=parseInt(n,10),isNaN(n)?t?t:0:n},k=function(n,r,u,f,e,o){var h=t.p.colModel[n],v=h.align,c='style="',a=h.classes,y=h.name,l,s=[];return v&&(c+="text-align:"+v+";"),h.hidden===!0&&(c+="display:none;"),r===0?c+="width: "+i.headers[n].width+"px;":h.cellattr&&$.isFunction(h.cellattr)&&(l=h.cellattr.call(t,e,u,f,h,o),l&&typeof l=="string"&&(l=l.replace(/style/i,"style").replace(/title/i,"title"),l.indexOf("title")>-1&&(h.title=!1),l.indexOf("class")>-1&&(a=undefined),s=l.split("style"),s.length===2?(s[1]=$.trim(s[1].replace("=","")),(s[1].indexOf("'")===0||s[1].indexOf('"')===0)&&(s[1]=s[1].substring(1)),c+=s[1].replace(/'/gi,'"')):c+='"')),s.length||(s[0]="",c+='"'),c+=(a!==undefined?' class="'+a+'"':"")+(h.title&&u?' title="'+$.jgrid.stripHtml(u)+'"':""),c+=' aria-describedby="'+t.p.id+"_"+y+'"',c+s[0]},dt=function(n){return n===undefined||n===null||n===""?"&#160;":t.p.autoencode?$.jgrid.htmlEncode(n):n+""},gt=function(n,i,r,u,f){var e=t.p.colModel[r],o,s;return typeof e.formatter!="undefined"?(s={rowId:n,colModel:e,gid:t.p.id,pos:r},o=$.isFunction(e.formatter)?e.formatter.call(t,i,s,u,f):$.fmatter?$.fn.fmatter(e.formatter,i,s,u,f):dt(i)):o=dt(i),o},vt=function(n,t,i,r,u){var f,e;return f=gt(n,t,i,u,"add"),e=k(i,r,f,u,n,!0),'<td role="gridcell" '+e+">"+f+"<\/td>"},ni=function(n,i,r){var u='<input role="checkbox" type="checkbox" id="jqg_'+t.p.id+"_"+n+'" class="cbox" name="jqg_'+t.p.id+"_"+n+'"/>',f=k(i,r,"",null,n,!0);return'<td role="gridcell" '+f+">"+u+"<\/td>"},ti=function(n,t,i,r){var u=(parseInt(i,10)-1)*parseInt(r,10)+1+t,f=k(n,t,u,null,t,!0);return'<td role="gridcell" class="ui-state-default jqgrid-rownum" '+f+">"+u+"<\/td>"},ii=function(n){for(var i,u=[],f=0,r=0;r<t.p.colModel.length;r++)i=t.p.colModel[r],i.name!=="cb"&&i.name!=="subgrid"&&i.name!=="rn"&&(u[f]=n=="local"?i.name:n=="xml"?i.xmlmap||i.name:i.jsonmap||i.name,f++);return u},rt=function(n){var i=t.p.remapColumns;return i&&i.length||(i=$.map(t.p.colModel,function(n,t){return t})),n&&(i=$.map(i,function(t){return t<n?null:t-n})),i},d=function(n,i,r){if(t.p.deepempty)$("#"+$.jgrid.jqID(t.p.id)+" tbody:first tr:gt(0)").remove();else{var u=$("#"+$.jgrid.jqID(t.p.id)+" tbody:first tr:first")[0];$("#"+$.jgrid.jqID(t.p.id)+" tbody:first").empty().append(u)}i&&t.p.scroll&&($(">div:first",n).css({height:"auto"}).children("div:first").css({height:0,display:"none"}),n.scrollTop=0);r===!0&&t.p.treeGrid===!0&&(t.p.data=[],t.p._index={})},yt=function(){for(var u=t.p.data.length,r,f=t.p.rownumbers===!0?1:0,e=t.p.multiselect===!0?1:0,o=t.p.subGrid===!0?1:0,i=t.p.keyIndex===!1||t.p.loadonce===!0?t.p.localReader.id:t.p.colModel[t.p.keyIndex+e+o+f].name,n=0;n<u;n++)r=$.jgrid.getAccessor(t.p.data[n],i),t.p._index[r]=n},pt=function(n,i,r,u,f){var gt=new Date,ut=t.p.datatype!="local"&&t.p.loadonce||t.p.datatype=="xmlstring",st="_id_",ri=t.p.datatype=="local"?"local":"xml",g,yt,pt,wt,ct,bt,kt,lt,ot,dt;if(ut&&(t.p.data=[],t.p._index={},t.p.localReader.id=st),t.p.reccount=0,$.isXMLDoc(n))t.p.treeANode!==-1||t.p.scroll?r=r>1?r:1:(d(i,!1,!0),r=1);else return;var h,it,w=0,v,c=0,b=0,s=0,y,ht,k=[],nt,o={},l,a,e=[],ui=t.p.altRows===!0?" "+t.p.altclass:"",at;t.p.xmlReader.repeatitems||(k=ii(ri));y=t.p.keyIndex===!1?t.p.xmlReader.id:t.p.keyIndex;k.length>0&&!isNaN(y)&&(t.p.remapColumns&&t.p.remapColumns.length&&(y=$.inArray(y,t.p.remapColumns)),y=k[y]);ht=(y+"").indexOf("[")===-1?k.length?function(n,t){return $(y,n).text()||t}:function(n,i){return $(t.p.xmlReader.cell,n).eq(y).text()||i}:function(n,t){return n.getAttribute(y.replace(/[\[\]]/g,""))||t};t.p.userData={};$(t.p.xmlReader.page,n).each(function(){t.p.page=this.textContent||this.text||0});$(t.p.xmlReader.total,n).each(function(){t.p.lastpage=this.textContent||this.text;t.p.lastpage===undefined&&(t.p.lastpage=1)});$(t.p.xmlReader.records,n).each(function(){t.p.records=this.textContent||this.text||0});$(t.p.xmlReader.userdata,n).each(function(){t.p.userData[this.getAttribute("name")]=this.textContent||this.text});g=$(t.p.xmlReader.root+" "+t.p.xmlReader.row,n);g||(g=[]);var tt=g.length,p=0,ft={},et;if(g&&tt)for(et=parseInt(t.p.rowNum,10),yt=t.p.scroll?$.jgrid.randId():1,f&&(et*=f+1),wt=$.isFunction(t.p.afterInsertRow),ct="",t.p.grouping&&t.p.groupingView.groupCollapse===!0&&(ct=' style="display:none;"');p<tt;){if(l=g[p],a=ht(l,yt+p),pt=r===0?0:r+1,at=(pt+p)%2==1?ui:"",e.push("<tr"+ct+' id="'+a+'" tabindex="-1" role="row" class ="ui-widget-content jqgrow ui-row-'+t.p.direction+""+at+'">'),t.p.rownumbers===!0&&(e.push(ti(0,p,t.p.page,t.p.rowNum)),s=1),t.p.multiselect===!0&&(e.push(ni(a,s,p)),c=1),t.p.subGrid===!0&&(e.push($(t).jqGrid("addSubGridCell",c+s,p+r)),b=1),t.p.xmlReader.repeatitems)nt||(nt=rt(c+b+s)),bt=$(t.p.xmlReader.cell,l),$.each(nt,function(n){var i=bt[this];if(!i)return!1;v=i.textContent||i.text;o[t.p.colModel[n+c+b+s].name]=v;e.push(vt(a,v,n+c+b+s,p+r,l))});else for(h=0;h<k.length;h++)v=$(k[h],l).text(),o[t.p.colModel[h+c+b+s].name]=v,e.push(vt(a,v,h+c+b+s,p+r,l));if(e.push("<\/tr>"),t.p.grouping){for(kt=t.p.groupingView.groupField.length,lt=[],ot=0;ot<kt;ot++)lt.push(o[t.p.groupingView.groupField[ot]]);ft=$(t).jqGrid("groupingPrepare",e,lt,ft,o);e=[]}if((ut||t.p.treeGrid===!0)&&(o[st]=a,t.p.data.push(o),t.p._index[a]=t.p.data.length-1),t.p.gridview===!1&&($("tbody:first",i).append(e.join("")),wt&&t.p.afterInsertRow.call(t,a,o,l),e=[]),o={},w++,p++,w==et)break}if(t.p.gridview===!0&&(it=t.p.treeANode>-1?t.p.treeANode:0,t.p.grouping?($(t).jqGrid("groupingRender",ft,t.p.colModel.length),ft=null):t.p.treeGrid===!0&&it>0?$(t.rows[it]).after(e.join("")):$("tbody:first",i).append(e.join(""))),t.p.subGrid===!0)try{$(t).jqGrid("addSubGrid",c+s)}catch(fi){}if(t.p.totaltime=new Date-gt,w>0&&t.p.records===0&&(t.p.records=tt),e=null,t.p.treeGrid===!0)try{$(t).jqGrid("setTreeNode",it+1,w+it+1)}catch(ei){}if(t.p.treeGrid||t.p.scroll||(t.grid.bDiv.scrollTop=0),t.p.reccount=w,t.p.treeANode=-1,t.p.userDataOnFooter&&$(t).jqGrid("footerData","set",t.p.userData,!0),ut&&(t.p.records=tt,t.p.lastpage=Math.ceil(tt/et)),u||t.updatepager(!1,!0),ut)while(w<tt){if(l=g[w],a=ht(l,w),t.p.xmlReader.repeatitems)nt||(nt=rt(c+b+s)),dt=$(t.p.xmlReader.cell,l),$.each(nt,function(n){var i=dt[this];if(!i)return!1;v=i.textContent||i.text;o[t.p.colModel[n+c+b+s].name]=v});else for(h=0;h<k.length;h++)v=$(k[h],l).text(),o[t.p.colModel[h+c+b+s].name]=v;o[st]=a;t.p.data.push(o);t.p._index[a]=t.p.data.length-1;o={};w++}},ut=function(n,i,r,u,f){var ri=new Date,e,et,ct,tt,ot,at,kt,yt,gt,pt,ht,wt;if(n)t.p.treeANode!==-1||t.p.scroll?r=r>1?r:1:(d(i,!1,!0),r=1);else return;et="_id_";tt=t.p.datatype!="local"&&t.p.loadonce||t.p.datatype=="jsonstring";tt&&(t.p.data=[],t.p._index={},t.p.localReader.id=et);t.p.reccount=0;t.p.datatype=="local"?(e=t.p.localReader,ct="local"):(e=t.p.jsonReader,ct="json");var a=0,it,v,c,ut=[],p,s,b=0,g=0,w=0,nt,k,y,l={},ft,o,h=[],ui=t.p.altRows===!0?" "+t.p.altclass:"",bt,lt;t.p.page=$.jgrid.getAccessor(n,e.page)||0;lt=$.jgrid.getAccessor(n,e.total);t.p.lastpage=lt===undefined?1:lt;t.p.records=$.jgrid.getAccessor(n,e.records)||0;t.p.userData=$.jgrid.getAccessor(n,e.userdata)||{};e.repeatitems||(p=ut=ii(ct));y=t.p.keyIndex===!1?e.id:t.p.keyIndex;ut.length>0&&!isNaN(y)&&(t.p.remapColumns&&t.p.remapColumns.length&&(y=$.inArray(y,t.p.remapColumns)),y=ut[y]);k=$.jgrid.getAccessor(n,e.root);k||(k=[]);nt=k.length;v=0;ot=parseInt(t.p.rowNum,10);at=t.p.scroll?$.jgrid.randId():1;f&&(ot*=f+1);var fi=$.isFunction(t.p.afterInsertRow),st={},dt="";for(t.p.grouping&&t.p.groupingView.groupCollapse===!0&&(dt=' style="display:none;"');v<nt;){for(s=k[v],o=$.jgrid.getAccessor(s,y),o===undefined&&(o=at+v,ut.length===0&&e.cell&&(yt=$.jgrid.getAccessor(s,e.cell),o=yt[y]||o,yt=null)),kt=r===1?0:r,bt=(kt+v)%2==1?ui:"",h.push("<tr"+dt+' id="'+o+'" tabindex="-1" role="row" class= "ui-widget-content jqgrow ui-row-'+t.p.direction+""+bt+'">'),t.p.rownumbers===!0&&(h.push(ti(0,v,t.p.page,t.p.rowNum)),w=1),t.p.multiselect&&(h.push(ni(o,w,v)),b=1),t.p.subGrid&&(h.push($(t).jqGrid("addSubGridCell",b+w,v+r)),g=1),e.repeatitems&&(e.cell&&(s=$.jgrid.getAccessor(s,e.cell)),p||(p=rt(b+g+w))),c=0;c<p.length;c++)it=$.jgrid.getAccessor(s,p[c]),h.push(vt(o,it,c+b+g+w,v+r,s)),l[t.p.colModel[c+b+g+w].name]=it;if(h.push("<\/tr>"),t.p.grouping){for(gt=t.p.groupingView.groupField.length,pt=[],ht=0;ht<gt;ht++)pt.push(l[t.p.groupingView.groupField[ht]]);st=$(t).jqGrid("groupingPrepare",h,pt,st,l);h=[]}if((tt||t.p.treeGrid===!0)&&(l[et]=o,t.p.data.push(l),t.p._index[o]=t.p.data.length-1),t.p.gridview===!1&&($("#"+$.jgrid.jqID(t.p.id)+" tbody:first").append(h.join("")),fi&&t.p.afterInsertRow.call(t,o,l,s),h=[]),l={},a++,v++,a==ot)break}if(t.p.gridview===!0&&(ft=t.p.treeANode>-1?t.p.treeANode:0,t.p.grouping?($(t).jqGrid("groupingRender",st,t.p.colModel.length),st=null):t.p.treeGrid===!0&&ft>0?$(t.rows[ft]).after(h.join("")):$("#"+$.jgrid.jqID(t.p.id)+" tbody:first").append(h.join(""))),t.p.subGrid===!0)try{$(t).jqGrid("addSubGrid",b+w)}catch(ei){}if(t.p.totaltime=new Date-ri,a>0&&t.p.records===0&&(t.p.records=nt),h=null,t.p.treeGrid===!0)try{$(t).jqGrid("setTreeNode",ft+1,a+ft+1)}catch(oi){}if(t.p.treeGrid||t.p.scroll||(t.grid.bDiv.scrollTop=0),t.p.reccount=a,t.p.treeANode=-1,t.p.userDataOnFooter&&$(t).jqGrid("footerData","set",t.p.userData,!0),tt&&(t.p.records=nt,t.p.lastpage=Math.ceil(nt/ot)),u||t.updatepager(!1,!0),tt)while(a<nt&&k[a]){if(s=k[a],o=$.jgrid.getAccessor(s,y),o===undefined&&(o=at+a,ut.length===0&&e.cell&&(wt=$.jgrid.getAccessor(s,e.cell),o=wt[y]||o,wt=null)),s){for(e.repeatitems&&(e.cell&&(s=$.jgrid.getAccessor(s,e.cell)),p||(p=rt(b+g+w))),c=0;c<p.length;c++)it=$.jgrid.getAccessor(s,p[c]),l[t.p.colModel[c+b+g+w].name]=it;l[et]=o;t.p.data.push(l);t.p._index[o]=t.p.data.length-1;l={}}a++}},vi=function(){function b(t){var f=0,r,e,s,o,u,h;if(t.groups!==undefined){for(e=t.groups.length&&t.groupOp.toString().toUpperCase()==="OR",e&&n.orBegin(),r=0;r<t.groups.length;r++){f>0&&e&&n.or();try{b(t.groups[r])}catch(c){alert(c)}f++}e&&n.orEnd()}if(t.rules!==undefined){f>0&&(h=n.select(),n=$.jgrid.from(h));try{for(s=t.rules.length&&t.groupOp.toString().toUpperCase()==="OR",s&&n.orBegin(),r=0;r<t.rules.length;r++)u=t.rules[r],o=t.groupOp.toString().toUpperCase(),l[u.op]&&u.field&&(f>0&&o&&o==="OR"&&(n=n.or()),n=l[u.op](n,o)(u.field,u.data,i[u.field])),f++;s&&n.orEnd()}catch(a){alert(a)}}}var r,a=!1,i={},v=[],w=[],s,f,h,c,l,n,u;if($.isArray(t.p.data)){if(c=t.p.grouping?t.p.groupingView:!1,$.each(t.p.colModel,function(){if(f=this.sorttype||"text",f=="date"||f=="datetime"?(this.formatter&&typeof this.formatter=="string"&&this.formatter=="date"?(s=this.formatoptions&&this.formatoptions.srcformat?this.formatoptions.srcformat:$.jgrid.formatter.date.srcformat,h=this.formatoptions&&this.formatoptions.newformat?this.formatoptions.newformat:$.jgrid.formatter.date.newformat):s=h=this.datefmt||"Y-m-d",i[this.name]={stype:f,srcfmt:s,newfmt:h}):i[this.name]={stype:f,srcfmt:"",newfmt:""},t.p.grouping&&this.name==c.groupField[0]){var n=this.name;typeof this.index!="undefined"&&(n=this.index);v[0]=i[n];w.push(n)}a||this.index!=t.p.sortname&&this.name!=t.p.sortname||(r=this.name,a=!0)}),t.p.treeGrid){$(t).jqGrid("SortTree",r,t.p.sortorder,i[r].stype,i[r].srcfmt);return}if(l={eq:function(n){return n.equals},ne:function(n){return n.notEquals},lt:function(n){return n.less},le:function(n){return n.lessOrEquals},gt:function(n){return n.greater},ge:function(n){return n.greaterOrEquals},cn:function(n){return n.contains},nc:function(n,t){return t==="OR"?n.orNot().contains:n.andNot().contains},bw:function(n){return n.startsWith},bn:function(n,t){return t==="OR"?n.orNot().startsWith:n.andNot().startsWith},en:function(n,t){return t==="OR"?n.orNot().endsWith:n.andNot().endsWith},ew:function(n){return n.endsWith},ni:function(n,t){return t==="OR"?n.orNot().equals:n.andNot().equals},"in":function(n){return n.equals},nu:function(n){return n.isNull},nn:function(n,t){return t==="OR"?n.orNot().isNull:n.andNot().isNull}},n=$.jgrid.from(t.p.data),t.p.ignoreCase&&(n=n.ignoreCase()),t.p.search===!0)if(u=t.p.postData.filters,u)typeof u=="string"&&(u=$.jgrid.parse(u)),b(u);else try{n=l[t.p.postData.searchOper](n)(t.p.postData.searchField,t.p.postData.searchString,i[t.p.postData.searchField])}catch(g){}t.p.grouping&&(n.orderBy(w,c.groupOrder[0],v[0].stype,v[0].srcfmt),c.groupDataSorted=!0);r&&t.p.sortorder&&a&&(t.p.sortorder.toUpperCase()=="DESC"?n.orderBy(t.p.sortname,"d",i[r].stype,i[r].srcfmt):n.orderBy(t.p.sortname,"a",i[r].stype,i[r].srcfmt));var e=n.select(),y=parseInt(t.p.rowNum,10),k=e.length,p=parseInt(t.p.page,10),d=Math.ceil(k/y),o={};return e=e.slice((p-1)*y,p*y),n=null,i=null,o[t.p.localReader.total]=d,o[t.p.localReader.page]=p,o[t.p.localReader.records]=k,o[t.p.localReader.root]=e,e=null,o}},yi=function(n,i){var o,y,r,c,s,l,h,e="",w,u=t.p.pager?"_"+$.jgrid.jqID(t.p.pager.substr(1)):"",f=t.p.toppager?"_"+t.p.toppager.substr(1):"",a,v,p,k;r=parseInt(t.p.page,10)-1;r<0&&(r=0);r=r*parseInt(t.p.rowNum,10);s=r+t.p.reccount;t.p.scroll&&(a=$("tbody:first > tr:gt(0)",t.grid.bDiv),r=s-a.length,t.p.reccount=a.length,v=a.outerHeight()||t.grid.prevRowHeight,v&&(p=r*v,k=parseInt(t.p.records,10)*v,$(">div:first",t.grid.bDiv).css({height:k}).children("div:first").css({height:p,display:p?"":"none"})),t.grid.bDiv.scrollLeft=t.grid.hDiv.scrollLeft);e=t.p.pager?t.p.pager:"";e+=t.p.toppager?e?","+t.p.toppager:t.p.toppager:"";e&&(h=$.jgrid.formatter.integer||{},o=b(t.p.page),y=b(t.p.lastpage),$(".selbox",e).attr("disabled",!1),t.p.pginput===!0&&($(".ui-pg-input",e).val(t.p.page),w=t.p.toppager?"#sp_1"+u+",#sp_1"+f:"#sp_1"+u,$(w).html($.fmatter?$.fmatter.util.NumberFormat(t.p.lastpage,h):t.p.lastpage)),t.p.viewrecords&&(t.p.reccount===0?$(".ui-paging-info",e).html(t.p.emptyrecords):(c=r+1,l=t.p.records,$.fmatter&&(c=$.fmatter.util.NumberFormat(c,h),s=$.fmatter.util.NumberFormat(s,h),l=$.fmatter.util.NumberFormat(l,h)),$(".ui-paging-info",e).html($.jgrid.format(t.p.recordtext,c,s,l)))),t.p.pgbuttons===!0&&(o<=0&&(o=y=0),o==1||o===0?($("#first"+u+", #prev"+u).addClass("ui-state-disabled").removeClass("ui-state-hover"),t.p.toppager&&$("#first_t"+f+", #prev_t"+f).addClass("ui-state-disabled").removeClass("ui-state-hover")):($("#first"+u+", #prev"+u).removeClass("ui-state-disabled"),t.p.toppager&&$("#first_t"+f+", #prev_t"+f).removeClass("ui-state-disabled")),o==y||o===0?($("#next"+u+", #last"+u).addClass("ui-state-disabled").removeClass("ui-state-hover"),t.p.toppager&&$("#next_t"+f+", #last_t"+f).addClass("ui-state-disabled").removeClass("ui-state-hover")):($("#next"+u+", #last"+u).removeClass("ui-state-disabled"),t.p.toppager&&$("#next_t"+f+", #last_t"+f).removeClass("ui-state-disabled"))));n===!0&&t.p.rownumbers===!0&&$("td.jqgrid-rownum",t.rows).each(function(n){$(this).html(r+1+n)});i&&t.p.jqgdnd&&$(t).jqGrid("gridDnD","updateDnD");$.isFunction(t.p.gridComplete)&&t.p.gridComplete.call(t)},ft=function(){if(t.grid.hDiv.loading=!0,!t.p.hiddengrid)switch(t.p.loadui){case"enable":$("#load_"+$.jgrid.jqID(t.p.id)).show();break;case"block":$("#lui_"+$.jgrid.jqID(t.p.id)).show();$("#load_"+$.jgrid.jqID(t.p.id)).show()}},g=function(){t.grid.hDiv.loading=!1;switch(t.p.loadui){case"enable":$("#load_"+$.jgrid.jqID(t.p.id)).hide();break;case"block":$("#lui_"+$.jgrid.jqID(t.p.id)).hide();$("#load_"+$.jgrid.jqID(t.p.id)).hide()}},c=function(n){var u,e,o,h,l;if(!t.grid.hDiv.loading){var a=t.p.scroll&&n===!1,r={},s,f,i=t.p.prmNames;if(t.p.page<=0&&(t.p.page=1),i.search!==null&&(r[i.search]=t.p.search),i.nd!==null&&(r[i.nd]=(new Date).getTime()),i.rows!==null&&(r[i.rows]=t.p.rowNum),i.page!==null&&(r[i.page]=t.p.page),i.sort!==null&&(r[i.sort]=t.p.sortname),i.order!==null&&(r[i.order]=t.p.sortorder),t.p.rowTotal!==null&&i.totalrows!==null&&(r[i.totalrows]=t.p.rowTotal),u=t.p.loadComplete,e=$.isFunction(u),e||(u=null),o=0,n=n||1,n>1?i.npage!==null?(r[i.npage]=n,o=n-1,n=1):u=function(i){t.p.page++;t.grid.hDiv.loading=!1;e&&t.p.loadComplete.call(t,i);c(n-1)}:i.npage!==null&&delete t.p.postData[i.npage],t.p.grouping&&($(t).jqGrid("groupingSetup"),t.p.groupingView.groupDataSorted===!0&&(r[i.sort]=t.p.groupingView.groupField[0]+" "+t.p.groupingView.groupOrder[0]+", "+r[i.sort])),$.extend(t.p.postData,r),h=t.p.scroll?t.rows.length-1:1,$.isFunction(t.p.datatype)){t.p.datatype.call(t,t.p.postData,"load_"+t.p.id);return}$.isFunction(t.p.beforeRequest)&&t.p.beforeRequest.call(t);s=t.p.datatype.toLowerCase();switch(s){case"json":case"jsonp":case"xml":case"script":$.ajax($.extend({url:t.p.url,type:t.p.mtype,dataType:s,data:$.isFunction(t.p.serializeGridData)?t.p.serializeGridData.call(t,t.p.postData):t.p.postData,success:function(i){s==="xml"?pt(i,t.grid.bDiv,h,n>1,o):ut(i,t.grid.bDiv,h,n>1,o);u&&u.call(t,i);a&&t.grid.populateVisible();(t.p.loadonce||t.p.treeGrid)&&(t.p.datatype="local");i=null;g()},error:function(n,i,r){$.isFunction(t.p.loadError)&&t.p.loadError.call(t,n,i,r);g();n=null},beforeSend:function(n){ft();$.isFunction(t.p.loadBeforeSend)&&t.p.loadBeforeSend.call(t,n)}},$.jgrid.ajaxOptions,t.p.ajaxGridOptions));break;case"xmlstring":ft();f=$.jgrid.stringToDoc(t.p.datastr);pt(f,t.grid.bDiv);e&&t.p.loadComplete.call(t,f);t.p.datatype="local";t.p.datastr=null;g();break;case"jsonstring":ft();f=typeof t.p.datastr=="string"?$.jgrid.parse(t.p.datastr):t.p.datastr;ut(f,t.grid.bDiv);e&&t.p.loadComplete.call(t,f);t.p.datatype="local";t.p.datastr=null;g();break;case"local":case"clientside":ft();t.p.datatype="local";l=vi();ut(l,t.grid.bDiv,h,n>1,o);u&&u.call(t,l);a&&t.grid.populateVisible();g()}}},ri=function(n,i){var v="<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='ui-separator'><\/span><\/td>",f="",r="<table cellspacing='0' cellpadding='0' border='0' style='table-layout:auto;' class='ui-pg-table'><tbody><tr>",o="",u,y,p,w,s,k,h,a=function(n){var i;return($.isFunction(t.p.onPaging)&&(i=t.p.onPaging.call(t,n)),t.p.selrow=null,t.p.multiselect&&(t.p.selarrrow=[],$("#cb_"+$.jgrid.jqID(t.p.id),t.grid.hDiv).attr("checked",!1)),t.p.savedRow=[],i=="stop")?!1:!0},l;if(n=n.substr(1),i+="_"+n,u="pg_"+n,y=n+"_left",p=n+"_center",w=n+"_right",$("#"+$.jgrid.jqID(n)).append("<div id='"+u+"' class='ui-pager-control' role='group'><table cellspacing='0' cellpadding='0' border='0' class='ui-pg-table' style='width:100%;table-layout:fixed;height:100%;' role='row'><tbody><tr><td id='"+y+"' align='left'><\/td><td id='"+p+"' align='center' style='white-space:pre;'><\/td><td id='"+w+"' align='right'><\/td><\/tr><\/tbody><\/table><\/div>").attr("dir","ltr"),t.p.rowList.length>0){for(o="<td dir='"+e+"'>",o+="<select class='ui-pg-selbox' role='listbox'>",h=0;h<t.p.rowList.length;h++)o+='<option role="option" value="'+t.p.rowList[h]+'"'+(t.p.rowNum==t.p.rowList[h]?' selected="selected"':"")+">"+t.p.rowList[h]+"<\/option>";o+="<\/select><\/td>"}e=="rtl"&&(r+=o);t.p.pginput===!0&&(f="<td dir='"+e+"'>"+$.jgrid.format(t.p.pgtext||"","<input class='ui-pg-input' type='text' size='2' maxlength='7' value='0' role='textbox'/>","<span id='sp_1_"+$.jgrid.jqID(n)+"'><\/span>")+"<\/td>");t.p.pgbuttons===!0?(l=["first"+i,"prev"+i,"next"+i,"last"+i],e=="rtl"&&l.reverse(),r+="<td id='"+l[0]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-first'><\/span><\/td>",r+="<td id='"+l[1]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-prev'><\/span><\/td>",r+=f!==""?v+f+v:"",r+="<td id='"+l[2]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-next'><\/span><\/td>",r+="<td id='"+l[3]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-end'><\/span><\/td>"):f!==""&&(r+=f);e=="ltr"&&(r+=o);r+="<\/tr><\/tbody><\/table>";t.p.viewrecords===!0&&$("td#"+n+"_"+t.p.recordpos,"#"+u).append("<div dir='"+e+"' style='text-align:"+t.p.recordpos+"' class='ui-paging-info'><\/div>");$("td#"+n+"_"+t.p.pagerpos,"#"+u).append(r);k=$(".ui-jqgrid").css("font-size")||"11px";$(document.body).append("<div id='testpg' class='ui-jqgrid ui-widget ui-widget-content' style='font-size:"+k+";visibility:hidden;' ><\/div>");s=$(r).clone().appendTo("#testpg").width();$("#testpg").remove();s>0&&(f!==""&&(s+=50),$("td#"+n+"_"+t.p.pagerpos,"#"+u).width(s));t.p._nvtd=[];t.p._nvtd[0]=s?Math.floor((t.p.width-s)/2):Math.floor(t.p.width/3);t.p._nvtd[1]=0;r=null;$(".ui-pg-selbox","#"+u).bind("change",function(){return(t.p.page=Math.round(t.p.rowNum*(t.p.page-1)/this.value-.5)+1,t.p.rowNum=this.value,i?$(".ui-pg-selbox",t.p.pager).val(this.value):t.p.toppager&&$(".ui-pg-selbox",t.p.toppager).val(this.value),!a("records"))?!1:(c(),!1)});t.p.pgbuttons===!0&&($(".ui-pg-button","#"+u).hover(function(){$(this).hasClass("ui-state-disabled")?this.style.cursor="default":($(this).addClass("ui-state-hover"),this.style.cursor="pointer")},function(){$(this).hasClass("ui-state-disabled")||($(this).removeClass("ui-state-hover"),this.style.cursor="default")}),$("#first"+$.jgrid.jqID(i)+", #prev"+$.jgrid.jqID(i)+", #next"+$.jgrid.jqID(i)+", #last"+$.jgrid.jqID(i)).click(function(){var n=b(t.p.page,1),r=b(t.p.lastpage,1),u=!1,o=!0,s=!0,f=!0,e=!0;if(r===0||r===1?(o=!1,s=!1,f=!1,e=!1):r>1&&n>=1?n===1?(o=!1,s=!1):n>1&&n<r||n===r&&(f=!1,e=!1):r>1&&n===0&&(f=!1,e=!1,n=r-1),this.id==="first"+i&&o&&(t.p.page=1,u=!0),this.id==="prev"+i&&s&&(t.p.page=n-1,u=!0),this.id==="next"+i&&f&&(t.p.page=n+1,u=!0),this.id==="last"+i&&e&&(t.p.page=r,u=!0),u){if(!a(this.id))return!1;c()}return!1}));t.p.pginput===!0&&$("input.ui-pg-input","#"+u).keypress(function(n){var i=n.charCode?n.charCode:n.keyCode?n.keyCode:0;return i==13?(t.p.page=$(this).val()>0?$(this).val():t.p.page,!a("user"))?!1:(c(),!1):this})},ui=function(n,i,r,u){var e,f,o;if(t.p.colModel[i].sortable&&!(t.p.savedRow.length>0)){if(r||(t.p.lastsort==i?t.p.sortorder=="asc"?t.p.sortorder="desc":t.p.sortorder=="desc"&&(t.p.sortorder="asc"):t.p.sortorder=t.p.colModel[i].firstsortorder||"asc",t.p.page=1),u)if(t.p.lastsort!=i||t.p.sortorder!=u||r)t.p.sortorder=u;else return;if(f=$("thead:first",t.grid.hDiv).get(0),$("tr th:eq("+t.p.lastsort+") span.ui-grid-ico-sort",f).addClass("ui-state-disabled"),$("tr th:eq("+t.p.lastsort+")",f).attr("aria-selected","false"),$("tr th:eq("+i+") span.ui-icon-"+t.p.sortorder,f).removeClass("ui-state-disabled"),$("tr th:eq("+i+")",f).attr("aria-selected","true"),t.p.viewsortcols[0]||t.p.lastsort!=i&&($("tr th:eq("+t.p.lastsort+") span.s-ico",f).hide(),$("tr th:eq("+i+") span.s-ico",f).show()),n=n.substring(5+t.p.id.length+1),t.p.sortname=t.p.colModel[i].index||n,e=t.p.sortorder,$.isFunction(t.p.onSortCol)&&t.p.onSortCol.call(t,n,i,e)=="stop"){t.p.lastsort=i;return}t.p.datatype=="local"?t.p.deselectAfterSort&&$(t).jqGrid("resetSelection"):(t.p.selrow=null,t.p.multiselect&&$("#cb_"+$.jgrid.jqID(t.p.id),t.grid.hDiv).attr("checked",!1),t.p.selarrrow=[],t.p.savedRow=[]);t.p.scroll&&(o=t.grid.bDiv.scrollLeft,d(t.grid.bDiv,!0,!1),t.grid.hDiv.scrollLeft=o);t.p.subGrid&&t.p.datatype=="local"&&$("td.sgexpanded","#"+$.jgrid.jqID(t.p.id)).each(function(){$(this).trigger("click")});c();t.p.lastsort=i;t.p.sortname!=n&&i&&(t.p.lastsort=i)}},pi=function(){var n=0,r=at?0:t.p.cellLayout,u=0,s,h=t.p.scrollOffset,e,c=!1,l,f=0,a=0,o;$.each(t.p.colModel,function(){typeof this.hidden=="undefined"&&(this.hidden=!1);this.widthOrg=e=b(this.width,0);this.hidden===!1&&(n+=e+r,this.fixed?f+=e+r:u++,a++)});isNaN(t.p.width)?t.p.width=i.width=n:i.width=t.p.width;t.p.tblwidth=n;t.p.shrinkToFit===!1&&t.p.forceFit===!0&&(t.p.forceFit=!1);t.p.shrinkToFit===!0&&u>0&&(l=i.width-r*u-f,isNaN(t.p.height)||(l-=h,c=!0),n=0,$.each(t.p.colModel,function(i){this.hidden!==!1||this.fixed||(e=Math.round(l*this.width/(t.p.tblwidth-r*u-f)),this.width=e,n+=e,s=i)}),o=0,c?i.width-f-(n+r*u)!==h&&(o=i.width-f-(n+r*u)-h):c||Math.abs(i.width-f-(n+r*u))===1||(o=i.width-f-(n+r*u)),t.p.colModel[s].width+=o,t.p.tblwidth=n+o+r*u+f,t.p.tblwidth>t.p.width&&(t.p.colModel[s].width-=t.p.tblwidth-parseInt(t.p.width,10),t.p.tblwidth=t.p.width))},wi=function(n){for(var u=n,r=n,i=n+1;i<t.p.colModel.length;i++)if(t.p.colModel[i].hidden!==!0){r=i;break}return r-u},bi=function(n){var r,i={},u=at?0:t.p.cellLayout;for(i[0]=i[1]=i[2]=0,r=0;r<=n;r++)t.p.colModel[r].hidden===!1&&(i[0]+=t.p.colModel[r].width+u);return t.p.direction=="rtl"&&(i[0]=t.p.width-i[0]),i[0]=i[0]-t.grid.bDiv.scrollLeft,$(t.grid.cDiv).is(":visible")&&(i[1]+=$(t.grid.cDiv).height()+parseInt($(t.grid.cDiv).css("padding-top"),10)+parseInt($(t.grid.cDiv).css("padding-bottom"),10)),t.p.toolbar[0]===!0&&(t.p.toolbar[1]=="top"||t.p.toolbar[1]=="both")&&(i[1]+=$(t.grid.uDiv).height()+parseInt($(t.grid.uDiv).css("border-top-width"),10)+parseInt($(t.grid.uDiv).css("border-bottom-width"),10)),t.p.toppager&&(i[1]+=$(t.grid.topDiv).height()+parseInt($(t.grid.topDiv).css("border-bottom-width"),10)),i[2]+=$(t.grid.bDiv).height()+$(t.grid.hDiv).height(),i};for(this.p.id=this.id,$.inArray(t.p.multikey,["shiftKey","altKey","ctrlKey"])==-1&&(t.p.multikey=!1),t.p.keyIndex=!1,u=0;u<t.p.colModel.length;u++)t.p.colModel[u]=$.extend(!0,{},t.p.cmTemplate,t.p.colModel[u].template||{},t.p.colModel[u]),t.p.keyIndex===!1&&t.p.colModel[u].key===!0&&(t.p.keyIndex=u);if(t.p.sortorder=t.p.sortorder.toLowerCase(),t.p.grouping===!0&&(t.p.scroll=!1,t.p.rownumbers=!1,t.p.subGrid=!1,t.p.treeGrid=!1,t.p.gridview=!0),this.p.treeGrid===!0){try{$(this).jqGrid("setTreeGrid")}catch(ki){}t.p.datatype!="local"&&(t.p.localReader={id:"_id_"})}if(this.p.subGrid)try{$(t).jqGrid("setSubGrid")}catch(di){}this.p.multiselect&&(this.p.colNames.unshift("<input role='checkbox' id='cb_"+this.p.id+"' class='cbox' type='checkbox'/>"),this.p.colModel.unshift({name:"cb",width:at?t.p.multiselectWidth+t.p.cellLayout:t.p.multiselectWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,align:"center",fixed:!0}));this.p.rownumbers&&(this.p.colNames.unshift(""),this.p.colModel.unshift({name:"rn",width:t.p.rownumWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,align:"center",fixed:!0}));t.p.xmlReader=$.extend(!0,{root:"rows",row:"row",page:"rows>page",total:"rows>total",records:"rows>records",repeatitems:!0,cell:"cell",id:"[id]",userdata:"userdata",subgrid:{root:"rows",row:"row",repeatitems:!0,cell:"cell"}},t.p.xmlReader);t.p.jsonReader=$.extend(!0,{root:"rows",page:"page",total:"total",records:"records",repeatitems:!0,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:!0,cell:"cell"}},t.p.jsonReader);t.p.localReader=$.extend(!0,{root:"rows",page:"page",total:"total",records:"records",repeatitems:!1,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:!0,cell:"cell"}},t.p.localReader);t.p.scroll&&(t.p.pgbuttons=!1,t.p.pginput=!1,t.p.rowList=[]);t.p.data.length&&yt();var h="<thead><tr class='ui-jqgrid-labels' role='rowheader'>",fi,ei,et,nt,ot,o,f,oi,st,si="",hi="";if(t.p.shrinkToFit===!0&&t.p.forceFit===!0)for(u=t.p.colModel.length-1;u>=0;u--)if(!t.p.colModel[u].hidden){t.p.colModel[u].resizable=!1;break}for(t.p.viewsortcols[1]=="horizontal"&&(si=" ui-i-asc",hi=" ui-i-desc"),fi=w?"class='ui-th-div-ie'":"",st="<span class='s-ico' style='display:none'><span sort='asc' class='ui-grid-ico-sort ui-icon-asc"+si+" ui-state-disabled ui-icon ui-icon-triangle-1-n ui-sort-"+e+"'><\/span>",st+="<span sort='desc' class='ui-grid-ico-sort ui-icon-desc"+hi+" ui-state-disabled ui-icon ui-icon-triangle-1-s ui-sort-"+e+"'><\/span><\/span>",u=0;u<this.p.colNames.length;u++)ci=t.p.headertitles?' title="'+$.jgrid.stripHtml(t.p.colNames[u])+'"':"",h+="<th id='"+t.p.id+"_"+t.p.colModel[u].name+"' role='columnheader' class='ui-state-default ui-th-column ui-th-"+e+"'"+ci+">",ei=t.p.colModel[u].index||t.p.colModel[u].name,h+="<div id='jqgh_"+t.p.id+"_"+t.p.colModel[u].name+"' "+fi+">"+t.p.colNames[u],t.p.colModel[u].width=t.p.colModel[u].width?parseInt(t.p.colModel[u].width,10):150,typeof t.p.colModel[u].title!="boolean"&&(t.p.colModel[u].title=!0),ei==t.p.sortname&&(t.p.lastsort=u),h+=st+"<\/div><\/th>";if(h+="<\/tr><\/thead>",st=null,$(this).append(h),$("thead tr:first th",this).hover(function(){$(this).addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover")}),this.p.multiselect&&(ht=[],$("#cb_"+$.jgrid.jqID(t.p.id),this).bind("click",function(){t.p.selarrrow=[];this.checked?($(t.rows).each(function(n){n>0&&($(this).hasClass("subgrid")||$(this).hasClass("jqgroup")||$(this).hasClass("ui-state-disabled")||($("#jqg_"+$.jgrid.jqID(t.p.id)+"_"+$.jgrid.jqID(this.id)).attr("checked","checked"),$(this).addClass("ui-state-highlight").attr("aria-selected","true"),t.p.selarrrow.push(this.id),t.p.selrow=this.id))}),ct=!0,ht=[]):($(t.rows).each(function(n){n>0&&($(this).hasClass("subgrid")||$(this).hasClass("ui-state-disabled")||($("#jqg_"+$.jgrid.jqID(t.p.id)+"_"+$.jgrid.jqID(this.id)).removeAttr("checked"),$(this).removeClass("ui-state-highlight").attr("aria-selected","false"),ht.push(this.id)))}),t.p.selrow=null,ct=!1);$.isFunction(t.p.onSelectAll)&&t.p.onSelectAll.call(t,ct?t.p.selarrrow:ht,ct)})),t.p.autowidth===!0&&(wt=$(y).innerWidth(),t.p.width=wt>0?wt:"nw"),pi(),$(y).css("width",i.width+"px").append("<div class='ui-jqgrid-resize-mark' id='rs_m"+t.p.id+"'>&#160;<\/div>"),$(v).css("width",i.width+"px"),h=$("thead:first",t).get(0),tt="",t.p.footerrow&&(tt+="<table role='grid' style='width:"+t.p.tblwidth+"px' class='ui-jqgrid-ftable' cellspacing='0' cellpadding='0' border='0'><tbody><tr role='row' class='ui-widget-content footrow footrow-"+e+"'>"),bt=$("tr:first",h),it="<tr class='jqgfirstrow' role='row' style='height:auto'>",t.p.disableClick=!1,$("th",bt).each(function(n){var u,r;et=t.p.colModel[n].width;typeof t.p.colModel[n].resizable=="undefined"&&(t.p.colModel[n].resizable=!0);t.p.colModel[n].resizable?(nt=document.createElement("span"),$(nt).html("&#160;").addClass("ui-jqgrid-resize ui-jqgrid-resize-"+e),$.browser.opera||$(nt).css("cursor","col-resize"),$(this).addClass(t.p.resizeclass)):nt="";$(this).css("width",et+"px").prepend(nt);u="";t.p.colModel[n].hidden&&($(this).css("display","none"),u="display:none;");it+="<td role='gridcell' style='height:0px;width:"+et+"px;"+u+"'><\/td>";i.headers[n]={width:et,el:this};ot=t.p.colModel[n].sortable;typeof ot!="boolean"&&(t.p.colModel[n].sortable=!0,ot=!0);r=t.p.colModel[n].name;r=="cb"||r=="subgrid"||r=="rn"||t.p.viewsortcols[2]&&$("div",this).addClass("ui-jqgrid-sortable");ot&&(t.p.viewsortcols[0]?($("div span.s-ico",this).show(),n==t.p.lastsort&&$("div span.ui-icon-"+t.p.sortorder,this).removeClass("ui-state-disabled")):n==t.p.lastsort&&($("div span.s-ico",this).show(),$("div span.ui-icon-"+t.p.sortorder,this).removeClass("ui-state-disabled")));t.p.footerrow&&(tt+="<td role='gridcell' "+k(n,0,"",null,"",!1)+">&#160;<\/td>")}).mousedown(function(n){if($(n.target).closest("th>span.ui-jqgrid-resize").length==1){var r=$.jgrid.getCellIndex(this);return t.p.forceFit===!0&&(t.p.nv=wi(r)),i.dragStart(r,n,bi(r)),!1}}).click(function(n){var i,u,f,r,e;return t.p.disableClick?(t.p.disableClick=!1,!1):(i="th>div.ui-jqgrid-sortable",t.p.viewsortcols[2]||(i="th>div>span>span.ui-grid-ico-sort"),r=$(n.target).closest(i),r.length!=1)?void 0:(e=$.jgrid.getCellIndex(this),t.p.viewsortcols[2]||(u=!0,f=r.attr("sort")),ui($("div",this)[0].id,e,u,f),!1)}),t.p.sortable&&$.fn.sortable)try{$(t).jqGrid("sortableColumns",bt)}catch(gi){}t.p.footerrow&&(tt+="<\/tr><\/tbody><\/table>");it+="<\/tr>";oi=document.createElement("tbody");this.appendChild(oi);$(this).addClass("ui-jqgrid-btable").append(it);it=null;var li=$("<table class='ui-jqgrid-htable' style='width:"+t.p.tblwidth+"px' role='grid' aria-labelledby='gbox_"+this.id+"' cellspacing='0' cellpadding='0' border='0'><\/table>").append(h),s=t.p.caption&&t.p.hiddengrid===!0?!0:!1,p=$("<div class='ui-jqgrid-hbox"+(e=="rtl"?"-rtl":"")+"'><\/div>");h=null;i.hDiv=document.createElement("div");$(i.hDiv).css({width:i.width+"px"}).addClass("ui-state-default ui-jqgrid-hdiv").append(p);$(p).append(li);li=null;s&&$(i.hDiv).hide();t.p.pager&&(typeof t.p.pager=="string"?t.p.pager.substr(0,1)!="#"&&(t.p.pager="#"+t.p.pager):t.p.pager="#"+$(t.p.pager).attr("id"),$(t.p.pager).css({width:i.width+"px"}).appendTo(y).addClass("ui-state-default ui-jqgrid-pager ui-corner-bottom"),s&&$(t.p.pager).hide(),ri(t.p.pager,""));t.p.cellEdit===!1&&t.p.hoverrows===!0&&$(t).bind("mouseover",function(n){f=$(n.target).closest("tr.jqgrow");$(f).attr("class")!=="subgrid"&&$(f).addClass("ui-state-hover")}).bind("mouseout",function(n){f=$(n.target).closest("tr.jqgrow");$(f).removeClass("ui-state-hover")});$(t).before(i.hDiv).click(function(n){if(o=n.target,f=$(o,t.rows).closest("tr.jqgrow"),$(f).length===0||f[0].className.indexOf("ui-state-disabled")>-1)return this;var i=$(o).hasClass("cbox"),r=!0;if($.isFunction(t.p.beforeSelectRow)&&(r=t.p.beforeSelectRow.call(t,f[0].id,n)),o.tagName=="A"||(o.tagName=="INPUT"||o.tagName=="TEXTAREA"||o.tagName=="OPTION"||o.tagName=="SELECT")&&!i)return this;if(r===!0){if(t.p.cellEdit===!0)if(t.p.multiselect&&i)$(t).jqGrid("setSelection",f[0].id,!0);else{l=f[0].rowIndex;a=$.jgrid.getCellIndex(o);try{$(t).jqGrid("editCell",l,a,!0)}catch(u){}}else t.p.multikey?n[t.p.multikey]?$(t).jqGrid("setSelection",f[0].id,!0):t.p.multiselect&&i&&(i=$("#jqg_"+$.jgrid.jqID(t.p.id)+"_"+f[0].id).attr("checked"),$("#jqg_"+$.jgrid.jqID(t.p.id)+"_"+f[0].id).attr("checked",!i)):t.p.multiselect&&t.p.multiboxonly?i?$(t).jqGrid("setSelection",f[0].id,!0):($(t.p.selarrrow).each(function(n,i){var r=t.rows.namedItem(i);$(r).removeClass("ui-state-highlight");$("#jqg_"+$.jgrid.jqID(t.p.id)+"_"+$.jgrid.jqID(i)).attr("checked",!1)}),t.p.selarrrow=[],$("#cb_"+$.jgrid.jqID(t.p.id),t.grid.hDiv).attr("checked",!1),$(t).jqGrid("setSelection",f[0].id,!0)):$(t).jqGrid("setSelection",f[0].id,!0);$.isFunction(t.p.onCellSelect)&&(l=f[0].id,a=$.jgrid.getCellIndex(o),t.p.onCellSelect.call(t,l,a,$(o).html(),n))}return this}).bind("reloadGrid",function(n,i){if(t.p.treeGrid===!0&&(t.p.datatype=t.p.treedatatype),i&&i.current&&t.grid.selectionPreserver(t),t.p.datatype=="local"?($(t).jqGrid("resetSelection"),t.p.data.length&&yt()):t.p.treeGrid||(t.p.selrow=null,t.p.multiselect&&(t.p.selarrrow=[],$("#cb_"+$.jgrid.jqID(t.p.id),t.grid.hDiv).attr("checked",!1)),t.p.savedRow=[]),t.p.scroll&&d(t.grid.bDiv,!0,!1),i&&i.page){var r=i.page;r>t.p.lastpage&&(r=t.p.lastpage);r<1&&(r=1);t.p.page=r;t.grid.bDiv.scrollTop=t.grid.prevRowHeight?(r-1)*t.grid.prevRowHeight*t.p.rowNum:0}return t.grid.prevRowHeight&&t.p.scroll?(delete t.p.lastpage,t.grid.populateVisible()):t.grid.populate(),!1});$.isFunction(this.p.ondblClickRow)&&$(this).dblclick(function(n){return(o=n.target,f=$(o,t.rows).closest("tr.jqgrow"),$(f).length===0)?!1:(l=f[0].rowIndex,a=$.jgrid.getCellIndex(o),t.p.ondblClickRow.call(t,$(f).attr("id"),l,a,n),!1)});$.isFunction(this.p.onRightClickRow)&&$(this).bind("contextmenu",function(n){return(o=n.target,f=$(o,t.rows).closest("tr.jqgrow"),$(f).length===0)?!1:(t.p.multiselect||$(t).jqGrid("setSelection",f[0].id,!0),l=f[0].rowIndex,a=$.jgrid.getCellIndex(o),t.p.onRightClickRow.call(t,$(f).attr("id"),l,a,n),!1)});i.bDiv=document.createElement("div");w&&String(t.p.height).toLowerCase()==="auto"&&(t.p.height="100%");$(i.bDiv).append($('<div style="position:relative;'+(w&&$.browser.version<8?"height:0.01%;":"")+'"><\/div>').append("<div><\/div>").append(this)).addClass("ui-jqgrid-bdiv").css({height:t.p.height+(isNaN(t.p.height)?"":"px"),width:i.width+"px"}).scroll(i.scrollGrid);$("table:first",i.bDiv).css({width:t.p.tblwidth+"px"});w?($("tbody",this).size()==2&&$("tbody:gt(0)",this).remove(),t.p.multikey&&$(i.bDiv).bind("selectstart",function(){return!1})):t.p.multikey&&$(i.bDiv).bind("mousedown",function(){return!1});s&&$(i.bDiv).hide();i.cDiv=document.createElement("div");lt=t.p.hidegrid===!0?$("<a role='link' href='javascript:void(0)'/>").addClass("ui-jqgrid-titlebar-close HeaderButton").hover(function(){lt.addClass("ui-state-hover")},function(){lt.removeClass("ui-state-hover")}).append("<span class='ui-icon ui-icon-circle-triangle-n'><\/span>").css(e=="rtl"?"left":"right","0px"):"";$(i.cDiv).append(lt).append("<span class='ui-jqgrid-title"+(e=="rtl"?"-rtl":"")+"'>"+t.p.caption+"<\/span>").addClass("ui-jqgrid-titlebar ui-widget-header ui-corner-top ui-helper-clearfix");$(i.cDiv).insertBefore(i.hDiv);t.p.toolbar[0]&&(i.uDiv=document.createElement("div"),t.p.toolbar[1]=="top"?$(i.uDiv).insertBefore(i.hDiv):t.p.toolbar[1]=="bottom"&&$(i.uDiv).insertAfter(i.hDiv),t.p.toolbar[1]=="both"?(i.ubDiv=document.createElement("div"),$(i.uDiv).insertBefore(i.hDiv).addClass("ui-userdata ui-state-default").attr("id","t_"+this.id),$(i.ubDiv).insertAfter(i.hDiv).addClass("ui-userdata ui-state-default").attr("id","tb_"+this.id),s&&$(i.ubDiv).hide()):$(i.uDiv).width(i.width).addClass("ui-userdata ui-state-default").attr("id","t_"+this.id),s&&$(i.uDiv).hide());t.p.toppager&&(t.p.toppager=$.jgrid.jqID(t.p.id)+"_toppager",i.topDiv=$("<div id='"+t.p.toppager+"'><\/div>")[0],t.p.toppager="#"+t.p.toppager,$(i.topDiv).insertBefore(i.hDiv).addClass("ui-state-default ui-jqgrid-toppager").width(i.width),ri(t.p.toppager,"_t"));t.p.footerrow&&(i.sDiv=$("<div class='ui-jqgrid-sdiv'><\/div>")[0],p=$("<div class='ui-jqgrid-hbox"+(e=="rtl"?"-rtl":"")+"'><\/div>"),$(i.sDiv).append(p).insertAfter(i.hDiv).width(i.width),$(p).append(tt),i.footers=$(".ui-jqgrid-ftable",i.sDiv)[0].rows[0].cells,t.p.rownumbers&&(i.footers[0].className="ui-state-default jqgrid-rownum"),s&&$(i.sDiv).hide());p=null;t.p.caption?(ai=t.p.datatype,t.p.hidegrid===!0&&($(".ui-jqgrid-titlebar-close",i.cDiv).click(function(n){var f=$.isFunction(t.p.onHeaderClick),r=".ui-jqgrid-bdiv, .ui-jqgrid-hdiv, .ui-jqgrid-pager, .ui-jqgrid-sdiv",u,e=this;return t.p.toolbar[0]===!0&&(t.p.toolbar[1]=="both"&&(r+=", #"+$(i.ubDiv).attr("id")),r+=", #"+$(i.uDiv).attr("id")),u=$(r,"#gview_"+$.jgrid.jqID(t.p.id)).length,t.p.gridstate=="visible"?$(r,"#gbox_"+$.jgrid.jqID(t.p.id)).slideUp("fast",function(){u--;u===0&&($("span",e).removeClass("ui-icon-circle-triangle-n").addClass("ui-icon-circle-triangle-s"),t.p.gridstate="hidden",$("#gbox_"+$.jgrid.jqID(t.p.id)).hasClass("ui-resizable")&&$(".ui-resizable-handle","#gbox_"+$.jgrid.jqID(t.p.id)).hide(),f&&(s||t.p.onHeaderClick.call(t,t.p.gridstate,n)))}):t.p.gridstate=="hidden"&&$(r,"#gbox_"+$.jgrid.jqID(t.p.id)).slideDown("fast",function(){u--;u===0&&($("span",e).removeClass("ui-icon-circle-triangle-s").addClass("ui-icon-circle-triangle-n"),s&&(t.p.datatype=ai,c(),s=!1),t.p.gridstate="visible",$("#gbox_"+$.jgrid.jqID(t.p.id)).hasClass("ui-resizable")&&$(".ui-resizable-handle","#gbox_"+$.jgrid.jqID(t.p.id)).show(),f&&(s||t.p.onHeaderClick.call(t,t.p.gridstate,n)))}),!1}),s&&(t.p.datatype="local",$(".ui-jqgrid-titlebar-close",i.cDiv).trigger("click")))):$(i.cDiv).hide();$(i.hDiv).after(i.bDiv).mousemove(function(n){if(i.resizing)return i.dragMove(n),!1});$(".ui-jqgrid-labels",i.hDiv).bind("selectstart",function(){return!1});$(document).mouseup(function(){return i.resizing?(i.dragEnd(),!1):!0});t.formatCol=k;t.sortData=ui;t.updatepager=yi;t.refreshIndex=yt;t.formatter=function(n,t,i,r,u){return gt(n,t,i,r,u)};$.extend(i,{populate:c,emptyRows:d});this.grid=i;t.addXmlData=function(n){pt(n,t.grid.bDiv)};t.addJSONData=function(n){ut(n,t.grid.bDiv)};this.grid.cols=this.rows[0].cells;c();t.p.hiddengrid=!1;$(window).unload(function(){t=null})}})};$.jgrid.extend({getGridParam:function(n){var t=this[0];if(t&&t.grid)return n?typeof t.p[n]!="undefined"?t.p[n]:null:t.p},setGridParam:function(n){return this.each(function(){this.grid&&typeof n=="object"&&$.extend(!0,this.p,n)})},getDataIDs:function(){var i=[],n=0,t,r=0;return this.each(function(){if(t=this.rows.length,t&&t>0)while(n<t)$(this.rows[n]).hasClass("jqgrow")&&(i[r]=this.rows[n].id,r++),n++}),i},setSelection:function(n,t){return this.each(function(){function s(n){var u=$(i.grid.bDiv)[0].clientHeight,t=$(i.grid.bDiv)[0].scrollTop,r=i.rows[n].offsetTop,f=i.rows[n].clientHeight;r+f>=u+t?$(i.grid.bDiv)[0].scrollTop=r-(u+t)+f+t:r<u+t&&r<t&&($(i.grid.bDiv)[0].scrollTop=r)}var i=this,u,r,f,e,o;n!==undefined&&((t=t===!1?!1:!0,r=i.rows.namedItem(n+""),!r||r.className.indexOf("ui-state-disabled")>-1)||(i.p.scrollrows===!0&&(f=i.rows.namedItem(n).rowIndex,f>=0&&s(f)),i.p.multiselect?(i.p.selrow=r.id,e=$.inArray(i.p.selrow,i.p.selarrrow),e===-1?(r.className!=="ui-subgrid"&&$(r).addClass("ui-state-highlight").attr("aria-selected","true"),u=!0,$("#jqg_"+$.jgrid.jqID(i.p.id)+"_"+$.jgrid.jqID(i.p.selrow)).attr("checked",u),i.p.selarrrow.push(i.p.selrow)):(r.className!=="ui-subgrid"&&$(r).removeClass("ui-state-highlight").attr("aria-selected","false"),u=!1,$("#jqg_"+$.jgrid.jqID(i.p.id)+"_"+$.jgrid.jqID(i.p.selrow)).attr("checked",u),i.p.selarrrow.splice(e,1),o=i.p.selarrrow[0],i.p.selrow=o===undefined?null:o),i.p.onSelectRow&&t&&i.p.onSelectRow.call(i,r.id,u)):r.className!=="ui-subgrid"&&(i.p.selrow!=r.id?($(i.rows.namedItem(i.p.selrow)).removeClass("ui-state-highlight").attr({"aria-selected":"false",tabindex:"-1"}),$(r).addClass("ui-state-highlight").attr({"aria-selected":!0,tabindex:"0"}),u=!0):u=!1,i.p.selrow=r.id,i.p.onSelectRow&&t&&i.p.onSelectRow.call(i,r.id,u))))})},resetSelection:function(n){return this.each(function(){var t=this,r,i;typeof n!="undefined"?(i=n===t.p.selrow?t.p.selrow:n,$("#"+$.jgrid.jqID(t.p.id)+" tbody:first tr#"+$.jgrid.jqID(i)).removeClass("ui-state-highlight").attr("aria-selected","false"),t.p.multiselect&&($("#jqg_"+$.jgrid.jqID(t.p.id)+"_"+$.jgrid.jqID(i)).attr("checked",!1),$("#cb_"+$.jgrid.jqID(t.p.id)).attr("checked",!1)),i=null):t.p.multiselect?($(t.p.selarrrow).each(function(n,i){r=t.rows.namedItem(i);$(r).removeClass("ui-state-highlight").attr("aria-selected","false");$("#jqg_"+$.jgrid.jqID(t.p.id)+"_"+$.jgrid.jqID(i)).attr("checked",!1)}),$("#cb_"+$.jgrid.jqID(t.p.id)).attr("checked",!1),t.p.selarrrow=[]):t.p.selrow&&($("#"+$.jgrid.jqID(t.p.id)+" tbody:first tr#"+$.jgrid.jqID(t.p.selrow)).removeClass("ui-state-highlight").attr("aria-selected","false"),t.p.selrow=null);t.p.savedRow=[]})},getRowData:function(n){var t={},i,r=!1,u,f=0;return this.each(function(){var o=this,e,s;if(typeof n=="undefined")r=!0,i=[],u=o.rows.length;else{if(s=o.rows.namedItem(n),!s)return t;u=2}while(f<u)r&&(s=o.rows[f]),$(s).hasClass("jqgrow")&&($("td",s).each(function(n){if(e=o.p.colModel[n].name,e!=="cb"&&e!=="subgrid"&&e!=="rn")if(o.p.treeGrid===!0&&e==o.p.ExpandColumn)t[e]=$.jgrid.htmlDecode($("span:first",this).html());else try{t[e]=$.unformat(this,{rowId:s.id,colModel:o.p.colModel[n]},n)}catch(i){t[e]=$.jgrid.htmlDecode($(this).html())}}),r&&(i.push(t),t={})),f++}),i?i:t},delRowData:function(n){var i=!1,t,r,u;return this.each(function(){var f=this,e,o;if(t=f.rows.namedItem(n),t)u=t.rowIndex,$(t).remove(),f.p.records--,f.p.reccount--,f.updatepager(!0,!1),i=!0,f.p.multiselect&&(r=$.inArray(n,f.p.selarrrow),r!=-1&&f.p.selarrrow.splice(r,1)),n==f.p.selrow&&(f.p.selrow=null);else return!1;f.p.datatype=="local"&&(e=f.p._index[n],typeof e!="undefined"&&(f.p.data.splice(e,1),f.refreshIndex()));f.p.altRows===!0&&i&&(o=f.p.altclass,$(f.rows).each(function(n){n%2==1?$(this).addClass(o):$(this).removeClass(o)}))}),i},setRowData:function(n,t,i){var r,u=!0,f;return this.each(function(){var c,l;if(!this.grid)return!1;var e=this,h,o,a=typeof i,s={};if(o=e.rows.namedItem(n),!o)return!1;if(t)try{if($(this.p.colModel).each(function(i){r=this.name;t[r]!==undefined&&(s[r]=this.formatter&&typeof this.formatter=="string"&&this.formatter=="date"?$.unformat.date(t[r],this):t[r],h=e.formatter(n,t[r],i,t,"edit"),f=this.title?{title:$.jgrid.stripHtml(h)}:{},e.p.treeGrid===!0&&r==e.p.ExpandColumn?$("td:eq("+i+") > span:first",o).html(h).attr(f):$("td:eq("+i+")",o).html(h).attr(f))}),e.p.datatype=="local"){if(c=e.p._index[n],e.p.treeGrid)for(l in e.p.treeReader)s.hasOwnProperty(e.p.treeReader[l])&&delete s[e.p.treeReader[l]];typeof c!="undefined"&&(e.p.data[c]=$.extend(!0,e.p.data[c],s));s=null}}catch(v){u=!1}u&&(a==="string"?$(o).addClass(i):a==="object"&&$(o).css(i))}),u},addRowData:function(n,t,i,r){i||(i="last");var k=!1,s,f,h,b,o,u,c,v,l="",y,p,w,e,a;return t&&($.isArray(t)?(y=!0,i="last",p=n):(t=[t],y=!1),this.each(function(){var d=this,it=t.length;o=d.p.rownumbers===!0?1:0;h=d.p.multiselect===!0?1:0;b=d.p.subGrid===!0?1:0;y||(typeof n!="undefined"?n=n+"":(n=$.jgrid.randId(),d.p.keyIndex!==!1&&(p=d.p.colModel[d.p.keyIndex+h+b+o].name,typeof t[0][p]!="undefined"&&(n=t[0][p]))));w=d.p.altclass;for(var nt=0,tt="",g={},rt=$.isFunction(d.p.afterInsertRow)?!0:!1;nt<it;){if(e=t[nt],f="",y){try{n=e[p]}catch(ut){n=$.jgrid.randId()}tt=d.p.altRows===!0?(d.rows.length-1)%2==0?w:"":""}for(o&&(l=d.formatCol(0,1,"",null,n,!0),f+='<td role="gridcell" aria-describedby="'+d.p.id+'_rn" class="ui-state-default jqgrid-rownum" '+l+">0<\/td>"),h&&(v='<input role="checkbox" type="checkbox" id="jqg_'+d.p.id+"_"+n+'" class="cbox"/>',l=d.formatCol(o,1,"",null,n,!0),f+='<td role="gridcell" aria-describedby="'+d.p.id+'_cb" '+l+">"+v+"<\/td>"),b&&(f+=$(d).jqGrid("addSubGridCell",h+o,1)),c=h+b+o;c<d.p.colModel.length;c++)a=d.p.colModel[c],s=a.name,g[s]=a.formatter&&typeof a.formatter=="string"&&a.formatter=="date"?$.unformat.date(e[s],a):e[s],v=d.formatter(n,$.jgrid.getAccessor(e,s),c,e,"edit"),l=d.formatCol(c,1,v,n,e,!0),f+='<td role="gridcell" aria-describedby="'+d.p.id+"_"+s+'" '+l+">"+v+"<\/td>";if(f='<tr id="'+n+'" role="row" tabindex="-1" class="ui-widget-content jqgrow ui-row-'+d.p.direction+" "+tt+'">'+f+"<\/tr>",d.rows.length===0)$("table:first",d.grid.bDiv).append(f);else switch(i){case"last":$(d.rows[d.rows.length-1]).after(f);u=d.rows.length-1;break;case"first":$(d.rows[0]).after(f);u=1;break;case"after":u=d.rows.namedItem(r);u&&($(d.rows[u.rowIndex+1]).hasClass("ui-subgrid")?$(d.rows[u.rowIndex+1]).after(f):$(u).after(f));u++;break;case"before":u=d.rows.namedItem(r);u&&($(u).before(f),u=u.rowIndex);u--}d.p.subGrid===!0&&$(d).jqGrid("addSubGrid",h+o,u);d.p.records++;d.p.reccount++;rt&&d.p.afterInsertRow.call(d,n,e,e);nt++;d.p.datatype=="local"&&(g[d.p.localReader.id]=n,d.p._index[n]=d.p.data.length,d.p.data.push(g),g={})}d.p.altRows!==!0||y||(i=="last"?(d.rows.length-1)%2==1&&$(d.rows[d.rows.length-1]).addClass(w):$(d.rows).each(function(n){n%2==1?$(this).addClass(w):$(this).removeClass(w)}));d.updatepager(!0,!0);k=!0})),k},footerData:function(n,t,i){function o(n){for(var t in n)if(n.hasOwnProperty(t))return!1;return!0}var r,u=!1,f={},e;return typeof n=="undefined"&&(n="get"),typeof i!="boolean"&&(i=!0),n=n.toLowerCase(),this.each(function(){var s=this,h;if(!s.grid||!s.p.footerrow||n=="set"&&o(t))return!1;u=!0;$(this.p.colModel).each(function(o){r=this.name;n=="set"?t[r]!==undefined&&(h=i?s.formatter("",t[r],o,t,"edit"):t[r],e=this.title?{title:$.jgrid.stripHtml(h)}:{},$("tr.footrow td:eq("+o+")",s.grid.sDiv).html(h).attr(e),u=!0):n=="get"&&(f[r]=$("tr.footrow td:eq("+o+")",s.grid.sDiv).html())})}),n=="get"?f:u},showHideCol:function(n,t){return this.each(function(){var i=this,f=!1,e=$.browser.webkit||$.browser.safari?0:i.p.cellLayout,r,u;i.grid&&(typeof n=="string"&&(n=[n]),t=t!="none"?"":"none",u=t===""?!0:!1,$(this.p.colModel).each(function(o){$.inArray(this.name,n)!==-1&&this.hidden===u&&($("tr",i.grid.hDiv).each(function(){$(this).children("th:eq("+o+")").css("display",t)}),$(i.rows).each(function(){$(this).children("td:eq("+o+")").css("display",t)}),i.p.footerrow&&$("tr.footrow td:eq("+o+")",i.grid.sDiv).css("display",t),r=this.widthOrg?this.widthOrg:parseInt(this.width,10),t==="none"?i.p.tblwidth-=r+e:i.p.tblwidth+=r+e,this.hidden=!u,f=!0)}),f===!0&&(i.p.shrinkToFit===!1?$(i).jqGrid("setGridWidth",i.grid.width):i.grid.width!==i.p.tblwidth&&$(i).jqGrid("setGridWidth",i.p.tblwidth)))})},hideCol:function(n){return this.each(function(){$(this).jqGrid("showHideCol",n,"none")})},showCol:function(n){return this.each(function(){$(this).jqGrid("showHideCol",n,"")})},remapColumns:function(n,t,i){function u(t){var i;i=t.length?$.makeArray(t):$.extend({},t);$.each(n,function(n){t[n]=i[this]})}function f(t,i){$(">tr"+(i||""),t).each(function(){var t=this,i=$.makeArray(t.cells);$.each(n,function(){var n=i[this];n&&t.appendChild(n)})})}var r=this.get(0);u(r.p.colModel);u(r.p.colNames);u(r.grid.headers);f($("thead:first",r.grid.hDiv),i&&":not(.ui-jqgrid-labels)");t&&f($("#"+$.jgrid.jqID(r.p.id)+" tbody:first"),".jqgfirstrow, tr.jqgrow, tr.jqfoot");r.p.footerrow&&f($("tbody:first",r.grid.sDiv));r.p.remapColumns&&(r.p.remapColumns.length?u(r.p.remapColumns):r.p.remapColumns=$.makeArray(n));r.p.lastsort=$.inArray(r.p.lastsort,n);r.p.treeGrid&&(r.p.expColInd=$.inArray(r.p.expColInd,n))},setGridWidth:function(n,t){return this.each(function(){var a,y;if(this.grid){var i=this,r,u=0,f=$.browser.webkit||$.browser.safari?0:i.p.cellLayout,e,o=0,v=!1,c=i.p.scrollOffset,l,s=0,p=0,h;if(typeof t!="boolean"&&(t=i.p.shrinkToFit),!isNaN(n)){if(n=parseInt(n,10),i.grid.width=i.p.width=n,$("#gbox_"+$.jgrid.jqID(i.p.id)).css("width",n+"px"),$("#gview_"+$.jgrid.jqID(i.p.id)).css("width",n+"px"),$(i.grid.bDiv).css("width",n+"px"),$(i.grid.hDiv).css("width",n+"px"),i.p.pager&&$(i.p.pager).css("width",n+"px"),i.p.toppager&&$(i.p.toppager).css("width",n+"px"),i.p.toolbar[0]===!0&&($(i.grid.uDiv).css("width",n+"px"),i.p.toolbar[1]=="both"&&$(i.grid.ubDiv).css("width",n+"px")),i.p.footerrow&&$(i.grid.sDiv).css("width",n+"px"),t===!1&&i.p.forceFit===!0&&(i.p.forceFit=!1),t===!0){if($.each(i.p.colModel,function(){this.hidden===!1&&(r=this.widthOrg?this.widthOrg:parseInt(this.width,10),u+=r+f,this.fixed?s+=r+f:o++,p++)}),o===0)return;i.p.tblwidth=u;l=n-f*o-s;isNaN(i.p.height)||($(i.grid.bDiv)[0].clientHeight<$(i.grid.bDiv)[0].scrollHeight||i.rows.length===1)&&(v=!0,l-=c);u=0;a=i.grid.cols.length>0;$.each(i.p.colModel,function(n){if(this.hidden===!1&&!this.fixed){if(r=this.widthOrg?this.widthOrg:parseInt(this.width,10),r=Math.round(l*r/(i.p.tblwidth-f*o-s)),r<0)return;this.width=r;u+=r;i.grid.headers[n].width=r;i.grid.headers[n].el.style.width=r+"px";i.p.footerrow&&(i.grid.footers[n].style.width=r+"px");a&&(i.grid.cols[n].style.width=r+"px");e=n}});h=0;v?n-s-(u+f*o)!==c&&(h=n-s-(u+f*o)-c):Math.abs(n-s-(u+f*o))!==1&&(h=n-s-(u+f*o));i.p.colModel[e].width+=h;i.p.tblwidth=u+h+f*o+s;i.p.tblwidth>n?(y=i.p.tblwidth-parseInt(n,10),i.p.tblwidth=n,r=i.p.colModel[e].width=i.p.colModel[e].width-y):r=i.p.colModel[e].width;i.grid.headers[e].width=r;i.grid.headers[e].el.style.width=r+"px";a&&(i.grid.cols[e].style.width=r+"px");i.p.footerrow&&(i.grid.footers[e].style.width=r+"px")}i.p.tblwidth&&($("table:first",i.grid.bDiv).css("width",i.p.tblwidth+"px"),$("table:first",i.grid.hDiv).css("width",i.p.tblwidth+"px"),i.grid.hDiv.scrollLeft=i.grid.bDiv.scrollLeft,i.p.footerrow&&$("table:first",i.grid.sDiv).css("width",i.p.tblwidth+"px"))}}})},setGridHeight:function(n){return this.each(function(){var t=this;t.grid&&($(t.grid.bDiv).css({height:n+(isNaN(n)?"":"px")}),t.p.height=n,t.p.scroll&&t.grid.populateVisible())})},setCaption:function(n){return this.each(function(){this.p.caption=n;$("span.ui-jqgrid-title",this.grid.cDiv).html(n);$(this.grid.cDiv).show()})},setLabel:function(n,t,i,r){return this.each(function(){var f=this,e=-1,u,o;if(f.grid){if(typeof n!="undefined")$(f.p.colModel).each(function(t){if(this.name==n)return e=t,!1});else return;e>=0&&(u=$("tr.ui-jqgrid-labels th:eq("+e+")",f.grid.hDiv),t&&(o=$(".s-ico",u),$("[id^=jqgh_]",u).empty().html(t).append(o),f.p.colNames[e]=t),i&&(typeof i=="string"?$(u).addClass(i):$(u).css(i)),typeof r=="object"&&$(u).attr(r))}})},setCell:function(n,t,i,r,u,f){return this.each(function(){var e=this,o=-1,c,a,l,s,h,v;e.grid&&(isNaN(t)?$(e.p.colModel).each(function(n){if(this.name==t)return o=n,!1}):o=parseInt(t,10),o>=0&&(l=e.rows.namedItem(n),l&&(s=$("td:eq("+o+")",l),(i!==""||f===!0)&&(c=e.formatter(n,i,o,l,"edit"),a=e.p.colModel[o].title?{title:$.jgrid.stripHtml(c)}:{},e.p.treeGrid&&$(".tree-wrap",$(s)).length>0?$("span",$(s)).html(c).attr(a):$(s).html(c).attr(a),e.p.datatype=="local"&&(h=e.p.colModel[o],i=h.formatter&&typeof h.formatter=="string"&&h.formatter=="date"?$.unformat.date(i,h):i,v=e.p._index[n],typeof v!="undefined"&&(e.p.data[v][h.name]=i))),typeof r=="string"?$(s).addClass(r):r&&$(s).css(r),typeof u=="object"&&$(s).attr(u))))})},getCell:function(n,t){var i=!1;return this.each(function(){var f=this,r=-1,u;if(f.grid&&(isNaN(t)?$(f.p.colModel).each(function(n){if(this.name===t)return r=n,!1}):r=parseInt(t,10),r>=0&&(u=f.rows.namedItem(n),u)))try{i=$.unformat($("td:eq("+r+")",u),{rowId:u.id,colModel:f.p.colModel[r]},r)}catch(e){i=$.jgrid.htmlDecode($("td:eq("+r+")",u).html())}}),i},getCol:function(n,t,i){var r=[],u,o=0,f=0,s=0,e;return t=typeof t!="boolean"?!1:t,typeof i=="undefined"&&(i=!1),this.each(function(){var h=this,l=-1,a,c;if(h.grid&&(isNaN(n)?$(h.p.colModel).each(function(t){if(this.name===n)return l=t,!1}):l=parseInt(n,10),l>=0&&(a=h.rows.length,c=0,a&&a>0))){while(c<a){if($(h.rows[c]).hasClass("jqgrow")){try{u=$.unformat($(h.rows[c].cells[l]),{rowId:h.rows[c].id,colModel:h.p.colModel[l]},l)}catch(v){u=$.jgrid.htmlDecode(h.rows[c].cells[l].innerHTML)}i?(e=parseFloat(u),o+=e,f=Math.min(f,e),s=Math.max(f,e)):t?r.push({id:h.rows[c].id,value:u}):r.push(u)}c++}if(i)switch(i.toLowerCase()){case"sum":r=o;break;case"avg":r=o/a;break;case"count":r=a;break;case"min":r=f;break;case"max":r=s}}}),r},clearGridData:function(n){return this.each(function(){var t=this,i;t.grid&&(typeof n!="boolean"&&(n=!1),t.p.deepempty?$("#"+$.jgrid.jqID(t.p.id)+" tbody:first tr:gt(0)").remove():(i=$("#"+$.jgrid.jqID(t.p.id)+" tbody:first tr:first")[0],$("#"+$.jgrid.jqID(t.p.id)+" tbody:first").empty().append(i)),t.p.footerrow&&n&&$(".ui-jqgrid-ftable td",t.grid.sDiv).html("&#160;"),t.p.selrow=null,t.p.selarrrow=[],t.p.savedRow=[],t.p.records=0,t.p.page=1,t.p.lastpage=0,t.p.reccount=0,t.p.data=[],t.p._index={},t.updatepager(!0,!1))})},getInd:function(n,t){var r=!1,i;return this.each(function(){i=this.rows.namedItem(n);i&&(r=t===!0?i:i.rowIndex)}),r},bindKeys:function(n){var t=$.extend({onEnter:null,onSpace:null,onLeftKey:null,onRightKey:null,scrollingRows:!0},n||{});return this.each(function(){var n=this;$("body").is("[role]")||$("body").attr("role","application");n.p.scrollrows=t.scrollingRows;$(n).keydown(function(i){var f=$(n).find("tr[tabindex=0]")[0],u,r,e,o=n.p.treeReader.expanded_field;if(f)if(e=n.p._index[f.id],i.keyCode===37||i.keyCode===38||i.keyCode===39||i.keyCode===40){if(i.keyCode===38){if(r=f.previousSibling,u="",r)if($(r).is(":hidden")){while(r)if(r=r.previousSibling,!$(r).is(":hidden")&&$(r).hasClass("jqgrow")){u=r.id;break}}else u=r.id;$(n).jqGrid("setSelection",u)}if(i.keyCode===40){if(r=f.nextSibling,u="",r)if($(r).is(":hidden")){while(r)if(r=r.nextSibling,!$(r).is(":hidden")&&$(r).hasClass("jqgrow")){u=r.id;break}}else u=r.id;$(n).jqGrid("setSelection",u)}i.keyCode===37&&(n.p.treeGrid&&n.p.data[e][o]&&$(f).find("div.treeclick").trigger("click"),$.isFunction(t.onLeftKey)&&t.onLeftKey.call(n,n.p.selrow));i.keyCode===39&&(n.p.treeGrid&&!n.p.data[e][o]&&$(f).find("div.treeclick").trigger("click"),$.isFunction(t.onRightKey)&&t.onRightKey.call(n,n.p.selrow))}else i.keyCode===13?$.isFunction(t.onEnter)&&t.onEnter.call(n,n.p.selrow):i.keyCode===32&&$.isFunction(t.onSpace)&&t.onSpace.call(n,n.p.selrow)})})},unbindKeys:function(){return this.each(function(){var n=this;$(n).unbind("keydown")})},getLocalRow:function(n){var i=!1,t;return this.each(function(){typeof n!="undefined"&&(t=this.p._index[n],t>=0&&(i=this.p.data[t]))}),i}})})(jQuery),function(n){n.jgrid.extend({getColProp:function(n){var r={},u=this[0],i,t;if(!u.grid)return!1;for(i=u.p.colModel,t=0;t<i.length;t++)if(i[t].name==n){r=i[t];break}return r},setColProp:function(t,i){return this.each(function(){var u,r;if(this.grid&&i)for(u=this.p.colModel,r=0;r<u.length;r++)if(u[r].name==t){n.extend(this.p.colModel[r],i);break}})},sortGrid:function(n,t,i){return this.each(function(){var r=this,f=-1,u,e;if(r.grid){for(n||(n=r.p.sortname),u=0;u<r.p.colModel.length;u++)if(r.p.colModel[u].index==n||r.p.colModel[u].name==n){f=u;break}f!=-1&&(e=r.p.colModel[f].sortable,typeof e!="boolean"&&(e=!0),typeof t!="boolean"&&(t=!1),e&&r.sortData("jqgh_"+r.p.id+"_"+n,f,t,i))}})},GridDestroy:function(){return this.each(function(){if(this.grid){this.p.pager&&n(this.p.pager).remove();var t=this.id;try{n("#gbox_"+t).remove()}catch(i){}}})},GridUnload:function(){return this.each(function(){var r,t,i;this.grid&&(r={id:n(this).attr("id"),cl:n(this).attr("class")},this.p.pager&&n(this.p.pager).empty().removeClass("ui-state-default ui-jqgrid-pager corner-bottom"),t=document.createElement("table"),n(t).attr({id:r.id}),t.className=r.cl,i=this.id,n(t).removeClass("ui-jqgrid-btable"),n(this.p.pager).parents("#gbox_"+i).length===1?(n(t).insertBefore("#gbox_"+i).show(),n(this.p.pager).insertBefore("#gbox_"+i)):n(t).insertBefore("#gbox_"+i).show(),n("#gbox_"+i).remove())})},setGridState:function(t){return this.each(function(){if(this.grid){var i=this;t=="hidden"?(n(".ui-jqgrid-bdiv, .ui-jqgrid-hdiv","#gview_"+i.p.id).slideUp("fast"),i.p.pager&&n(i.p.pager).slideUp("fast"),i.p.toppager&&n(i.p.toppager).slideUp("fast"),i.p.toolbar[0]===!0&&(i.p.toolbar[1]=="both"&&n(i.grid.ubDiv).slideUp("fast"),n(i.grid.uDiv).slideUp("fast")),i.p.footerrow&&n(".ui-jqgrid-sdiv","#gbox_"+i.p.id).slideUp("fast"),n(".ui-jqgrid-titlebar-close span",i.grid.cDiv).removeClass("ui-icon-circle-triangle-n").addClass("ui-icon-circle-triangle-s"),i.p.gridstate="hidden"):t=="visible"&&(n(".ui-jqgrid-hdiv, .ui-jqgrid-bdiv","#gview_"+i.p.id).slideDown("fast"),i.p.pager&&n(i.p.pager).slideDown("fast"),i.p.toppager&&n(i.p.toppager).slideDown("fast"),i.p.toolbar[0]===!0&&(i.p.toolbar[1]=="both"&&n(i.grid.ubDiv).slideDown("fast"),n(i.grid.uDiv).slideDown("fast")),i.p.footerrow&&n(".ui-jqgrid-sdiv","#gbox_"+i.p.id).slideDown("fast"),n(".ui-jqgrid-titlebar-close span",i.grid.cDiv).removeClass("ui-icon-circle-triangle-s").addClass("ui-icon-circle-triangle-n"),i.p.gridstate="visible")}})},filterToolbar:function(t){return t=n.extend({autosearch:!0,searchOnEnter:!0,beforeSearch:null,afterSearch:null,beforeClear:null,afterClear:null,searchurl:"",stringResult:!1,groupOp:"AND",defaultSearch:"bw"},t||{}),this.each(function(){function u(t,i){var r=n(t);r[0]&&jQuery.each(i,function(){this.data!==undefined?r.bind(this.type,this.data,this.fn):r.bind(this.type,this.fn)})}var i=this,f,e;if(!this.ftoolbar){var r=function(){var e={},s=0,f,r,h={},o,v,u,c,l,a;n.each(i.p.colModel,function(){r=this.index||this.name;switch(this.stype){case"select":if(o=this.searchoptions&&this.searchoptions.sopt?this.searchoptions.sopt[0]:"eq",f=n("#gs_"+n.jgrid.jqID(this.name),i.grid.hDiv).val(),f)e[r]=f,h[r]=o,s++;else try{delete i.p.postData[r]}catch(u){}break;case"text":if(o=this.searchoptions&&this.searchoptions.sopt?this.searchoptions.sopt[0]:t.defaultSearch,f=n("#gs_"+n.jgrid.jqID(this.name),i.grid.hDiv).val(),f)e[r]=f,h[r]=o,s++;else try{delete i.p.postData[r]}catch(c){}}});v=s>0?!0:!1;t.stringResult===!0||i.p.datatype=="local"?(u='{"groupOp":"'+t.groupOp+'","rules":[',c=0,n.each(e,function(n,t){c>0&&(u+=",");u+='{"field":"'+n+'",';u+='"op":"'+h[n]+'",';t+="";u+='"data":"'+t.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}';c++}),u+="]}",n.extend(i.p.postData,{filters:u}),n.each(["searchField","searchString","searchOper"],function(n,t){i.p.postData.hasOwnProperty(t)&&delete i.p.postData[t]})):n.extend(i.p.postData,e);i.p.searchurl&&(l=i.p.url,n(i).jqGrid("setGridParam",{url:i.p.searchurl}));a=!1;n.isFunction(t.beforeSearch)&&(a=t.beforeSearch.call(i));a||n(i).jqGrid("setGridParam",{search:v}).trigger("reloadGrid",[{page:1}]);l&&n(i).jqGrid("setGridParam",{url:l});n.isFunction(t.afterSearch)&&t.afterSearch()},o=function(r){var o={},e,s=0,u,a,f,h,c,l;r=typeof r!="boolean"?!0:r;n.each(i.p.colModel,function(){e=this.searchoptions&&this.searchoptions.defaultValue?this.searchoptions.defaultValue:"";u=this.index||this.name;switch(this.stype){case"select":var t;if(n("#gs_"+n.jgrid.jqID(u)+" option",i.grid.hDiv).each(function(i){return i===0&&(this.selected=!0),n(this).text()==e?(this.selected=!0,t=n(this).val(),!1):void 0}),t)o[u]=t,s++;else try{delete i.p.postData[u]}catch(r){}break;case"text":if(n("#gs_"+n.jgrid.jqID(u),i.grid.hDiv).val(e),e)o[u]=e,s++;else try{delete i.p.postData[u]}catch(f){}}});a=s>0?!0:!1;t.stringResult===!0||i.p.datatype=="local"?(f='{"groupOp":"'+t.groupOp+'","rules":[',h=0,n.each(o,function(n,t){h>0&&(f+=",");f+='{"field":"'+n+'",';f+='"op":"eq",';t+="";f+='"data":"'+t.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}';h++}),f+="]}",n.extend(i.p.postData,{filters:f}),n.each(["searchField","searchString","searchOper"],function(n,t){i.p.postData.hasOwnProperty(t)&&delete i.p.postData[t]})):n.extend(i.p.postData,o);i.p.searchurl&&(c=i.p.url,n(i).jqGrid("setGridParam",{url:i.p.searchurl}));l=!1;n.isFunction(t.beforeClear)&&(l=t.beforeClear.call(i));l||r&&n(i).jqGrid("setGridParam",{search:a}).trigger("reloadGrid",[{page:1}]);c&&n(i).jqGrid("setGridParam",{url:c});n.isFunction(t.afterClear)&&t.afterClear()},s=function(){var t=n("tr.ui-search-toolbar",i.grid.hDiv);t.css("display")=="none"?t.show():t.hide()};f=n("<tr class='ui-search-toolbar' role='rowheader'><\/tr>");n.each(i.p.colModel,function(){var s=this,c,y,o,b,l,a,h,k,d,v,p,w,g;if(y=n("<th role='columnheader' class='ui-state-default ui-th-column ui-th-"+i.p.direction+"'><\/th>"),c=n("<div style='width:100%;position:relative;height:100%;padding-right:0.3em;'><\/div>"),this.hidden===!0&&n(y).css("display","none"),this.search=this.search===!1?!1:!0,typeof this.stype=="undefined"&&(this.stype="text"),o=n.extend({},this.searchoptions||{}),this.search)switch(this.stype){case"select":if(b=this.surl||o.dataUrl,b)l=c,n.ajax(n.extend({url:b,dataType:"html",complete:function(i){if(o.buildSelect!==undefined){var f=o.buildSelect(i);f&&n(l).append(f)}else n(l).append(i.responseText);o.defaultValue&&n("select",l).val(o.defaultValue);n("select",l).attr({name:s.index||s.name,id:"gs_"+s.name});o.attr&&n("select",l).attr(o.attr);n("select",l).css({width:"100%"});o.dataInit!==undefined&&o.dataInit(n("select",l)[0]);o.dataEvents!==undefined&&u(n("select",l)[0],o.dataEvents);t.autosearch===!0&&n("select",l).change(function(){return r(),!1});i=null}},n.jgrid.ajaxOptions,i.p.ajaxSelectOptions||{}));else if(s.searchoptions&&s.searchoptions.value?a=s.searchoptions.value:s.editoptions&&s.editoptions.value&&(a=s.editoptions.value),a){if(h=document.createElement("select"),h.style.width="100%",n(h).attr({name:s.index||s.name,id:"gs_"+s.name}),typeof a=="string")for(k=a.split(";"),p=0;p<k.length;p++)d=k[p].split(":"),v=document.createElement("option"),v.value=d[0],v.innerHTML=d[1],h.appendChild(v);else if(typeof a=="object")for(w in a)a.hasOwnProperty(w)&&(v=document.createElement("option"),v.value=w,v.innerHTML=a[w],h.appendChild(v));o.defaultValue&&n(h).val(o.defaultValue);o.attr&&n(h).attr(o.attr);o.dataInit!==undefined&&o.dataInit(h);o.dataEvents!==undefined&&u(h,o.dataEvents);n(c).append(h);t.autosearch===!0&&n(h).change(function(){return r(),!1})}break;case"text":g=o.defaultValue?o.defaultValue:"";n(c).append("<input type='text' style='width:95%;padding:0px;' name='"+(s.index||s.name)+"' id='gs_"+s.name+"' value='"+g+"'/>");o.attr&&n("input",c).attr(o.attr);o.dataInit!==undefined&&o.dataInit(n("input",c)[0]);o.dataEvents!==undefined&&u(n("input",c)[0],o.dataEvents);t.autosearch===!0&&(t.searchOnEnter?n("input",c).keypress(function(n){var t=n.charCode?n.charCode:n.keyCode?n.keyCode:0;return t==13?(r(),!1):this}):n("input",c).keydown(function(n){var t=n.which;switch(t){case 13:return!1;case 9:case 16:case 37:case 38:case 39:case 40:case 27:break;default:e&&clearTimeout(e);e=setTimeout(function(){r()},500)}}))}n(y).append(c);n(f).append(y)});n("table thead",i.grid.hDiv).append(f);this.ftoolbar=!0;this.triggerToolbar=r;this.clearToolbar=o;this.toggleToolbar=s}})}})}(jQuery),function(n){n.fn.jqm=function(r){var f={overlay:50,closeoverlay:!0,overlayClass:"jqmOverlay",closeClass:"jqmClose",trigger:".jqModal",ajax:t,ajaxText:"",target:t,modal:t,toTop:t,onShow:t,onHide:t,onLoad:t};return this.each(function(){if(this._jqm)return i[this._jqm].c=n.extend({},i[this._jqm].c,r);u++;this._jqm=u;i[u]={c:n.extend(f,n.jqm.params,r),a:t,w:n(this).addClass("jqmID"+u),s:u};f.trigger&&n(this).jqmAddTrigger(f.trigger)})};n.fn.jqmAddClose=function(n){return c(this,n,"jqmHide")};n.fn.jqmAddTrigger=function(n){return c(this,n,"jqmShow")};n.fn.jqmShow=function(t){return this.each(function(){n.jqm.open(this._jqm,t)})};n.fn.jqmHide=function(t){return this.each(function(){n.jqm.close(this._jqm,t)})};n.jqm={hash:{},open:function(u,f){var s=i[u],c=s.c,p="."+c.closeClass,y=parseInt(s.w.css("z-index")),l,w,a,v;if(y=y>0?y:3e3,l=n("<div><\/div>").css({height:"100%",width:"100%",position:"fixed",left:0,top:0,"z-index":y-1,opacity:c.overlay/100}),s.a)return t;if(s.t=f,s.a=!0,s.w.css("z-index",y),c.modal?(r[0]||setTimeout(function(){h("bind")},1),r.push(u)):c.overlay>0?c.closeoverlay&&s.w.jqmAddClose(l):l=t,s.o=l?l.addClass(c.overlayClass).prependTo("body"):t,e&&(n("html,body").css({height:"100%",width:"100%"}),l)){l=l.css({position:"absolute"})[0];for(w in{Top:1,Left:1})l.style.setExpression(w.toLowerCase(),"(_=(document.documentElement.scroll"+w+" || document.body.scroll"+w+"))+'px'")}return c.ajax?(a=c.target||s.w,v=c.ajax,a=typeof a=="string"?n(a,s.w):n(a),v=v.substr(0,1)=="@"?n(f).attr(v.substring(1)):v,a.html(c.ajaxText).load(v,function(){c.onLoad&&c.onLoad.call(this,s);p&&s.w.jqmAddClose(n(p,s.w));o(s)})):p&&s.w.jqmAddClose(n(p,s.w)),c.toTop&&s.o&&s.w.before('<span id="jqmP'+s.w[0]._jqm+'"><\/span>').insertAfter(s.o),c.onShow?c.onShow(s):s.w.show(),o(s),t},close:function(u){var f=i[u];if(!f.a)return t;if(f.a=t,r[0]&&(r.pop(),r[0]||h("unbind")),f.c.toTop&&f.o&&n("#jqmP"+f.w[0]._jqm).after(f.w).remove(),f.c.onHide)f.c.onHide(f);else f.w.hide(),f.o&&f.o.remove();return t},params:{}};var u=0,i=n.jqm.hash,r=[],e=n.browser.msie&&n.browser.version=="6.0",t=!1,o=function(t){var i=n('<iframe src="javascript:false;document.write(\'\');" class="jqm"><\/iframe>').css({opacity:0});e&&(t.o?t.o.html('<p style="width:100%;height:100%"/>').prepend(i):n("iframe.jqm",t.w)[0]||t.w.prepend(i));s(t)},s=function(t){try{n(":input:visible",t.w)[0].focus()}catch(i){}},h=function(t){n(document)[t]("keypress",f)[t]("keydown",f)[t]("mousedown",f)},f=function(t){var u=i[r[r.length-1]],f=!n(t.target).parents(".jqmID"+u.s)[0];return f&&s(u),!f},c=function(r,u,f){return r.each(function(){var r=this._jqm;n(u).each(function(){this[f]||(this[f]=[],n(this).click(function(){var n,r;for(n in{jqmShow:1,jqmHide:1})for(r in this[n])i[this[n][r]]&&i[this[n][r]].w[n](this);return t}));this[f].push(r)})})}}(jQuery),function(n){n.fn.jqDrag=function(n){return e(this,n,"d")};n.fn.jqResize=function(n,t){return e(this,n,"r",t)};n.jqDnR={dnr:{},e:0,drag:function(n){return t.k=="d"?i.css({left:t.X+n.pageX-t.pX,top:t.Y+n.pageY-t.pY}):(i.css({width:Math.max(n.pageX-t.pX+t.W,0),height:Math.max(n.pageY-t.pY+t.H,0)}),M1&&r.css({width:Math.max(n.pageX-M1.pX+M1.W,0),height:Math.max(n.pageY-M1.pY+M1.H,0)})),!1},stop:function(){n(document).unbind("mousemove",u.drag).unbind("mouseup",u.stop)}};var u=n.jqDnR,t=u.dnr,i=u.e,r,e=function(u,e,o,s){return u.each(function(){e=e?n(e,u):u;e.bind("mousedown",{e:u,k:o},function(u){var o=u.data,e={};if(i=o.e,r=s?n(s):!1,i.css("position")!="relative")try{i.position(e)}catch(h){}if(t={X:e.left||f("left")||0,Y:e.top||f("top")||0,W:f("width")||i[0].scrollWidth||0,H:f("height")||i[0].scrollHeight||0,pX:u.pageX,pY:u.pageY,k:o.k},M1=r&&o.k!="d"?{X:e.left||f1("left")||0,Y:e.top||f1("top")||0,W:r[0].offsetWidth||f1("width")||0,H:r[0].offsetHeight||f1("height")||0,pX:u.pageX,pY:u.pageY,k:o.k}:!1,n("input.hasDatepicker",i[0])[0])try{n("input.hasDatepicker",i[0]).datepicker("hide")}catch(c){}return n(document).mousemove(n.jqDnR.drag).mouseup(n.jqDnR.stop),!1})})},f=function(n){return parseInt(i.css(n))||!1};f1=function(n){return parseInt(r.css(n))||!1}}(jQuery);var xmlJsonClass={xml2json:function(n,t){n.nodeType===9&&(n=n.documentElement);var r=this.removeWhite(n),u=this.toObj(r),i=this.toJson(u,n.nodeName,"\t");return"{\n"+t+(t?i.replace(/\t/g,t):i.replace(/\t|\n/g,""))+"\n}"},json2xml:function(n,t){var i=function(n,t,r){var f="",e,s,h,o,u;if(n instanceof Array)if(n.length===0)f+=r+"<"+t+">__EMPTY_ARRAY_<\/"+t+">\n";else for(e=0,s=n.length;e<s;e+=1)h=r+i(n[e],t,r+"\t")+"\n",f+=h;else if(typeof n=="object"){o=!1;f+=r+"<"+t;for(u in n)n.hasOwnProperty(u)&&(u.charAt(0)==="@"?f+=" "+u.substr(1)+'="'+n[u].toString()+'"':o=!0);if(f+=o?">":"/>",o){for(u in n)n.hasOwnProperty(u)&&(u==="#text"?f+=n[u]:u==="#cdata"?f+="<![CDATA["+n[u]+"]\]>":u.charAt(0)!=="@"&&(f+=i(n[u],u,r+"\t")));f+=(f.charAt(f.length-1)==="\n"?r:"")+"<\/"+t+">"}}else f+=typeof n=="function"?r+"<"+t+"><![CDATA["+n+"]\]><\/"+t+">":n.toString()==='""'||n.toString().length===0?r+"<"+t+">__EMPTY_STRING_<\/"+t+">":r+"<"+t+">"+n.toString()+"<\/"+t+">";return f},r="";for(var u in n)n.hasOwnProperty(u)&&(r+=i(n[u],u,""));return t?r.replace(/\t/g,t):r.replace(/\t|\n/g,"")},toObj:function(n){var i={},e=/function/i,r;if(n.nodeType===1){if(n.attributes.length)for(r=0;r<n.attributes.length;r+=1)i["@"+n.attributes[r].nodeName]=(n.attributes[r].nodeValue||"").toString();if(n.firstChild){for(var f=0,u=0,o=!1,t=n.firstChild;t;t=t.nextSibling)t.nodeType===1?o=!0:t.nodeType===3&&t.nodeValue.match(/[^ \f\n\r\t\v]/)?f+=1:t.nodeType===4&&(u+=1);if(o)if(f<2&&u<2)for(this.removeWhite(n),t=n.firstChild;t;t=t.nextSibling)t.nodeType===3?i["#text"]=this.escape(t.nodeValue):t.nodeType===4?e.test(t.nodeValue)?i[t.nodeName]=[i[t.nodeName],t.nodeValue]:i["#cdata"]=this.escape(t.nodeValue):i[t.nodeName]?i[t.nodeName]instanceof Array?i[t.nodeName][i[t.nodeName].length]=this.toObj(t):i[t.nodeName]=[i[t.nodeName],this.toObj(t)]:i[t.nodeName]=this.toObj(t);else n.attributes.length?i["#text"]=this.escape(this.innerXml(n)):i=this.escape(this.innerXml(n));else if(f)n.attributes.length?i["#text"]=this.escape(this.innerXml(n)):(i=this.escape(this.innerXml(n)),i==="__EMPTY_ARRAY_"?i="[]":i==="__EMPTY_STRING_"&&(i=""));else if(u)if(u>1)i=this.escape(this.innerXml(n));else for(t=n.firstChild;t;t=t.nextSibling)if(e.test(n.firstChild.nodeValue)){i=n.firstChild.nodeValue;break}else i["#cdata"]=this.escape(t.nodeValue)}n.attributes.length||n.firstChild||(i=null)}else n.nodeType===9?i=this.toObj(n.documentElement):alert("unhandled node type: "+n.nodeType);return i},toJson:function(n,t,i,r){var l,s,h,o,c;r===undefined&&(r=!0);var e=t?'"'+t+'"':"",u="\t",f="\n";if(r||(u="",f=""),n==="[]")e+=t?":[]":"[]";else if(n instanceof Array){for(h=[],s=0,l=n.length;s<l;s+=1)h[s]=this.toJson(n[s],"",i+u,r);e+=(t?":[":"[")+(h.length>1?f+i+u+h.join(","+f+i+u)+f+i:h.join(""))+"]"}else if(n===null)e+=(t&&":")+"null";else if(typeof n=="object"){o=[];for(c in n)n.hasOwnProperty(c)&&(o[o.length]=this.toJson(n[c],c,i+u,r));e+=(t?":{":"{")+(o.length>1?f+i+u+o.join(","+f+i+u)+f+i:o.join(""))+"}"}else e+=typeof n=="string"?(t&&":")+'"'+n.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"':(t&&":")+'"'+n.toString()+'"';return e},innerXml:function(n){var i="",r,t;if("innerHTML"in n)i=n.innerHTML;else for(r=function(n){var t="",i,u;if(n.nodeType===1){for(t+="<"+n.nodeName,i=0;i<n.attributes.length;i+=1)t+=" "+n.attributes[i].nodeName+'="'+(n.attributes[i].nodeValue||"").toString()+'"';if(n.firstChild){for(t+=">",u=n.firstChild;u;u=u.nextSibling)t+=r(u);t+="<\/"+n.nodeName+">"}else t+="/>"}else n.nodeType===3?t+=n.nodeValue:n.nodeType===4&&(t+="<![CDATA["+n.nodeValue+"]\]>");return t},t=n.firstChild;t;t=t.nextSibling)i+=r(t);return i},escape:function(n){return n.replace(/[\\]/g,"\\\\").replace(/[\"]/g,'\\"').replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r")},removeWhite:function(n){var t,i;for(n.normalize(),t=n.firstChild;t;)t.nodeType===3?t.nodeValue.match(/[^ \f\n\r\t\v]/)?t=t.nextSibling:(i=t.nextSibling,n.removeChild(t),t=i):t.nodeType===1?(this.removeWhite(t),t=t.nextSibling):t=t.nextSibling;return n}};(function(n){n.fmatter={};n.extend(n.fmatter,{isBoolean:function(n){return typeof n=="boolean"},isObject:function(t){return t&&(typeof t=="object"||n.isFunction(t))||!1},isString:function(n){return typeof n=="string"},isNumber:function(n){return typeof n=="number"&&isFinite(n)},isNull:function(n){return n===null},isUndefined:function(n){return typeof n=="undefined"},isValue:function(n){return this.isObject(n)||this.isString(n)||this.isNumber(n)||this.isBoolean(n)},isEmpty:function(t){return!this.isString(t)&&this.isValue(t)?!1:this.isValue(t)?(t=n.trim(t).replace(/\&nbsp\;/ig,"").replace(/\&#160\;/ig,""),t===""):!0}});n.fn.fmatter=function(t,i,r,u,f){var e=i;return r=n.extend({},n.jgrid.formatter,r),n.fn.fmatter[t]&&(e=n.fn.fmatter[t](i,r,u,f)),e};n.fmatter.util={NumberFormat:function(t,i){var s,h,l,f,c,e;if(n.fmatter.isNumber(t)||(t*=1),n.fmatter.isNumber(t)){var a=t<0,r=t+"",o=i.decimalSeparator?i.decimalSeparator:".",u;if(n.fmatter.isNumber(i.decimalPlaces)&&(s=i.decimalPlaces,h=Math.pow(10,s),r=Math.round(t*h)/h+"",u=r.lastIndexOf("."),s>0))for(u<0?(r+=o,u=r.length-1):o!=="."&&(r=r.replace(".",o));r.length-1-u<s;)r+="0";if(i.thousandsSeparator){for(l=i.thousandsSeparator,u=r.lastIndexOf(o),u=u>-1?u:r.length,f=r.substring(u),c=-1,e=u;e>0;e--)c++,c%3==0&&e!==u&&(!a||e>1)&&(f=l+f),f=r.charAt(e-1)+f;r=f}return r=i.prefix?i.prefix+r:r,i.suffix?r+i.suffix:r}return t},DateFormat:function(t,i,r,u){var rt=new RegExp("^/Date\\((([-+])?[0-9]+)(([-+])([0-9]{2})([0-9]{2}))?\\)/$"),l=typeof i=="string"?i.match(rt):null,h=function(n,t){for(n=String(n),t=parseInt(t,10)||2;n.length<t;)n="0"+n;return n},f={m:1,d:1,y:1970,h:0,i:0,s:0,u:0},e=0,s,o,tt,c=["i18n"],w,v;if(c.i18n={dayNames:u.dayNames,monthNames:u.monthNames},t in u.masks&&(t=u.masks[t]),i.constructor===Number)String(t).toLowerCase()=="u"&&(i=i*1e3),e=new Date(i);else if(i.constructor===Date)e=i;else if(l!==null)e=new Date(parseInt(l[1],10)),l[3]&&(w=Number(l[5])*60+Number(l[6]),w*=l[4]=="-"?1:-1,w-=e.getTimezoneOffset(),e.setTime(Number(Number(e)+w*6e4)));else{for(i=String(i).split(/[\\\/:_;.,\t\T\s-]/),t=t.split(/[\\\/:_;.,\t\T\s-]/),o=0,tt=t.length;o<tt;o++)t[o]=="M"&&(s=n.inArray(i[o],c.i18n.monthNames),s!==-1&&s<12&&(i[o]=s+1)),t[o]=="F"&&(s=n.inArray(i[o],c.i18n.monthNames),s!==-1&&s>11&&(i[o]=s+1-12)),i[o]&&(f[t[o].toLowerCase()]=parseInt(i[o],10));if(f.f&&(f.m=f.f),f.m===0&&f.y===0&&f.d===0)return"&#160;";f.m=parseInt(f.m,10)-1;v=f.y;v>=70&&v<=99?f.y=1900+f.y:v>=0&&v<=69&&(f.y=2e3+f.y);e=new Date(f.y,f.m,f.d,f.h,f.i,f.s,f.u)}r in u.masks?r=u.masks[r]:r||(r="Y-m-d");var a=e.getHours(),ut=e.getMinutes(),b=e.getDate(),y=e.getMonth()+1,g=e.getTimezoneOffset(),ft=e.getSeconds(),et=e.getMilliseconds(),k=e.getDay(),p=e.getFullYear(),d=(k+6)%7+1,nt=(new Date(p,y-1,b)-new Date(p,0,1))/864e5,it={d:h(b),D:c.i18n.dayNames[k],j:b,l:c.i18n.dayNames[k+7],N:d,S:u.S(b),w:k,z:nt,W:d<5?Math.floor((nt+d-1)/7)+1:Math.floor((nt+d-1)/7)||((new Date(p-1,0,1).getDay()+6)%7<4?53:52),F:c.i18n.monthNames[y- -11],m:h(y),M:c.i18n.monthNames[y-1],n:y,t:"?",L:"?",o:"?",Y:p,y:String(p).substring(2),a:a<12?u.AmPm[0]:u.AmPm[1],A:a<12?u.AmPm[2]:u.AmPm[3],B:"?",g:a%12||12,G:a,h:h(a%12||12),H:h(a),i:h(ut),s:h(ft),u:et,e:"?",I:"?",O:(g>0?"-":"+")+h(Math.floor(Math.abs(g)/60)*100+Math.abs(g)%60,4),P:"?",T:(String(e).match(/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g)||[""]).pop().replace(/[^-+\dA-Z]/g,""),Z:"?",c:"?",r:"?",U:Math.floor(e/1e3)};return r.replace(/\\.|[dDjlNSwzWFmMntLoYyaABgGhHisueIOPTZcrU]/g,function(n){return n in it?it[n]:n.substring(1)})}};n.fn.fmatter.defaultFormat=function(t,i){return n.fmatter.isValue(t)&&t!==""?t:i.defaultValue?i.defaultValue:"&#160;"};n.fn.fmatter.email=function(t,i){return n.fmatter.isEmpty(t)?n.fn.fmatter.defaultFormat(t,i):'<a href="mailto:'+t+'">'+t+"<\/a>"};n.fn.fmatter.checkbox=function(t,i){var r=n.extend({},i.checkbox),u,f;return n.fmatter.isUndefined(i.colModel.formatoptions)||(r=n.extend({},r,i.colModel.formatoptions)),u=r.disabled===!0?'disabled="disabled"':"",(n.fmatter.isEmpty(t)||n.fmatter.isUndefined(t))&&(t=n.fn.fmatter.defaultFormat(t,r)),t=t+"",t=t.toLowerCase(),f=t.search(/(false|0|no|off)/i)<0?" checked='checked' ":"",'<input type="checkbox" '+f+' value="'+t+'" offval="no" '+u+"/>"};n.fn.fmatter.link=function(t,i){var r={target:i.target},u="";return n.fmatter.isUndefined(i.colModel.formatoptions)||(r=n.extend({},r,i.colModel.formatoptions)),r.target&&(u="target="+r.target),n.fmatter.isEmpty(t)?n.fn.fmatter.defaultFormat(t,i):"<a "+u+' href="'+t+'">'+t+"<\/a>"};n.fn.fmatter.showlink=function(t,i){var r={baseLinkUrl:i.baseLinkUrl,showAction:i.showAction,addParam:i.addParam||"",target:i.target,idName:i.idName},u="",f;return n.fmatter.isUndefined(i.colModel.formatoptions)||(r=n.extend({},r,i.colModel.formatoptions)),r.target&&(u="target="+r.target),f=r.baseLinkUrl+r.showAction+"?"+r.idName+"="+i.rowId+r.addParam,n.fmatter.isString(t)||n.fmatter.isNumber(t)?"<a "+u+' href="'+f+'">'+t+"<\/a>":n.fn.fmatter.defaultFormat(t,i)};n.fn.fmatter.integer=function(t,i){var r=n.extend({},i.integer);return(n.fmatter.isUndefined(i.colModel.formatoptions)||(r=n.extend({},r,i.colModel.formatoptions)),n.fmatter.isEmpty(t))?r.defaultValue:n.fmatter.util.NumberFormat(t,r)};n.fn.fmatter.number=function(t,i){var r=n.extend({},i.number);return(n.fmatter.isUndefined(i.colModel.formatoptions)||(r=n.extend({},r,i.colModel.formatoptions)),n.fmatter.isEmpty(t))?r.defaultValue:n.fmatter.util.NumberFormat(t,r)};n.fn.fmatter.currency=function(t,i){var r=n.extend({},i.currency);return(n.fmatter.isUndefined(i.colModel.formatoptions)||(r=n.extend({},r,i.colModel.formatoptions)),n.fmatter.isEmpty(t))?r.defaultValue:n.fmatter.util.NumberFormat(t,r)};n.fn.fmatter.date=function(t,i,r,u){var f=n.extend({},i.date);return n.fmatter.isUndefined(i.colModel.formatoptions)||(f=n.extend({},f,i.colModel.formatoptions)),f.reformatAfterEdit||u!="edit"?n.fmatter.isEmpty(t)?n.fn.fmatter.defaultFormat(t,i):n.fmatter.util.DateFormat(f.srcformat,t,f.newformat,f):n.fn.fmatter.defaultFormat(t,i)};n.fn.fmatter.select=function(t,i){var r,f,o,e,u,h,c,s;if(t=t+"",r=!1,f=[],n.fmatter.isUndefined(i.colModel.formatoptions)?n.fmatter.isUndefined(i.colModel.editoptions)||(r=i.colModel.editoptions.value):r=i.colModel.formatoptions.value,r)if(o=i.colModel.editoptions.multiple===!0?!0:!1,e=[],o&&(e=t.split(","),e=n.map(e,function(t){return n.trim(t)})),n.fmatter.isString(r)){for(h=r.split(";"),c=0,s=0;s<h.length;s++)if(u=h[s].split(":"),u.length>2&&(u[1]=jQuery.map(u,function(n,t){if(t>0)return n}).join(":")),o)jQuery.inArray(u[0],e)>-1&&(f[c]=u[1],c++);else if(n.trim(u[0])==n.trim(t)){f[0]=u[1];break}}else n.fmatter.isObject(r)&&(o?f=jQuery.map(e,function(n){return r[n]}):f[0]=r[t]||"");return t=f.join(", "),t===""?n.fn.fmatter.defaultFormat(t,i):t};n.fn.fmatter.rowactions=function(t,i,r,u){var f={keys:!1,onEdit:null,onSuccess:null,afterSave:null,onError:null,afterRestore:null,extraparam:{oper:"edit"},url:null,delOptions:{},editOptions:{}},o,s,e;t=n.jgrid.jqID(t);i=n.jgrid.jqID(i);o=n("#"+i)[0].p.colModel[u];n.fmatter.isUndefined(o.formatoptions)||(f=n.extend(f,o.formatoptions));n.fmatter.isUndefined(n("#"+i)[0].p.editOptions)||(f.editOptions=n("#"+i)[0].p.editOptions);n.fmatter.isUndefined(n("#"+i)[0].p.delOptions)||(f.delOptions=n("#"+i)[0].p.delOptions);s=function(r){f.afterSave&&f.afterSave(r);n("tr#"+t+" div.ui-inline-edit, tr#"+t+" div.ui-inline-del","#"+i+".ui-jqgrid-btable:first").show();n("tr#"+t+" div.ui-inline-save, tr#"+t+" div.ui-inline-cancel","#"+i+".ui-jqgrid-btable:first").hide()};e=function(r){f.afterRestore&&f.afterRestore(r);n("tr#"+t+" div.ui-inline-edit, tr#"+t+" div.ui-inline-del","#"+i+".ui-jqgrid-btable:first").show();n("tr#"+t+" div.ui-inline-save, tr#"+t+" div.ui-inline-cancel","#"+i+".ui-jqgrid-btable:first").hide()};switch(r){case"edit":n("#"+i).jqGrid("editRow",t,f.keys,f.onEdit,f.onSuccess,f.url,f.extraparam,s,f.onError,e);n("tr#"+t+" div.ui-inline-edit, tr#"+t+" div.ui-inline-del","#"+i+".ui-jqgrid-btable:first").hide();n("tr#"+t+" div.ui-inline-save, tr#"+t+" div.ui-inline-cancel","#"+i+".ui-jqgrid-btable:first").show();break;case"save":n("#"+i).jqGrid("saveRow",t,f.onSuccess,f.url,f.extraparam,s,f.onError,e)&&(n("tr#"+t+" div.ui-inline-edit, tr#"+t+" div.ui-inline-del","#"+i+".ui-jqgrid-btable:first").show(),n("tr#"+t+" div.ui-inline-save, tr#"+t+" div.ui-inline-cancel","#"+i+".ui-jqgrid-btable:first").hide());break;case"cancel":n("#"+i).jqGrid("restoreRow",t,e);n("tr#"+t+" div.ui-inline-edit, tr#"+t+" div.ui-inline-del","#"+i+".ui-jqgrid-btable:first").show();n("tr#"+t+" div.ui-inline-save, tr#"+t+" div.ui-inline-cancel","#"+i+".ui-jqgrid-btable:first").hide();break;case"del":n("#"+i).jqGrid("delGridRow",t,f.delOptions);break;case"formedit":n("#"+i).jqGrid("setSelection",t);n("#"+i).jqGrid("editGridRow",t,f.editOptions)}};n.fn.fmatter.actions=function(t,i){var e={keys:!1,editbutton:!0,delbutton:!0,editformbutton:!1},f,r,u;return(n.fmatter.isUndefined(i.colModel.formatoptions)||(e=n.extend(e,i.colModel.formatoptions)),f=i.rowId,r="",typeof f=="undefined"||n.fmatter.isEmpty(f))?"":(e.editformbutton?(u="onclick=$.fn.fmatter.rowactions('"+f+"','"+i.gid+"','formedit',"+i.pos+"); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ",r=r+"<div title='"+n.jgrid.nav.edittitle+"' style='float:left;cursor:pointer;' class='ui-pg-div ui-inline-edit' "+u+"><span class='ui-icon ui-icon-pencil'><\/span><\/div>"):e.editbutton&&(u="onclick=$.fn.fmatter.rowactions('"+f+"','"+i.gid+"','edit',"+i.pos+"); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover') ",r=r+"<div title='"+n.jgrid.nav.edittitle+"' style='float:left;cursor:pointer;' class='ui-pg-div ui-inline-edit' "+u+"><span class='ui-icon ui-icon-pencil'><\/span><\/div>"),e.delbutton&&(u="onclick=$.fn.fmatter.rowactions('"+f+"','"+i.gid+"','del',"+i.pos+"); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ",r=r+"<div title='"+n.jgrid.nav.deltitle+"' style='float:left;margin-left:5px;' class='ui-pg-div ui-inline-del' "+u+"><span class='ui-icon ui-icon-trash'><\/span><\/div>"),u="onclick=$.fn.fmatter.rowactions('"+f+"','"+i.gid+"','save',"+i.pos+"); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ",r=r+"<div title='"+n.jgrid.edit.bSubmit+"' style='float:left;display:none' class='ui-pg-div ui-inline-save' "+u+"><span class='ui-icon ui-icon-disk'><\/span><\/div>",u="onclick=$.fn.fmatter.rowactions('"+f+"','"+i.gid+"','cancel',"+i.pos+"); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ",r=r+"<div title='"+n.jgrid.edit.bCancel+"' style='float:left;display:none;margin-left:5px;' class='ui-pg-div ui-inline-cancel' "+u+"><span class='ui-icon ui-icon-cancel'><\/span><\/div>","<div style='margin-left:8px;'>"+r+"<\/div>")};n.unformat=function(t,i,r,u){var e,h=i.colModel.formatter,f=i.colModel.formatoptions||{},o,l=/([\.\*\_\'\(\)\{\}\+\?\\])/g,a=i.colModel.unformat||n.fn.fmatter[h]&&n.fn.fmatter[h].unformat,c,s,v;if(typeof a!="undefined"&&n.isFunction(a))e=a(n(t).text(),i,t);else if(!n.fmatter.isUndefined(h)&&n.fmatter.isString(h)){c=n.jgrid.formatter||{};switch(h){case"integer":f=n.extend({},c.integer,f);o=f.thousandsSeparator.replace(l,"\\$1");s=new RegExp(o,"g");e=n(t).text().replace(s,"");break;case"number":f=n.extend({},c.number,f);o=f.thousandsSeparator.replace(l,"\\$1");s=new RegExp(o,"g");e=n(t).text().replace(s,"").replace(f.decimalSeparator,".");break;case"currency":f=n.extend({},c.currency,f);o=f.thousandsSeparator.replace(l,"\\$1");s=new RegExp(o,"g");e=n(t).text().replace(s,"").replace(f.decimalSeparator,".").replace(f.prefix,"").replace(f.suffix,"");break;case"checkbox":v=i.colModel.editoptions?i.colModel.editoptions.value.split(":"):["Yes","No"];e=n("input",t).attr("checked")?v[0]:v[1];break;case"select":e=n.unformat.select(t,i,r,u);break;case"actions":return"";default:e=n(t).text()}}return e!==undefined?e:u===!0?n(t).text():n.jgrid.htmlDecode(n(t).html())};n.unformat.select=function(t,i,r,u){var h=[],o=n(t).text(),c,v,y,l;if(u===!0)return o;if(c=n.extend({},i.colModel.editoptions),c.value){var s=c.value,a=c.multiple===!0?!0:!1,e=[],f;if(a&&(e=o.split(","),e=n.map(e,function(t){return n.trim(t)})),n.fmatter.isString(s)){for(v=s.split(";"),y=0,l=0;l<v.length;l++)if(f=v[l].split(":"),f.length>2&&(f[1]=jQuery.map(f,function(n,t){if(t>0)return n}).join(":")),a)jQuery.inArray(f[1],e)>-1&&(h[y]=f[0],y++);else if(n.trim(f[1])==n.trim(o)){h[0]=f[0];break}}else(n.fmatter.isObject(s)||n.isArray(s))&&(a||(e[0]=o),h=jQuery.map(e,function(t){var i;return n.each(s,function(n,r){if(r==t)return i=n,!1}),typeof i!="undefined"?i:void 0}));return h.join(", ")}return o||""};n.unformat.date=function(t,i){var r=n.jgrid.formatter.date||{};return n.fmatter.isUndefined(i.formatoptions)||(r=n.extend({},r,i.formatoptions)),n.fmatter.isEmpty(t)?n.fn.fmatter.defaultFormat(t,i):n.fmatter.util.DateFormat(r.newformat,t,r.srcformat,r)}})(jQuery),function(n){n.extend(n.jgrid,{showModal:function(n){n.w.show()},closeModal:function(n){n.w.hide().attr("aria-hidden","true");n.o&&n.o.remove()},hideModal:function(t,i){if(i=n.extend({jqm:!0,gb:""},i||{}),i.onClose){var r=i.onClose(t);if(typeof r=="boolean"&&!r)return}if(n.fn.jqm&&i.jqm===!0)n(t).attr("aria-hidden","true").jqmHide();else{if(i.gb!=="")try{n(".jqgrid-overlay:first",i.gb).hide()}catch(u){}n(t).hide().attr("aria-hidden","true")}},findPos:function(n){var t=0,i=0;if(n.offsetParent)do t+=n.offsetLeft,i+=n.offsetTop;while(n=n.offsetParent);return[t,i]},createModal:function(t,i,r,u,f,e,o){var s=document.createElement("div"),y,b=this,h,l,a,c,v,p,w;if(o=n.extend({},o||{}),y=n(r.gbox).attr("dir")=="rtl"?!0:!1,s.className="ui-widget ui-widget-content ui-corner-all ui-jqdialog",s.id=t.themodal,h=document.createElement("div"),h.className="ui-jqdialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix",h.id=t.modalhead,n(h).append("<span class='ui-jqdialog-title'>"+r.caption+"<\/span>"),l=n("<a href='javascript:void(0)' class='ui-jqdialog-titlebar-close ui-corner-all'><\/a>").hover(function(){l.addClass("ui-state-hover")},function(){l.removeClass("ui-state-hover")}).append("<span class='ui-icon ui-icon-closethick'><\/span>"),n(h).append(l),y?(s.dir="rtl",n(".ui-jqdialog-title",h).css("float","right"),n(".ui-jqdialog-titlebar-close",h).css("left",.3+"em")):(s.dir="ltr",n(".ui-jqdialog-title",h).css("float","left"),n(".ui-jqdialog-titlebar-close",h).css("right",.3+"em")),a=document.createElement("div"),n(a).addClass("ui-jqdialog-content ui-widget-content").attr("id",t.modalcontent),n(a).append(i),s.appendChild(a),n(s).prepend(h),e===!0?n("body").append(s):typeof e=="string"?n(e).append(s):n(s).insertBefore(u),n(s).css(o),typeof r.jqModal=="undefined"&&(r.jqModal=!0),c={},n.fn.jqm&&r.jqModal===!0?(r.left===0&&r.top===0&&r.overlay&&(v=[],v=this.findPos(f),r.left=v[0]+4,r.top=v[1]+4),c.top=r.top+"px",c.left=r.left):(r.left!==0||r.top!==0)&&(c.left=r.left,c.top=r.top+"px"),n("a.ui-jqdialog-titlebar-close",h).click(function(){var i=n("#"+t.themodal).data("onClose")||r.onClose,u=n("#"+t.themodal).data("gbox")||r.gbox;return b.hideModal("#"+t.themodal,{gb:u,jqm:r.jqModal,onClose:i}),!1}),r.width!==0&&r.width||(r.width=300),r.height!==0&&r.height||(r.height=200),r.zIndex||(p=n(u).parents("*[role=dialog]").filter(":first").css("z-index"),r.zIndex=p?parseInt(p,10)+1:950),w=0,y&&c.left&&!e&&(w=n(r.gbox).width()-(isNaN(r.width)?0:parseInt(r.width,10))-8,c.left=parseInt(c.left,10)+parseInt(w,10)),c.left&&(c.left+="px"),n(s).css(n.extend({width:isNaN(r.width)?"auto":r.width+"px",height:isNaN(r.height)?"auto":r.height+"px",zIndex:r.zIndex,overflow:"hidden"},c)).attr({tabIndex:"-1",role:"dialog","aria-labelledby":t.modalhead,"aria-hidden":"true"}),typeof r.drag=="undefined"&&(r.drag=!0),typeof r.resize=="undefined"&&(r.resize=!0),r.drag)if(n(h).css("cursor","move"),n.fn.jqDrag)n(s).jqDrag(h);else try{n(s).draggable({handle:n("#"+h.id)})}catch(k){}if(r.resize)if(n.fn.jqResize)n(s).append("<div class='jqResize ui-resizable-handle ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se ui-icon-grip-diagonal-se'><\/div>"),n("#"+t.themodal).jqResize(".jqResize",t.scrollelm?"#"+t.scrollelm:!1);else try{n(s).resizable({handles:"se, sw",alsoResize:t.scrollelm?"#"+t.scrollelm:!1})}catch(d){}r.closeOnEscape===!0&&n(s).keydown(function(i){if(i.which==27){var u=n("#"+t.themodal).data("onClose")||r.onClose;b.hideModal(this,{gb:r.gbox,jqm:r.jqModal,onClose:u})}})},viewModal:function(t,i){if(i=n.extend({toTop:!0,overlay:10,modal:!1,overlayClass:"ui-widget-overlay",onShow:this.showModal,onHide:this.closeModal,gbox:"",jqm:!0,jqM:!0},i||{}),n.fn.jqm&&i.jqm===!0)i.jqM?n(t).attr("aria-hidden","false").jqm(i).jqmShow():n(t).attr("aria-hidden","false").jqmShow();else{i.gbox!==""&&(n(".jqgrid-overlay:first",i.gbox).show(),n(t).data("gbox",i.gbox));n(t).show().attr("aria-hidden","false");try{n(":input:visible",t)[0].focus()}catch(r){}}},info_dialog:function(t,i,r,u){var f={width:290,height:"auto",dataheight:"auto",drag:!0,resize:!1,caption:"<b>"+t+"<\/b>",left:250,top:170,zIndex:1e3,jqModal:!0,modal:!1,closeOnEscape:!0,align:"center",buttonalign:"center",buttons:[]},o,c,s,e;if(n.extend(f,u||{}),o=f.jqModal,c=this,n.fn.jqm&&!o&&(o=!1),s="",f.buttons.length>0)for(e=0;e<f.buttons.length;e++)typeof f.buttons[e].id=="undefined"&&(f.buttons[e].id="info_button_"+e),s+="<a href='javascript:void(0)' id='"+f.buttons[e].id+"' class='fm-button ui-state-default ui-corner-all'>"+f.buttons[e].text+"<\/a>";var l=isNaN(f.dataheight)?f.dataheight:f.dataheight+"px",a="text-align:"+f.align+";",h="<div id='info_id'>";h+="<div id='infocnt' style='margin:0px;padding-bottom:1em;width:100%;overflow:auto;position:relative;height:"+l+";"+a+"'>"+i+"<\/div>";h+=r?"<div class='ui-widget-content ui-helper-clearfix' style='text-align:"+f.buttonalign+";padding-bottom:0.8em;padding-top:0.5em;background-image: none;border-width: 1px 0 0 0;'><a href='javascript:void(0)' id='closedialog' class='fm-button ui-state-default ui-corner-all'>"+r+"<\/a>"+s+"<\/div>":s!==""?"<div class='ui-widget-content ui-helper-clearfix' style='text-align:"+f.buttonalign+";padding-bottom:0.8em;padding-top:0.5em;background-image: none;border-width: 1px 0 0 0;'>"+s+"<\/div>":"";h+="<\/div>";try{n("#info_dialog").attr("aria-hidden")=="false"&&this.hideModal("#info_dialog",{jqm:o});n("#info_dialog").remove()}catch(v){}this.createModal({themodal:"info_dialog",modalhead:"info_head",modalcontent:"info_content",scrollelm:"infocnt"},h,f,"","",!0);s&&n.each(f.buttons,function(t){n("#"+this.id,"#info_id").bind("click",function(){return f.buttons[t].onClick.call(n("#info_dialog")),!1})});n("#closedialog","#info_id").click(function(){return c.hideModal("#info_dialog",{jqm:o}),!1});n(".fm-button","#info_dialog").hover(function(){n(this).addClass("ui-state-hover")},function(){n(this).removeClass("ui-state-hover")});n.isFunction(f.beforeOpen)&&f.beforeOpen();this.viewModal("#info_dialog",{onHide:function(n){n.w.hide().remove();n.o&&n.o.remove()},modal:f.modal,jqm:o});n.isFunction(f.afterOpen)&&f.afterOpen();try{n("#info_dialog").focus()}catch(y){}},createEl:function(t,i,r,u,f){function a(t,i){return n.isFunction(i.dataInit)&&i.dataInit(t),i.dataEvents&&n.each(i.dataEvents,function(){this.data!==undefined?n(t).bind(this.type,this.data,this.fn):n(t).bind(this.type,this.fn)}),i}function v(t,i,r){var u=["dataInit","dataEvents","dataUrl","buildSelect","sopt","searchhidden","defaultValue","attr"];typeof r!="undefined"&&n.isArray(r)&&(u=n.extend(u,r));n.each(i,function(i,r){n.inArray(i,u)===-1&&n(t).attr(i,r)});i.hasOwnProperty("id")||n(t).attr("id",n.jgrid.randId())}var e="",d,b,l,h,k,g,s,o,y,c,nt,p;switch(t){case"textarea":e=document.createElement("textarea");u?i.cols||n(e).css({width:"98%"}):i.cols||(i.cols=20);i.rows||(i.rows=2);(r=="&nbsp;"||r=="&#160;"||r.length==1&&r.charCodeAt(0)==160)&&(r="");e.value=r;v(e,i);i=a(e,i);n(e).attr({role:"textbox",multiline:"true"});break;case"checkbox":e=document.createElement("input");e.type="checkbox";i.value?(b=i.value.split(":"),r===b[0]&&(e.checked=!0,e.defaultChecked=!0),e.value=b[0],n(e).attr("offval",b[1])):(d=r.toLowerCase(),d.search(/(false|0|no|off|undefined)/i)<0&&d!==""?(e.checked=!0,e.defaultChecked=!0,e.value=r):e.value="on",n(e).attr("offval","off"));v(e,i,["value"]);i=a(e,i);n(e).attr("role","checkbox");break;case"select":if(e=document.createElement("select"),e.setAttribute("role","select"),h=[],i.multiple===!0?(l=!0,e.multiple="multiple",n(e).attr("aria-multiselectable","true")):l=!1,typeof i.dataUrl!="undefined")n.ajax(n.extend({url:i.dataUrl,type:"GET",dataType:"html",context:{elem:e,options:i,vl:r},success:function(t){var u,r=[],f=this.elem,e=this.vl,i=n.extend({},this.options),o=i.multiple===!0,s;typeof i.buildSelect!="undefined"?(s=i.buildSelect(t),u=n(s).html()):u=n(t).html();u&&(n(f).append(u),v(f,i),i=a(f,i),typeof i.size=="undefined"&&(i.size=o?3:1),o?(r=e.split(","),r=n.map(r,function(t){return n.trim(t)})):r[0]=n.trim(e),setTimeout(function(){n("option",f).each(function(){n(this).attr("role","option");(n.inArray(n.trim(n(this).text()),r)>-1||n.inArray(n.trim(n(this).val()),r)>-1)&&(this.selected="selected")})},0))}},f||{}));else if(i.value){if(l?(h=r.split(","),h=n.map(h,function(t){return n.trim(t)}),typeof i.size=="undefined"&&(i.size=3)):i.size=1,typeof i.value=="function"&&(i.value=i.value()),typeof i.value=="string")for(g=i.value.split(";"),k=0;k<g.length;k++)s=g[k].split(":"),s.length>2&&(s[1]=n.map(s,function(n,t){if(t>0)return n}).join(":")),o=document.createElement("option"),o.setAttribute("role","option"),o.value=s[0],o.innerHTML=s[1],l||n.trim(s[0])!=n.trim(r)&&n.trim(s[1])!=n.trim(r)||(o.selected="selected"),l&&(n.inArray(n.trim(s[1]),h)>-1||n.inArray(n.trim(s[0]),h)>-1)&&(o.selected="selected"),e.appendChild(o);else if(typeof i.value=="object"){y=i.value;for(c in y)y.hasOwnProperty(c)&&(o=document.createElement("option"),o.setAttribute("role","option"),o.value=c,o.innerHTML=y[c],l||n.trim(c)!=n.trim(r)&&n.trim(y[c])!=n.trim(r)||(o.selected="selected"),l&&(n.inArray(n.trim(y[c]),h)>-1||n.inArray(n.trim(c),h)>-1)&&(o.selected="selected"),e.appendChild(o))}v(e,i,["value"]);i=a(e,i)}break;case"text":case"password":case"button":nt=t=="button"?"button":"textbox";e=document.createElement("input");e.type=t;e.value=r;v(e,i);i=a(e,i);t!="button"&&(u?i.size||n(e).css({width:"98%"}):i.size||(i.size=20));n(e).attr("role",nt);break;case"image":case"file":e=document.createElement("input");e.type=t;v(e,i);i=a(e,i);break;case"custom":e=document.createElement("span");try{if(n.isFunction(i.custom_element))if(p=i.custom_element.call(this,r,i),p)p=n(p).addClass("customelement").attr({id:i.id,name:i.name}),n(e).empty().append(p);else throw"e2";else throw"e1";}catch(w){w=="e1"&&this.info_dialog(n.jgrid.errors.errcap,"function 'custom_element' "+n.jgrid.edit.msg.nodefined,n.jgrid.edit.bClose);w=="e2"?this.info_dialog(n.jgrid.errors.errcap,"function 'custom_element' "+n.jgrid.edit.msg.novalue,n.jgrid.edit.bClose):this.info_dialog(n.jgrid.errors.errcap,typeof w=="string"?w:w.message,n.jgrid.edit.bClose)}}return e},checkDate:function(n,t){var a=function(n){return n%4==0&&(n%100!=0||n%400==0)?29:28},v=function(n){for(var t=1;t<=n;t++)this[t]=31,(t==4||t==6||t==9||t==11)&&(this[t]=30),t==2&&(this[t]=29);return this},i={},h,r,c,l,s;if(n=n.toLowerCase(),h=n.indexOf("/")!=-1?"/":n.indexOf("-")!=-1?"-":n.indexOf(".")!=-1?".":"/",n=n.split(h),t=t.split(h),t.length!=3)return!1;var u=-1,f,e=-1,o=-1;for(r=0;r<n.length;r++)c=isNaN(t[r])?0:parseInt(t[r],10),i[n[r]]=c,f=n[r],f.indexOf("y")!=-1&&(u=r),f.indexOf("m")!=-1&&(o=r),f.indexOf("d")!=-1&&(e=r);return(f=n[u]=="y"||n[u]=="yyyy"?4:n[u]=="yy"?2:-1,l=v(12),u===-1)?!1:(s=i[n[u]].toString(),f==2&&s.length==1&&(f=1),s.length!=f||i[n[u]]===0&&t[u]!="00")?!1:o===-1?!1:(s=i[n[o]].toString(),s.length<1||i[n[o]]<1||i[n[o]]>12)?!1:e===-1?!1:(s=i[n[e]].toString(),s.length<1||i[n[e]]<1||i[n[e]]>31||i[n[o]]==2&&i[n[e]]>a(i[n[u]])||i[n[e]]>l[i[n[o]]])?!1:!0},isEmpty:function(n){return n.match(/^\s+$/)||n===""?!0:!1},checkTime:function(n){var t;if(!this.isEmpty(n))if(t=n.match(/^(\d{1,2}):(\d{2})([ap]m)?$/),t){if(t[3]){if(t[1]<1||t[1]>12)return!1}else if(t[1]>23)return!1;if(t[2]>59)return!1}else return!1;return!0},checkValues:function(t,i,r,u,f){var e,h,o,l,v,s,c,a;if(typeof u=="undefined")if(typeof i=="string"){for(h=0,v=r.p.colModel.length;h<v;h++)if(r.p.colModel[h].name==i){e=r.p.colModel[h].editrules;i=h;try{o=r.p.colModel[h].formoptions.label}catch(y){}break}}else i>=0&&(e=r.p.colModel[i].editrules);else e=u,o=f===undefined?"_":f;if(e){if(o||(o=r.p.colNames[i]),e.required===!0&&this.isEmpty(t))return[!1,o+": "+n.jgrid.edit.msg.required,""];if(s=e.required===!1?!1:!0,e.number===!0&&!(s===!1&&this.isEmpty(t))&&isNaN(t))return[!1,o+": "+n.jgrid.edit.msg.number,""];if(typeof e.minValue!="undefined"&&!isNaN(e.minValue)&&parseFloat(t)<parseFloat(e.minValue))return[!1,o+": "+n.jgrid.edit.msg.minValue+" "+e.minValue,""];if(typeof e.maxValue!="undefined"&&!isNaN(e.maxValue)&&parseFloat(t)>parseFloat(e.maxValue))return[!1,o+": "+n.jgrid.edit.msg.maxValue+" "+e.maxValue,""];if(e.email===!0&&!(s===!1&&this.isEmpty(t))&&(c=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i,!c.test(t)))return[!1,o+": "+n.jgrid.edit.msg.email,""];if(e.integer===!0&&!(s===!1&&this.isEmpty(t))){if(isNaN(t))return[!1,o+": "+n.jgrid.edit.msg.integer,""];if(t%1!=0||t.indexOf(".")!=-1)return[!1,o+": "+n.jgrid.edit.msg.integer,""]}if(e.date===!0&&!(s===!1&&this.isEmpty(t))&&(l=r.p.colModel[i].formatoptions&&r.p.colModel[i].formatoptions.newformat?r.p.colModel[i].formatoptions.newformat:r.p.colModel[i].datefmt||"Y-m-d",!this.checkDate(l,t)))return[!1,o+": "+n.jgrid.edit.msg.date+" - "+l,""];if(e.time===!0&&!(s===!1&&this.isEmpty(t))&&!this.checkTime(t))return[!1,o+": "+n.jgrid.edit.msg.date+" - hh:mm (am/pm)",""];if(e.url===!0&&!(s===!1&&this.isEmpty(t))&&(c=/^(((https?)|(ftp)):\/\/([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*\/?)/i,!c.test(t)))return[!1,o+": "+n.jgrid.edit.msg.url,""];if(e.custom===!0&&!(s===!1&&this.isEmpty(t)))return n.isFunction(e.custom_func)?(a=e.custom_func.call(r,t,o),n.isArray(a)?a:[!1,n.jgrid.edit.msg.customarray,""]):[!1,n.jgrid.edit.msg.customfcheck,""]}return[!0,"",""]}})}(jQuery),function(n){n.fn.jqFilter=function(t){var r,u,i;if(typeof t=="string"){if(r=n.fn.jqFilter[t],!r)throw"jqFilter - No such method: "+t;return u=n.makeArray(arguments).slice(1),r.apply(this,u)}return i=n.extend(!0,{filter:null,columns:[],onChange:null,afterRedraw:null,checkValues:null,error:!1,errmsg:"",errorcheck:!0,showQuery:!0,sopt:null,ops:[{name:"eq",description:"equal",operator:"="},{name:"ne",description:"not equal",operator:"<>"},{name:"lt",description:"less",operator:"<"},{name:"le",description:"less or equal",operator:"<="},{name:"gt",description:"greater",operator:">"},{name:"ge",description:"greater or equal",operator:">="},{name:"bw",description:"begins with",operator:"LIKE"},{name:"bn",description:"does not begin with",operator:"NOT LIKE"},{name:"in",description:"in",operator:"IN"},{name:"ni",description:"not in",operator:"NOT IN"},{name:"ew",description:"ends with",operator:"LIKE"},{name:"en",description:"does not end with",operator:"NOT LIKE"},{name:"cn",description:"contains",operator:"LIKE"},{name:"nc",description:"does not contain",operator:"NOT LIKE"},{name:"nu",description:"is null",operator:"IS NULL"},{name:"nn",description:"is not null",operator:"IS NOT NULL"}],numopts:["eq","ne","lt","le","gt","ge","nu","nn","in","ni"],stropts:["eq","ne","bw","bn","ew","en","cn","nc","nu","nn","in","ni"],_gridsopt:[],groupOps:["AND","OR"],groupButton:!0,ruleButtons:!0},t||{}),this.each(function(){var r,u,t,f,e;if(!this.filter){if(this.p=i,(this.p.filter===null||this.p.filter===undefined)&&(this.p.filter={groupOp:this.p.groupOps[0],rules:[],groups:[]}),u=this.p.columns.length,f=/msie/i.test(navigator.userAgent)&&!window.opera,this.p._gridsopt.length)for(r=0;r<this.p._gridsopt.length;r++)this.p.ops[r].description=this.p._gridsopt[r];if(this.p.initFilter=n.extend(!0,{},this.p.filter),u){for(r=0;r<u;r++)t=this.p.columns[r],t.stype?t.inputtype=t.stype:t.inputtype||(t.inputtype="text"),t.sorttype?t.searchtype=t.sorttype:t.searchtype||(t.searchtype="string"),t.hidden===undefined&&(t.hidden=!1),t.label||(t.label=t.name),t.index&&(t.name=t.index),t.hasOwnProperty("searchoptions")||(t.searchoptions={}),t.hasOwnProperty("searchrules")||(t.searchrules={});this.p.showQuery&&n(this).append("<table class='queryresult ui-widget ui-widget-content' style='display:block;max-width:440px;border:0px none;'><tbody><tr><td class='query'><\/td><\/tr><\/tbody><\/table>");e=function(t,r){var u=[!0,""];if(n.isFunction(r.searchrules))u=r.searchrules(t,r);else if(n.jgrid&&n.jgrid.checkValues)try{u=n.jgrid.checkValues(t,-1,null,r.searchrules,r.label)}catch(f){}u&&u.length&&u[0]===!1&&(i.error=!u[0],i.errmsg=u[1])};this.onchange=function(){return this.p.error=!1,this.p.errmsg="",n.isFunction(this.p.onChange)?this.p.onChange.call(this,this.p):!1};this.reDraw=function(){n("table.group:first",this).remove();var t=this.createTableForGroup(i.filter,null);n(this).append(t);n.isFunction(this.p.afterRedraw)&&this.p.afterRedraw.call(this,this.p)};this.createTableForGroup=function(t,r){var f=this,u,o=n("<table class='group ui-widget ui-widget-content' style='border:0px none;'><tbody><\/tbody><\/table>"),a,e,h,v,b,c,y,s,p,l,k,w;if(r===null&&n(o).append("<tr class='error' style='display:none;'><th colspan='5' class='ui-state-error' align='left'><\/th><\/tr>"),a=n("<tr><\/tr>"),n(o).append(a),e=n("<th colspan='5' align='left'><\/th>"),a.append(e),this.p.ruleButtons===!0){for(h=n("<select class='opsel'><\/select>"),e.append(h),v="",u=0;u<i.groupOps.length;u++)b=t.groupOp===f.p.groupOps[u]?" selected='selected'":"",v+="<option value='"+f.p.groupOps[u]+"'"+b+">"+f.p.groupOps[u]+"<\/option>";h.append(v).bind("change",function(){t.groupOp=n(h).val();f.onchange()})}if(c="<span><\/span>",this.p.groupButton&&(c=n("<input type='button' value='+ {}' title='Add subgroup' class='add-group'/>"),c.bind("click",function(){return t.groups===undefined&&(t.groups=[]),t.groups.push({groupOp:i.groupOps[0],rules:[],groups:[]}),f.reDraw(),f.onchange(),!1})),e.append(c),this.p.ruleButtons===!0&&(y=n("<input type='button' value='+' title='Add rule' class='add-rule ui-add'/>"),y.bind("click",function(){var i;for(t.rules===undefined&&(t.rules=[]),u=0;u<f.p.columns.length;u++){var n=typeof f.p.columns[u].search=="undefined"?!0:f.p.columns[u].search,r=f.p.columns[u].hidden===!0,e=f.p.columns[u].searchoptions.searchhidden===!0;if(e&&n||n&&!r){s=f.p.columns[u];break}}return i=s.searchoptions.sopt?s.searchoptions.sopt:f.p.sopt?f.p.sopt:s.searchtype==="string"?f.p.stropts:f.p.numopts,t.rules.push({field:s.name,op:i[0],data:""}),f.reDraw(),!1}),e.append(y)),r!==null&&(p=n("<input type='button' value='-' title='Delete group' class='delete-group'/>"),e.append(p),p.bind("click",function(){for(u=0;u<r.groups.length;u++)if(r.groups[u]===t){r.groups.splice(u,1);break}return f.reDraw(),f.onchange(),!1})),t.groups!==undefined)for(u=0;u<t.groups.length;u++)l=n("<tr><\/tr>"),o.append(l),k=n("<td class='first'><\/td>"),l.append(k),w=n("<td colspan='4'><\/td>"),w.append(this.createTableForGroup(t.groups[u],t)),l.append(w);if(t.groupOp===undefined&&(t.groupOp=f.p.groupOps[0]),t.rules!==undefined)for(u=0;u<t.rules.length;u++)o.append(this.createTableRowForRule(t.rules[u],t));return o};this.createTableRowForRule=function(t,r){var u=this,c=n("<tr><\/tr>"),e,h,l,o,v="",y,b,p,s,a,k,d,g,w,nt,tt,it;for(c.append("<td class='first'><\/td>"),b=n("<td class='columns'><\/td>"),c.append(b),p=n("<select><\/select>"),a=[],b.append(p),p.bind("change",function(){var i,c,r;for(t.field=n(p).val(),l=n(this).parents("tr:first"),e=0;e<u.p.columns.length;e++)if(u.p.columns[e].name===t.field){o=u.p.columns[e];break}if(o){for(o.searchoptions.id=n.jgrid.randId(),f&&o.inputtype==="text"&&(o.searchoptions.size||(o.searchoptions.size=10)),i=n.jgrid.createEl(o.inputtype,o.searchoptions,"",!0,u.p.ajaxSelectOptions,!0),n(i).addClass("input-elm"),h=o.searchoptions.sopt?o.searchoptions.sopt:u.p.sopt?u.p.sopt:o.searchtype==="string"?u.p.stropts:u.p.numopts,c="",r="",a=[],n.each(u.p.ops,function(){a.push(this.name)}),e=0;e<h.length;e++)s=n.inArray(h[e],a),s!==-1&&(r="",e===0&&(t.op=u.p.ops[s].name,r=" selected='selected'"),c+="<option value='"+u.p.ops[s].name+"'"+r+">"+u.p.ops[s].description+"<\/option>");n(".selectopts",l).empty().append(c);n(".data",l).empty().append(i);n(".input-elm",l).bind("change",function(){t.data=n(this).val();u.onchange()});setTimeout(function(){t.data=n(i).val();u.onchange()},0)}}),k=0,e=0;e<u.p.columns.length;e++){var rt=typeof u.p.columns[e].search=="undefined"?!0:u.p.columns[e].search,ut=u.p.columns[e].hidden===!0,ft=u.p.columns[e].searchoptions.searchhidden===!0;(ft&&rt||rt&&!ut)&&(y="",t.field===u.p.columns[e].name&&(y=" selected='selected'",k=e),v+="<option value='"+u.p.columns[e].name+"'"+y+">"+u.p.columns[e].label+"<\/option>")}for(p.append(v),d=n("<td class='operators'><\/td>"),c.append(d),o=i.columns[k],o.searchoptions.id=n.jgrid.randId(),f&&o.inputtype==="text"&&(o.searchoptions.size||(o.searchoptions.size=10)),g=n.jgrid.createEl(o.inputtype,o.searchoptions,t.data,!0,u.p.ajaxSelectOptions,!0),w=n("<select class='selectopts'><\/select>"),d.append(w),w.bind("change",function(){t.op=n(w).val();l=n(this).parents("tr:first");var i=n(".input-elm",l)[0];t.op==="nu"||t.op==="nn"?(t.data="",i.value="",i.setAttribute("readonly","true"),i.setAttribute("disabled","true")):(i.removeAttribute("readonly"),i.removeAttribute("disabled"));u.onchange()}),h=o.searchoptions.sopt?o.searchoptions.sopt:u.p.sopt?u.p.sopt:o.searchtype==="string"?i.stropts:u.p.numopts,v="",n.each(u.p.ops,function(){a.push(this.name)}),e=0;e<h.length;e++)s=n.inArray(h[e],a),s!==-1&&(y=t.op===u.p.ops[s].name?" selected='selected'":"",v+="<option value='"+u.p.ops[s].name+"'"+y+">"+u.p.ops[s].description+"<\/option>");return w.append(v),nt=n("<td class='data'><\/td>"),c.append(nt),nt.append(g),n(g).addClass("input-elm").bind("change",function(){t.data=n(this).val();u.onchange()}),tt=n("<td><\/td>"),c.append(tt),this.p.ruleButtons===!0&&(it=n("<input type='button' value='-' title='Delete rule' class='delete-rule ui-del'/>"),tt.append(it),it.bind("click",function(){for(e=0;e<r.rules.length;e++)if(r.rules[e]===t){r.rules.splice(e,1);break}return u.reDraw(),u.onchange(),!1})),c};this.getStringForGroup=function(n){var t="(",i;if(n.groups!==undefined)for(i=0;i<n.groups.length;i++){t.length>1&&(t+=" "+n.groupOp+" ");try{t+=this.getStringForGroup(n.groups[i])}catch(r){alert(r)}}if(n.rules!==undefined)try{for(i=0;i<n.rules.length;i++)t.length>1&&(t+=" "+n.groupOp+" "),t+=this.getStringForRule(n.rules[i])}catch(u){alert(u)}return t+=")",t==="()"?"":t};this.getStringForRule=function(t){for(var o="",r="",s,f,u=0;u<this.p.ops.length;u++)if(this.p.ops[u].name===t.op){o=this.p.ops[u].operator;r=this.p.ops[u].name;break}for(u=0;u<this.p.columns.length;u++)if(this.p.columns[u].name===t.field){s=this.p.columns[u];break}return f=t.data,(r==="bw"||r==="bn")&&(f=f+"%"),(r==="ew"||r==="en")&&(f="%"+f),(r==="cn"||r==="nc")&&(f="%"+f+"%"),(r==="in"||r==="ni")&&(f=" ("+f+")"),i.errorcheck&&e(t.data,s),n.inArray(s.searchtype,["int","integer","float","number","currency"])!==-1||r==="nn"||r==="nu"?t.field+" "+o+" "+f:t.field+" "+o+' "'+f+'"'};this.resetFilter=function(){this.p.filter=n.extend(!0,{},this.p.initFilter);this.reDraw();this.onchange()};this.hideError=function(){n("th.ui-state-error",this).html("");n("tr.error",this).hide()};this.showError=function(){n("th.ui-state-error",this).html(this.p.errmsg);n("tr.error",this).show()};this.toUserFriendlyString=function(){return this.getStringForGroup(i.filter)};this.toString=function(){function i(t){if(n.p.errorcheck){for(var r,i=0;i<n.p.columns.length;i++)if(n.p.columns[i].name===t.field){r=n.p.columns[i];break}r&&e(t.data,r)}return t.op+"(item."+t.field+",'"+t.data+"')"}function t(n){var r="(",u;if(n.groups!==undefined)for(u=0;u<n.groups.length;u++)r.length>1&&(r+=n.groupOp==="OR"?" || ":" && "),r+=t(n.groups[u]);if(n.rules!==undefined)for(u=0;u<n.rules.length;u++)r.length>1&&(r+=n.groupOp==="OR"?" || ":" && "),r+=i(n.rules[u]);return r+=")",r==="()"?"":r}var n=this;return t(this.p.filter)};this.reDraw();this.p.showQuery&&this.onchange();this.filter=!0}}})};n.extend(n.fn.jqFilter,{toSQLString:function(){var n="";return this.each(function(){n=this.toUserFriendlyString()}),n},filterData:function(){var n;return this.each(function(){n=this.p.filter}),n},getParameter:function(n){return n!==undefined&&this.p.hasOwnProperty(n)?this.p[n]:this.p},resetFilter:function(){return this.each(function(){this.resetFilter()})},addFilter:function(n){typeof n=="string"&&(n=jQuery.jgrid.parse(n));this.each(function(){this.p.filter=n;this.reDraw();this.onchange()})}})}(jQuery);(function(n){var t={};n.jgrid.extend({searchGrid:function(t){return t=n.extend({recreateFilter:!1,drag:!0,sField:"searchField",sValue:"searchString",sOper:"searchOper",sFilter:"filters",loadDefaults:!0,beforeShowSearch:null,afterShowSearch:null,onInitializeSearch:null,afterRedraw:null,closeAfterSearch:!1,closeAfterReset:!1,closeOnEscape:!1,multipleSearch:!1,multipleGroup:!1,top:0,left:0,jqModal:!0,modal:!1,resize:!0,width:450,height:"auto",dataheight:"auto",showQuery:!1,errorcheck:!0,sopt:null,stringResult:undefined,onClose:null,onSearch:null,onReset:null,toTop:!0,overlay:30,columns:[],tmplNames:null,tmplFilters:null,tmplLabel:" Template: ",showOnLoad:!1,layer:null},n.jgrid.search,t||{}),this.each(function(){function p(){n.isFunction(t.beforeShowSearch)&&(l=t.beforeShowSearch(n("#"+i)),typeof l=="undefined"&&(l=!0));l&&(n.jgrid.viewModal("#"+e.themodal,{gbox:"#gbox_"+i,jqm:t.jqModal,modal:t.modal,overlay:t.overlay,toTop:t.toTop}),n.isFunction(t.afterShowSearch)&&t.afterShowSearch(n("#"+i)))}var r=this,u,a;if(r.grid){var i="fbox_"+r.p.id,l=!0,e={themodal:"searchmod"+i,modalhead:"searchhd"+i,modalcontent:"searchcnt"+i,scrollelm:i},f=r.p.postData[t.sFilter];if(typeof f=="string"&&(f=n.jgrid.parse(f)),t.recreateFilter===!0&&n("#"+e.themodal).remove(),n("#"+e.themodal).html()!==null)p();else{if(u=n("<span><div id='"+i+"' class='searchFilter' style='overflow:auto'><\/div><\/span>").insertBefore("#gview_"+r.p.id),n.isFunction(t.onInitializeSearch))t.onInitializeSearch(n("#"+i));var o=n.extend([],r.p.colModel),b="<a href='javascript:void(0)' id='"+i+"_search' class='fm-button ui-state-default ui-corner-all fm-button-icon-right ui-reset'><span class='ui-icon ui-icon-search'><\/span>"+t.Find+"<\/a>",k="<a href='javascript:void(0)' id='"+i+"_reset' class='fm-button ui-state-default ui-corner-all fm-button-icon-left ui-search'><span class='ui-icon ui-icon-arrowreturnthick-1-w'><\/span>"+t.Reset+"<\/a>",v="",s="",y,h=!1,w,c=-1;if(t.showQuery&&(v="<a href='javascript:void(0)' id='"+i+"_query' class='fm-button ui-state-default ui-corner-all fm-button-icon-left'><span class='ui-icon ui-icon-comment'><\/span>Query<\/a>"),t.columns.length?o=t.columns:n.each(o,function(n,t){if(t.label||(t.label=r.p.colNames[n]),!h){var i=typeof t.search=="undefined"?!0:t.search,u=t.hidden===!0,f=t.searchoptions&&t.searchoptions.searchhidden===!0;(f&&i||i&&!u)&&(h=!0,y=t.index||t.name,c=n)}}),(!f&&y||t.multipleSearch===!1)&&(a="eq",c>=0&&o[c].searchoptions&&o[c].searchoptions.sopt?a=o[c].searchoptions.sopt[0]:t.sopt&&t.sopt.length&&(a=t.sopt[0]),f={groupOp:"AND",rules:[{field:y,op:a,data:""}]}),h=!1,t.tmplNames&&t.tmplNames.length&&(h=!0,s=t.tmplLabel,s+="<select class='ui-template'>",s+="<option value='default'>Default<\/option>",n.each(t.tmplNames,function(n,t){s+="<option value='"+n+"'>"+t+"<\/option>"}),s+="<\/select>"),w="<table class='EditTable' style='border:0px none;margin-top:5px' id='"+i+"_2'><tbody><tr><td colspan='2'><hr class='ui-widget-content' style='margin:1px'/><\/td><\/tr><tr><td class='EditButton' style='text-align:left'>"+k+s+"<\/td><td class='EditButton'>"+v+b+"<\/td><\/tr><\/tbody><\/table>",n("#"+i).jqFilter({columns:o,filter:t.loadDefaults?f:null,showQuery:t.showQuery,errorcheck:t.errorcheck,sopt:t.sopt,groupButton:t.multipleGroup,ruleButtons:t.multipleSearch,afterRedraw:t.afterRedraw,_gridsopt:n.jgrid.search.odata,onChange:function(){this.p.showQuery&&n(".query",this).html(this.toUserFriendlyString())}}),u.append(w),h&&t.tmplFilters&&t.tmplFilters.length&&n(".ui-template",u).bind("change",function(){var r=n(this).val();return r=="default"?n("#"+i).jqFilter("addFilter",f):n("#"+i).jqFilter("addFilter",t.tmplFilters[parseInt(r,10)]),!1}),t.multipleGroup===!0&&(t.multipleSearch=!0),n.isFunction(t.onInitializeSearch))t.onInitializeSearch(n("#"+i));t.layer?n.jgrid.createModal(e,u,t,"#gview_"+r.p.id,n("#gbox_"+r.p.id)[0],"#"+t.layer,{position:"relative"}):n.jgrid.createModal(e,u,t,"#gview_"+r.p.id,n("#gbox_"+r.p.id)[0]);v&&n("#"+i+"_query").bind("click",function(){return n(".queryresult",u).toggle(),!1});t.stringResult===undefined&&(t.stringResult=t.multipleSearch);n("#"+i+"_search").bind("click",function(){var o=n("#"+i),u={},s,f=o.jqFilter("filterData");if(t.errorcheck&&(o[0].hideError(),t.showQuery||o.jqFilter("toSQLString"),o[0].p.error))return o[0].showError(),!1;if(t.stringResult){try{s=xmlJsonClass.toJson(f,"","",!1)}catch(h){try{s=JSON.stringify(f)}catch(c){}}typeof s=="string"&&(u[t.sFilter]=s,n.each([t.sField,t.sValue,t.sOper],function(){u[this]=""}))}else t.multipleSearch?(u[t.sFilter]=f,n.each([t.sField,t.sValue,t.sOper],function(){u[this]=""})):(u[t.sField]=f.rules[0].field,u[t.sValue]=f.rules[0].data,u[t.sOper]=f.rules[0].op,u[t.sFilter]="");return r.p.search=!0,n.extend(r.p.postData,u),n.isFunction(t.onSearch)&&t.onSearch(),n(r).trigger("reloadGrid",[{page:1}]),t.closeAfterSearch&&n.jgrid.hideModal("#"+e.themodal,{gb:"#gbox_"+r.p.id,jqm:t.jqModal,onClose:t.onClose}),!1});n("#"+i+"_reset").bind("click",function(){var f={},e=n("#"+i);return r.p.search=!1,t.multipleSearch===!1?f[t.sField]=f[t.sValue]=f[t.sOper]="":f[t.sFilter]="",e[0].resetFilter(),h&&n(".ui-template",u).val("default"),n.extend(r.p.postData,f),n.isFunction(t.onReset)&&t.onReset(),n(r).trigger("reloadGrid",[{page:1}]),!1});p();n(".fm-button:not(.ui-state-disabled)",u).hover(function(){n(this).addClass("ui-state-hover")},function(){n(this).removeClass("ui-state-hover")})}}})},editGridRow:function(r,u){return u=n.extend({top:0,left:0,width:300,height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,url:null,mtype:"POST",clearAfterAdd:!0,closeAfterEdit:!1,reloadAfterSubmit:!0,onInitializeForm:null,beforeInitData:null,beforeShowForm:null,afterShowForm:null,beforeSubmit:null,afterSubmit:null,onclickSubmit:null,afterComplete:null,onclickPgButtons:null,afterclickPgButtons:null,editData:{},recreateForm:!1,jqModal:!0,closeOnEscape:!1,addedrow:"first",topinfo:"",bottominfo:"",saveicon:[],closeicon:[],savekey:[!1,13],navkeys:[!1,38,40],checkOnSubmit:!1,checkOnUpdate:!1,_savedData:{},processing:!1,onClose:null,ajaxEditOptions:{},serializeEditData:null,viewPagerButtons:!0},n.jgrid.edit,u||{}),t[n(this)[0].p.id]=u,this.each(function(){function kt(){return n("#"+o+" > tbody > tr > td > .FormElement").each(function(){var r=n(".customelement",this),u,t,s,i;if(r.length)u=r[0],t=n(u).attr("name"),n.each(f.p.colModel,function(){if(this.name===t&&this.editoptions&&n.isFunction(this.editoptions.custom_value)){try{if(e[t]=this.editoptions.custom_value(n("#"+n.jgrid.jqID(t),"#"+o),"get"),e[t]===undefined)throw"e1";}catch(i){i==="e1"?n.jgrid.info_dialog(jQuery.jgrid.errors.errcap,"function 'custom_value' "+n.jgrid.edit.msg.novalue,jQuery.jgrid.edit.bClose):n.jgrid.info_dialog(jQuery.jgrid.errors.errcap,i.message,jQuery.jgrid.edit.bClose)}return!0}});else{switch(n(this).get(0).type){case"checkbox":n(this).attr("checked")?e[this.name]=n(this).val():(s=n(this).attr("offval"),e[this.name]=s);break;case"select-one":e[this.name]=n("option:selected",this).val();l[this.name]=n("option:selected",this).text();break;case"select-multiple":e[this.name]=n(this).val();e[this.name]=e[this.name]?e[this.name].join(","):"";i=[];n("option:selected",this).each(function(t,r){i[t]=n(r).text()});l[this.name]=i.join(",");break;case"password":case"text":case"textarea":case"button":e[this.name]=n(this).val()}f.p.autoencode&&(e[this.name]=n.jgrid.htmlEncode(e[this.name]))}}),!0}function ri(i,r,u,e){for(var s,v,h,a=0,o,w,c,b=[],l=!1,k="",p,y=1;y<=e;y++)k+="<td class='CaptionTD'>&#160;<\/td><td class='DataTD'>&#160;<\/td>";return i!="_empty"&&(l=n(r).jqGrid("getInd",i)),n(r.p.colModel).each(function(y){var nt;if(s=this.name,v=this.editrules&&this.editrules.edithidden===!0?!1:this.hidden===!0?!0:!1,w=v?"style='display:none'":"",s!=="cb"&&s!=="subgrid"&&this.editable===!0&&s!=="rn"){if(l===!1)o="";else if(s==r.p.ExpandColumn&&r.p.treeGrid===!0)o=n("td:eq("+y+")",r.rows[l]).text();else{try{o=n.unformat(n("td:eq("+y+")",r.rows[l]),{rowId:i,colModel:this},y)}catch(it){o=this.edittype&&this.edittype=="textarea"?n("td:eq("+y+")",r.rows[l]).text():n("td:eq("+y+")",r.rows[l]).html()}o&&o!="&nbsp;"&&o!="&#160;"&&(o.length!=1||o.charCodeAt(0)!=160)||(o="")}var d=n.extend({},this.editoptions||{},{id:s,name:s}),p=n.extend({},{elmprefix:"",elmsuffix:"",rowabove:!1,rowcontent:""},this.formoptions||{}),g=parseInt(p.rowpos,10)||a+1,tt=parseInt((parseInt(p.colpos,10)||1)*2,10);i=="_empty"&&d.defaultValue&&(o=n.isFunction(d.defaultValue)?d.defaultValue():d.defaultValue);this.edittype||(this.edittype="text");f.p.autoencode&&(o=n.jgrid.htmlDecode(o));c=n.jgrid.createEl(this.edittype,d,o,!1,n.extend({},n.jgrid.ajaxOptions,r.p.ajaxSelectOptions||{}));o===""&&this.edittype=="checkbox"&&(o=n(c).attr("offval"));o===""&&this.edittype=="select"&&(o=n("option:eq(0)",c).text());(t[f.p.id].checkOnSubmit||t[f.p.id].checkOnUpdate)&&(t[f.p.id]._savedData[s]=o);n(c).addClass("FormElement");(this.edittype=="text"||this.edittype=="textarea")&&n(c).addClass("ui-widget-content ui-corner-all");h=n(u).find("tr[rowpos="+g+"]");p.rowabove&&(nt=n("<tr><td class='contentinfo' colspan='"+e*2+"'>"+p.rowcontent+"<\/td><\/tr>"),n(u).append(nt),nt[0].rp=g);h.length===0&&(h=n("<tr "+w+" rowpos='"+g+"'><\/tr>").addClass("FormData").attr("id","tr_"+s),n(h).append(k),n(u).append(h),h[0].rp=g);n("td:eq("+(tt-2)+")",h[0]).html(typeof p.label=="undefined"?r.p.colNames[y]:p.label);n("td:eq("+(tt-1)+")",h[0]).append(p.elmprefix).append(c).append(p.elmsuffix);b[a]=y;a++}}),a>0&&(p=n("<tr class='FormData' style='display:none'><td class='CaptionTD'><\/td><td colspan='"+(e*2-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='"+r.p.id+"_id' value='"+i+"'/><\/td><\/tr>"),p[0].rp=a+999,n(u).append(p),(t[f.p.id].checkOnSubmit||t[f.p.id].checkOnUpdate)&&(t[f.p.id]._savedData[r.p.id+"_id"]=i)),b}function it(i,r,u){var e,p=0,s,h,a,l,v,c,y;if((t[f.p.id].checkOnSubmit||t[f.p.id].checkOnUpdate)&&(t[f.p.id]._savedData={},t[f.p.id]._savedData[r.p.id+"_id"]=i),c=r.p.colModel,i=="_empty"){n(c).each(function(){e=this.name;a=n.extend({},this.editoptions||{});h=n("#"+n.jgrid.jqID(e),"#"+u);h&&h.length&&h[0]!==null&&(l="",a.defaultValue?(l=n.isFunction(a.defaultValue)?a.defaultValue():a.defaultValue,h[0].type=="checkbox"?(v=l.toLowerCase(),v.search(/(false|0|no|off|undefined)/i)<0&&v!==""?(h[0].checked=!0,h[0].defaultChecked=!0,h[0].value=l):h.attr({checked:"",defaultChecked:""})):h.val(l)):h[0].type=="checkbox"?(h[0].checked=!1,h[0].defaultChecked=!1,l=n(h).attr("offval")):h[0].type&&h[0].type.substr(0,6)=="select"?h[0].selectedIndex=0:h.val(l),(t[f.p.id].checkOnSubmit===!0||t[f.p.id].checkOnUpdate)&&(t[f.p.id]._savedData[e]=l))});n("#id_g","#"+u).val(i);return}(y=n(r).jqGrid("getInd",i,!0),y)&&(n("td",y).each(function(o){var h,l;if(e=c[o].name,e!=="cb"&&e!=="subgrid"&&e!=="rn"&&c[o].editable===!0){if(e==r.p.ExpandColumn&&r.p.treeGrid===!0)s=n(this).text();else try{s=n.unformat(n(this),{rowId:i,colModel:c[o]},o)}catch(v){s=c[o].edittype=="textarea"?n(this).text():n(this).html()}f.p.autoencode&&(s=n.jgrid.htmlDecode(s));(t[f.p.id].checkOnSubmit===!0||t[f.p.id].checkOnUpdate)&&(t[f.p.id]._savedData[e]=s);e=n.jgrid.jqID(e);switch(c[o].edittype){case"password":case"text":case"button":case"image":case"textarea":(s=="&nbsp;"||s=="&#160;"||s.length==1&&s.charCodeAt(0)==160)&&(s="");n("#"+e,"#"+u).val(s);break;case"select":h=s.split(",");h=n.map(h,function(t){return n.trim(t)});n("#"+e+" option","#"+u).each(function(){this.selected=c[o].editoptions.multiple||h[0]!=n.trim(n(this).text())&&h[0]!=n.trim(n(this).val())?c[o].editoptions.multiple?n.inArray(n.trim(n(this).text()),h)>-1||n.inArray(n.trim(n(this).val()),h)>-1?!0:!1:!1:!0});break;case"checkbox":s=s+"";c[o].editoptions&&c[o].editoptions.value?(l=c[o].editoptions.value.split(":"),l[0]==s?(n("#"+e,"#"+u).attr("checked",!0),n("#"+e,"#"+u).attr("defaultChecked",!0)):(n("#"+e,"#"+u).attr("checked",!1),n("#"+e,"#"+u).attr("defaultChecked",""))):(s=s.toLowerCase(),s.search(/(false|0|no|off|undefined)/i)<0&&s!==""?(n("#"+e,"#"+u).attr("checked",!0),n("#"+e,"#"+u).attr("defaultChecked",!0)):(n("#"+e,"#"+u).attr("checked",!1),n("#"+e,"#"+u).attr("defaultChecked","")));break;case"custom":try{if(c[o].editoptions&&n.isFunction(c[o].editoptions.custom_value))c[o].editoptions.custom_value(n("#"+e,"#"+u),"set",s);else throw"e1";}catch(a){a=="e1"?n.jgrid.info_dialog(jQuery.jgrid.errors.errcap,"function 'custom_value' "+n.jgrid.edit.msg.nodefined,jQuery.jgrid.edit.bClose):n.jgrid.info_dialog(jQuery.jgrid.errors.errcap,a.message,jQuery.jgrid.edit.bClose)}}p++}}),p>0&&n("#id_g","#"+o).val(i))}function rt(){var d,r=[!0,"",""],nt={},a=f.p.prmNames,v,y,w,p,b,tt,g,k;n.isFunction(t[f.p.id].beforeCheckValues)&&(b=t[f.p.id].beforeCheckValues(e,n("#"+s),e[f.p.id+"_id"]=="_empty"?a.addoper:a.editoper),b&&typeof b=="object"&&(e=b));for(w in e)if(e.hasOwnProperty(w)&&(r=n.jgrid.checkValues(e[w],w,f),r[0]===!1))break;if(ui(),r[0]&&(n.isFunction(t[f.p.id].onclickSubmit)&&(nt=t[f.p.id].onclickSubmit(t[f.p.id],e)||{}),n.isFunction(t[f.p.id].beforeSubmit)&&(r=t[f.p.id].beforeSubmit(e,n("#"+s)))),r[0]&&!t[f.p.id].processing){if(t[f.p.id].processing=!0,n("#sData","#"+o+"_2").addClass("ui-state-active"),y=a.oper,v=a.id,e[y]=n.trim(e[f.p.id+"_id"])=="_empty"?a.addoper:a.editoper,e[y]!=a.addoper?e[v]=e[f.p.id+"_id"]:e[v]===undefined&&(e[v]=e[f.p.id+"_id"]),delete e[f.p.id+"_id"],e=n.extend(e,t.editData,nt),f.p.treeGrid===!0){e[y]==a.addoper&&(p=n(f).jqGrid("getGridParam","selrow"),tt=f.p.treeGridModel=="adjacency"?f.p.treeReader.parent_id_field:"parent_id",e[tt]=p);for(i in f.p.treeReader)if(g=f.p.treeReader[i],e.hasOwnProperty(g)){if(e[y]==a.addoper&&i==="parent_id_field")continue;delete e[g]}}k=n.extend({url:t[f.p.id].url?t[f.p.id].url:n(f).jqGrid("getGridParam","editurl"),type:t[f.p.id].mtype,data:n.isFunction(t[f.p.id].serializeEditData)?t[f.p.id].serializeEditData(e):e,complete:function(i,w){if(w!="success"?(r[0]=!1,r[1]=n.isFunction(t[f.p.id].errorTextFormat)?t[f.p.id].errorTextFormat(i):w+" Status: '"+i.statusText+"'. Error code: "+i.status):n.isFunction(t[f.p.id].afterSubmit)&&(r=t[f.p.id].afterSubmit(i,e)),r[0]===!1)n("#FormError>td","#"+o).html(r[1]),n("#FormError","#"+o).show();else if(n.each(f.p.colModel,function(){if(l[this.name]&&this.formatter&&this.formatter=="select")try{delete l[this.name]}catch(n){}}),e=n.extend(e,l),f.p.autoencode&&n.each(e,function(t,i){e[t]=n.jgrid.htmlDecode(i)}),e[y]==a.addoper?(r[2]||(r[2]=n.jgrid.randId()),e[v]=r[2],t[f.p.id].closeAfterAdd?(t[f.p.id].reloadAfterSubmit?n(f).trigger("reloadGrid"):f.p.treeGrid===!0?n(f).jqGrid("addChildNode",r[2],p,e):(n(f).jqGrid("addRowData",r[2],e,u.addedrow),n(f).jqGrid("setSelection",r[2])),n.jgrid.hideModal("#"+h.themodal,{gb:"#gbox_"+c,jqm:u.jqModal,onClose:t[f.p.id].onClose})):t[f.p.id].clearAfterAdd?(t[f.p.id].reloadAfterSubmit?n(f).trigger("reloadGrid"):f.p.treeGrid===!0?n(f).jqGrid("addChildNode",r[2],p,e):n(f).jqGrid("addRowData",r[2],e,u.addedrow),it("_empty",f,s)):t[f.p.id].reloadAfterSubmit?n(f).trigger("reloadGrid"):f.p.treeGrid===!0?n(f).jqGrid("addChildNode",r[2],p,e):n(f).jqGrid("addRowData",r[2],e,u.addedrow)):(t[f.p.id].reloadAfterSubmit?(n(f).trigger("reloadGrid"),t[f.p.id].closeAfterEdit||setTimeout(function(){n(f).jqGrid("setSelection",e[v])},1e3)):f.p.treeGrid===!0?n(f).jqGrid("setTreeRow",e[v],e):n(f).jqGrid("setRowData",e[v],e),t[f.p.id].closeAfterEdit&&n.jgrid.hideModal("#"+h.themodal,{gb:"#gbox_"+c,jqm:u.jqModal,onClose:t[f.p.id].onClose})),n.isFunction(t[f.p.id].afterComplete)&&(d=i,setTimeout(function(){t[f.p.id].afterComplete(d,e,n("#"+s));d=null},500)),(t[f.p.id].checkOnSubmit||t[f.p.id].checkOnUpdate)&&(n("#"+s).data("disabled",!1),t[f.p.id]._savedData[f.p.id+"_id"]!="_empty"))for(var b in t[f.p.id]._savedData)e[b]&&(t[f.p.id]._savedData[b]=e[b]);t[f.p.id].processing=!1;n("#sData","#"+o+"_2").removeClass("ui-state-active");try{n(":input:visible","#"+s)[0].focus()}catch(k){}}},n.jgrid.ajaxOptions,t[f.p.id].ajaxEditOptions);k.url||t[f.p.id].useDataProxy||(n.isFunction(f.p.dataProxy)?t[f.p.id].useDataProxy=!0:(r[0]=!1,r[1]+=" "+n.jgrid.errors.nourl));r[0]&&(t[f.p.id].useDataProxy?f.p.dataProxy.call(f,k,"set_"+f.p.id):n.ajax(k))}r[0]===!1&&(n("#FormError>td","#"+o).html(r[1]),n("#FormError","#"+o).show())}function dt(n,t){var i=!1;for(var r in n)if(n[r]!=t[r]){i=!0;break}return i}function ui(){n.each(f.p.colModel,function(n,t){t.editoptions&&t.editoptions.NullIfEmpty===!0&&e.hasOwnProperty(t.name)&&e[t.name]==""&&(e[t.name]="null")})}function v(){var i=!0;return n("#FormError","#"+o).hide(),t[f.p.id].checkOnUpdate&&(e={},l={},kt(),g=n.extend({},e,l),nt=dt(g,t[f.p.id]._savedData),nt&&(n("#"+s).data("disabled",!0),n(".confirm","#"+h.themodal).show(),i=!1)),i}function gt(){if(r!=="_empty"&&typeof f.p.savedRow!="undefined"&&f.p.savedRow.length>0&&n.isFunction(n.fn.jqGrid.restoreRow))for(var t=0;t<f.p.savedRow.length;t++)if(f.p.savedRow[t].id==r){n(f).jqGrid("restoreRow",r);break}}function ct(t,i){t===0?n("#pData","#"+o+"_2").addClass("ui-state-disabled"):n("#pData","#"+o+"_2").removeClass("ui-state-disabled");t==i?n("#nData","#"+o+"_2").addClass("ui-state-disabled"):n("#nData","#"+o+"_2").removeClass("ui-state-disabled")}function lt(){var t=n(f).jqGrid("getDataIDs"),i=n("#id_g","#"+o).val(),r=n.inArray(i,t);return[r,t]}var f=this,tt,p,ot,yt,pt,ii,st,wt;if(f.grid&&r){var c=f.p.id,s="FrmGrid_"+c,o="TblGrid_"+c,h={themodal:"editmod"+c,modalhead:"edithd"+c,modalcontent:"editcnt"+c,scrollelm:s},b=n.isFunction(t[f.p.id].beforeShowForm)?t[f.p.id].beforeShowForm:!1,k=n.isFunction(t[f.p.id].afterShowForm)?t[f.p.id].afterShowForm:!1,d=n.isFunction(t[f.p.id].beforeInitData)?t[f.p.id].beforeInitData:!1,bt=n.isFunction(t[f.p.id].onInitializeForm)?t[f.p.id].onInitializeForm:!1,a=!0,w=1,ht=0,e,l,g,nt;if(r==="new"?(r="_empty",u.caption=t[f.p.id].addCaption):u.caption=t[f.p.id].editCaption,u.recreateForm===!0&&n("#"+h.themodal).html()!==null&&n("#"+h.themodal).remove(),tt=!0,u.checkOnUpdate&&u.jqModal&&!u.modal&&(tt=!1),n("#"+h.themodal).html()!==null){if(d&&(a=d(n("#"+s)),typeof a=="undefined"&&(a=!0)),a===!1)return;gt();n(".ui-jqdialog-title","#"+h.modalhead).html(u.caption);n("#FormError","#"+o).hide();t[f.p.id].topinfo?(n(".topinfo","#"+o+"_2").html(t[f.p.id].topinfo),n(".tinfo","#"+o+"_2").show()):n(".tinfo","#"+o+"_2").hide();t[f.p.id].bottominfo?(n(".bottominfo","#"+o+"_2").html(t[f.p.id].bottominfo),n(".binfo","#"+o+"_2").show()):n(".binfo","#"+o+"_2").hide();it(r,f,s);r!="_empty"&&t[f.p.id].viewPagerButtons?n("#pData, #nData","#"+o+"_2").show():n("#pData, #nData","#"+o+"_2").hide();t[f.p.id].processing===!0&&(t[f.p.id].processing=!1,n("#sData","#"+o+"_2").removeClass("ui-state-active"));n("#"+s).data("disabled")===!0&&(n(".confirm","#"+h.themodal).hide(),n("#"+s).data("disabled",!1));b&&b(n("#"+s));n("#"+h.themodal).data("onClose",t[f.p.id].onClose);n.jgrid.viewModal("#"+h.themodal,{gbox:"#gbox_"+c,jqm:u.jqModal,jqM:!1,overlay:u.overlay,modal:u.modal});tt||n(".jqmOverlay").click(function(){return v()?(n.jgrid.hideModal("#"+h.themodal,{gb:"#gbox_"+c,jqm:u.jqModal,onClose:t[f.p.id].onClose}),!1):!1});k&&k(n("#"+s))}else{var fi=isNaN(u.dataheight)?u.dataheight:u.dataheight+"px",ni=n("<form name='FormPost' id='"+s+"' class='FormGrid' onSubmit='return false;' style='width:100%;overflow:auto;position:relative;height:"+fi+";'><\/form>").data("disabled",!1),y=n("<table id='"+o+"' class='EditTable' cellspacing='0' cellpadding='0' border='0'><tbody><\/tbody><\/table>");if(d&&(a=d(n("#"+s)),typeof a=="undefined"&&(a=!0)),a===!1)return;gt();n(f.p.colModel).each(function(){var n=this.formoptions;w=Math.max(w,n?n.colpos||0:0);ht=Math.max(ht,n?n.rowpos||0:0)});n(ni).append(y);p=n("<tr id='FormError' style='display:none'><td class='ui-state-error' colspan='"+w*2+"'><\/td><\/tr>");p[0].rp=0;n(y).append(p);p=n("<tr style='display:none' class='tinfo'><td class='topinfo' colspan='"+w*2+"'>"+t[f.p.id].topinfo+"<\/td><\/tr>");p[0].rp=0;n(y).append(p);var ut=f.p.direction=="rtl"?!0:!1,ei=ut?"nData":"pData",oi=ut?"pData":"nData";ri(r,f,y,w);var ti="<a href='javascript:void(0)' id='"+ei+"' class='fm-button ui-state-default ui-corner-left'><span class='ui-icon ui-icon-triangle-1-w'><\/span><\/a>",ft="<a href='javascript:void(0)' id='"+oi+"' class='fm-button ui-state-default ui-corner-right'><span class='ui-icon ui-icon-triangle-1-e'><\/span><\/a>",at="<a href='javascript:void(0)' id='sData' class='fm-button ui-state-default ui-corner-all'>"+u.bSubmit+"<\/a>",vt="<a href='javascript:void(0)' id='cData' class='fm-button ui-state-default ui-corner-all'>"+u.bCancel+"<\/a>",et="<table border='0' cellspacing='0' cellpadding='0' class='EditTable' id='"+o+"_2'><tbody><tr><td colspan='2'><hr class='ui-widget-content' style='margin:1px'/><\/td><\/tr><tr id='Act_Buttons'><td class='navButton'>"+(ut?ft+ti:ti+ft)+"<\/td><td class='EditButton'>"+at+vt+"<\/td><\/tr>";et+="<tr style='display:none' class='binfo'><td class='bottominfo' colspan='2'>"+t[f.p.id].bottominfo+"<\/td><\/tr>";et+="<\/tbody><\/table>";ht>0&&(ot=[],n.each(n(y)[0].rows,function(n,t){ot[n]=t}),ot.sort(function(n,t){return n.rp>t.rp?1:n.rp<t.rp?-1:0}),n.each(ot,function(t,i){n("tbody",y).append(i)}));u.gbox="#gbox_"+c;yt=!1;u.closeOnEscape===!0&&(u.closeOnEscape=!1,yt=!0);pt=n("<span><\/span>").append(ni).append(et);n.jgrid.createModal(h,pt,u,"#gview_"+f.p.id,n("#gbox_"+f.p.id)[0]);ut&&(n("#pData, #nData","#"+o+"_2").css("float","right"),n(".EditButton","#"+o+"_2").css("text-align","left"));t[f.p.id].topinfo&&n(".tinfo","#"+o+"_2").show();t[f.p.id].bottominfo&&n(".binfo","#"+o+"_2").show();pt=null;et=null;n("#"+h.themodal).keydown(function(i){var r=i.target;if(n("#"+s).data("disabled")===!0)return!1;if(t[f.p.id].savekey[0]===!0&&i.which==t[f.p.id].savekey[1]&&r.tagName!="TEXTAREA")return n("#sData","#"+o+"_2").trigger("click"),!1;if(i.which===27)return v()?(yt&&n.jgrid.hideModal(this,{gb:u.gbox,jqm:u.jqModal,onClose:t[f.p.id].onClose}),!1):!1;if(t[f.p.id].navkeys[0]===!0){if(n("#id_g","#"+o).val()=="_empty")return!0;if(i.which==t[f.p.id].navkeys[1])return n("#pData","#"+o+"_2").trigger("click"),!1;if(i.which==t[f.p.id].navkeys[2])return n("#nData","#"+o+"_2").trigger("click"),!1}});u.checkOnUpdate&&(n("a.ui-jqdialog-titlebar-close span","#"+h.themodal).removeClass("jqmClose"),n("a.ui-jqdialog-titlebar-close","#"+h.themodal).unbind("click").click(function(){return v()?(n.jgrid.hideModal("#"+h.themodal,{gb:"#gbox_"+c,jqm:u.jqModal,onClose:t[f.p.id].onClose}),!1):!1}));u.saveicon=n.extend([!0,"left","ui-icon-disk"],u.saveicon);u.closeicon=n.extend([!0,"left","ui-icon-close"],u.closeicon);u.saveicon[0]===!0&&n("#sData","#"+o+"_2").addClass(u.saveicon[1]=="right"?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+u.saveicon[2]+"'><\/span>");u.closeicon[0]===!0&&n("#cData","#"+o+"_2").addClass(u.closeicon[1]=="right"?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+u.closeicon[2]+"'><\/span>");(t[f.p.id].checkOnSubmit||t[f.p.id].checkOnUpdate)&&(at="<a href='javascript:void(0)' id='sNew' class='fm-button ui-state-default ui-corner-all' style='z-index:1002'>"+u.bYes+"<\/a>",ft="<a href='javascript:void(0)' id='nNew' class='fm-button ui-state-default ui-corner-all' style='z-index:1002'>"+u.bNo+"<\/a>",vt="<a href='javascript:void(0)' id='cNew' class='fm-button ui-state-default ui-corner-all' style='z-index:1002'>"+u.bExit+"<\/a>",st=u.zIndex||999,st++,ii=n.browser.msie&&n.browser.version==6?'<iframe style="display:block;position:absolute;z-index:-1;filter:Alpha(Opacity=\'0\');" src="javascript:false;"><\/iframe>':"",n("<div class='ui-widget-overlay jqgrid-overlay confirm' style='z-index:"+st+";display:none;'>&#160;"+ii+"<\/div><div class='confirm ui-widget-content ui-jqconfirm' style='z-index:"+(st+1)+"'>"+u.saveData+"<br/><br/>"+at+ft+vt+"<\/div>").insertAfter("#"+s),n("#sNew","#"+h.themodal).click(function(){return rt(),n("#"+s).data("disabled",!1),n(".confirm","#"+h.themodal).hide(),!1}),n("#nNew","#"+h.themodal).click(function(){return n(".confirm","#"+h.themodal).hide(),n("#"+s).data("disabled",!1),setTimeout(function(){n(":input","#"+s)[0].focus()},0),!1}),n("#cNew","#"+h.themodal).click(function(){return n(".confirm","#"+h.themodal).hide(),n("#"+s).data("disabled",!1),n.jgrid.hideModal("#"+h.themodal,{gb:"#gbox_"+c,jqm:u.jqModal,onClose:t[f.p.id].onClose}),!1}));bt&&bt(n("#"+s));r!="_empty"&&t[f.p.id].viewPagerButtons?n("#pData,#nData","#"+o+"_2").show():n("#pData,#nData","#"+o+"_2").hide();b&&b(n("#"+s));n("#"+h.themodal).data("onClose",t[f.p.id].onClose);n.jgrid.viewModal("#"+h.themodal,{gbox:"#gbox_"+c,jqm:u.jqModal,overlay:u.overlay,modal:u.modal});tt||n(".jqmOverlay").click(function(){return v()?(n.jgrid.hideModal("#"+h.themodal,{gb:"#gbox_"+c,jqm:u.jqModal,onClose:t[f.p.id].onClose}),!1):!1});k&&k(n("#"+s));n(".fm-button","#"+h.themodal).hover(function(){n(this).addClass("ui-state-hover")},function(){n(this).removeClass("ui-state-hover")});n("#sData","#"+o+"_2").click(function(){return e={},l={},n("#FormError","#"+o).hide(),kt(),e[f.p.id+"_id"]=="_empty"?rt():u.checkOnSubmit===!0?(g=n.extend({},e,l),nt=dt(g,t[f.p.id]._savedData),nt?(n("#"+s).data("disabled",!0),n(".confirm","#"+h.themodal).show()):rt()):rt(),!1});n("#cData","#"+o+"_2").click(function(){return v()?(n.jgrid.hideModal("#"+h.themodal,{gb:"#gbox_"+c,jqm:u.jqModal,onClose:t[f.p.id].onClose}),!1):!1});n("#nData","#"+o+"_2").click(function(){if(!v())return!1;n("#FormError","#"+o).hide();var t=lt();if(t[0]=parseInt(t[0],10),t[0]!=-1&&t[1][t[0]+1]){if(n.isFunction(u.onclickPgButtons))u.onclickPgButtons("next",n("#"+s),t[1][t[0]]);it(t[1][t[0]+1],f,s);n(f).jqGrid("setSelection",t[1][t[0]+1]);n.isFunction(u.afterclickPgButtons)&&u.afterclickPgButtons("next",n("#"+s),t[1][t[0]+1]);ct(t[0]+1,t[1].length-1)}return!1});n("#pData","#"+o+"_2").click(function(){if(!v())return!1;n("#FormError","#"+o).hide();var t=lt();if(t[0]!=-1&&t[1][t[0]-1]){if(n.isFunction(u.onclickPgButtons))u.onclickPgButtons("prev",n("#"+s),t[1][t[0]]);it(t[1][t[0]-1],f,s);n(f).jqGrid("setSelection",t[1][t[0]-1]);n.isFunction(u.afterclickPgButtons)&&u.afterclickPgButtons("prev",n("#"+s),t[1][t[0]-1]);ct(t[0]-1,t[1].length-1)}return!1})}wt=lt();ct(wt[0],wt[1].length-1)}})},viewGridRow:function(t,i){i=n.extend({})}})});
//# sourceMappingURL=jquery.jqGrid.src.min.js.map
