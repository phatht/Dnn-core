function getParameterByName(n,t){n=n.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var r=new RegExp("[\\?&]"+n+"=([^&#]*)"),i=r.exec(t);return i===null?"":decodeURIComponent(i[1].replace(/\+/g," "))}function deleteAttachment(n,t){$.ajax({type:"POST",data:{Name:n},url:"../../api/Authorization/removeTicketFiles",success:function(i){var r=$.parseJSON(i);r==1?(t&&autohidenotify3s("success","bottom right","","File has been removed.",'<span class="glyphicon glyphicon-chevron-down"><\/span>'),objTicket.Files=$.grep(objTicket.Files,function(t){return t!=n})):autohidenotify3s("error","bottom right","","An error has occurred.",'<span class="glyphicon glyphicon-chevron-down"><\/span>')},error:function(XMLHttpRequest){var err=eval("("+XMLHttpRequest.responseText+")");autohidenotify3s("error","bottom right","",err.Message,'<span class="glyphicon glyphicon-chevron-down"><\/span>')}})}function showPopupSupport(){$("#divSuppTickAttach").hide();objTicket.URL=encodeURIComponent(window.location.href);objTicket.Referral=encodeURIComponent(document.referrer!=undefined?document.referrer:"");objTicket.SystemInfo=navigator.userAgent;objTicket.Files=[];var n=window.location.toString(),t=n.split("?");t.length<=1?$("[id=ticketFrame]").addClass("md-show"):$("[id=ticketAuthFrame]").addClass("md-show");loadSelectControls()}function showTicketPanel(n){for(var i=["#bugInput","#enhanceInput","#userProInput","#userExitInput","#hcpcsInput","#ndcInput"],t=0;t<i.length;t++)i[t]==n?$(n).show():$(i[t]).hide()}function handleTicketChange(){var n=$("#selTicType :selected").val();switch(n){case"support":$("#spTicketOther").text("Questions");showTicketPanel("hideAll");$("#divSuppTickAttach").hide();break;case"bug":$("#spTicketOther").text("Notes");showTicketPanel("#bugInput");$("#divSuppTickAttach").show();break;case"enhance":$("#spTicketOther").text("Notes");showTicketPanel("#enhanceInput");$("#divSuppTickAttach").hide();break;case"ndc":$("#spTicketOther").text("Notes");showTicketPanel("#ndcInput");$("#divSuppTickAttach").hide();break;case"drug":$("#spTicketOther").text("Notes");showTicketPanel("#hcpcsInput");$("#divSuppTickAttach").hide();break;case"pro":$("#spTicketOther").text("Notes");showTicketPanel("#userProInput");$("#divSuppTickAttach").hide();break;case"exit":$("#spTicketOther").text("Notes");showTicketPanel("#userExitInput");$("#divSuppTickAttach").hide();break;default:processNotify("error",5e3,"Unknown Ticket Type")}}function loadSelectControls(){$.ajax({type:"GET",dataType:"JSON",url:"../../api/Stage/GetStagesList",async:!0,success:function(n){var i=$.parseJSON(n),r,t,u;if(i!=""){for(r="",t=0;t<i.length;t++)r+='<option value="'+i[t].StageID+'">'+i[t].StageName+"<\/option>",optStages.push({id:i[t].StageID,name:i[t].StageName});$("select#selBugARCStage").html(r);$("select#selBugARCStage").multiselect("rebuild");objTicket.Referral.indexOf("stageid")>=0&&(u=getParameterByName("stageid",objTicket.Referral),$("select#selBugARCStage").multiselect("select",u))}else autohidenotify3s("error","bottom right","","An error occurred while getting Stages.",'<span class="glyphicon glyphicon-chevron-down"><\/span>')},error:function(XMLHttpRequest){var err=eval("("+XMLHttpRequest.responseText+")");autohidenotify3s("error","bottom right","",err.Message,'<span class="glyphicon glyphicon-chevron-down"><\/span>')}});$.ajax({type:"GET",dataType:"JSON",url:"../../api/Stage/GetSubPanelsList",async:!0,success:function(n){var i=$.parseJSON(n),r,t;if(i!=""){for(r="",t=0;t<i.length;t++)r+='<option value="'+i[t].StageName+'">'+i[t].StageName+"<\/option>";$("select#selBugARCSubPanel").html(r);$("select#selBugARCSubPanel").multiselect("rebuild")}else autohidenotify3s("error","bottom right","","An error occurred while getting Sub Panels.",'<span class="glyphicon glyphicon-chevron-down"><\/span>')},error:function(XMLHttpRequest){var err=eval("("+XMLHttpRequest.responseText+")");autohidenotify3s("error","bottom right","",err.Message,'<span class="glyphicon glyphicon-chevron-down"><\/span>')}});$.ajax({type:"POST",dataType:"JSON",url:"../../api/Role/Select",data:{OrderBy:"",PageNo:1,PageSize:150,Condition:{NAME:""}},async:!0,success:function(n){var i,t;if(n.length>0){for(i='<option value="0">Select One<\/option>',t=0;t<n.length;t++)i+='<option value="'+n[t].RoleName+'">'+n[t].RoleName+"<\/option>";$("select#selUserAcctAccess").html(i);$("select#selUserAcctAccess").multiselect("rebuild")}else autohidenotify3s("error","bottom right","","An error occurred while getting Sub Panels.",'<span class="glyphicon glyphicon-chevron-down"><\/span>')},error:function(XMLHttpRequest){var err=eval("("+XMLHttpRequest.responseText+")");autohidenotify3s("error","bottom right","",err.Message,'<span class="glyphicon glyphicon-chevron-down"><\/span>')}})}function validation(n){var t="";n.Type=="pro"?(n.FirstName==""&&(t+="First Name is required.<br/>"),n.LastName==""&&(t+="Last Name is required.<br/>"),n.UserEmail==""&&(t+="Email is required.<br/>"),n.DueDate==""&&(t+="Date Needed is required.<br/>"),(n.Role==""||n.Role=="0")&&(t+="Role is required.<br/>"),n.ApprovalBy==""&&(t+="Approval By is required.<br/>"),n.ApprovalDate==""&&(t+="Approval Date is required.<br/>")):n.Type=="exit"?(n.FirstName==""&&(t+="First Name is required.<br/>"),n.LastName==""&&(t+="Last Name is required.<br/>"),n.InactiveDate==""&&(t+="Inactive Date is required.<br/>")):n.Type=="ndc"&&(n.NDC==""&&(t+="NDC is required.<br/>"),$.isNumeric(n.AWP)||(t+="AWP is required.<br/>"),$.isNumeric(n.ACQ340B)||(t+="340B Acquisition Cost is required.<br/>"),$.isNumeric(n.ACQ)||(t+="Acquisition Cost is required.<br/>"),n.Volume==""&&(t+="Volume is required.<br/>"),n.Divisor==""&&(t+="Divisor is required.<br/>"));t!=""&&(stickyNotify("error","bottom right","",t,'<span class="glyphicon glyphicon-chevron-down"><\/span>'),valid=!1)}function submitSupport(){$("[id=btnYes]").prop("disabled",!0);processTicketData();valid?(processSupport(),closeSupport()):(valid=!0,$("[id=btnYes]").prop("disabled",!1))}function closeSupport(){$("[id=btnClose]").prop("disabled",!1);var n=window.location.toString(),t=n.split("?");t.length<=1?$("[id=ticketFrame]").removeClass("md-show"):$("[id=ticketAuthFrame]").removeClass("md-show");parent.closeFrame()}function processSupport(){$.ajax({type:"POST",url:"../../api/Dashboard/SendSupportMail",data:JSON.stringify(objTicket),dataType:"JSON",contentType:"application/json; charset=utf-8",async:!1,success:function(n){n==1&&parent.autohidenotify3s("success","bottom right","","Ticket Email was sent.",'<span class="glyphicon glyphicon-chevron-down"><\/span>')},error:function(n,t,i){parent.autohidenotify3s("error","bottom right","",i,'<span class="glyphicon glyphicon-chevron-down"><\/span>')}})}function resolveOptStages(n){for(var r=[],u=n.length,i=0,t=0;t<optStages.length;t++)if(n[i]==optStages[t].id&&(r.push(optStages[t].name),i++,i>=u))break;return r}function processTicketData(){var t=$("#selTicType :selected").val(),n;objTicket.Name=$("#spTicketFirstName").text()+" "+$("#spTicketLastName").text();n=$("#lblAuthorizationNumber",parent.document);n!=undefined&&(objTicket.AuthNum=n.text());objTicket.Email=$.trim($("#txtTicketEmail").val());objTicket.Type=t;objTicket.Notes=$.trim($("[id=txtTicketOther").val());objTicket.Subject=$.trim($("[id=txtTicketSubject").val());switch(t){case"bug":objTicket.Description=$.trim($("#txtBugDesc").val());objTicket.Stages=resolveOptStages($("#selBugARCStage").val());objTicket.Subpanels=$("#selBugARCSubPanel").val();objTicket.ReproduceBug=$("input[name=radRepBug]:radio").val();objTicket.ActualResult=$.trim($("#txtActResult").val());objTicket.BugSteps=$.trim($("#txtBugReprod").val());objTicket.ExpectedResult=$.trim($("#txtExpResult").val());break;case"enhance":objTicket.Reason=$.trim($("#txtReason").val());objTicket.Benefit=$.trim($("#txtBenefit").val());objTicket.AffectedClients=$.trim($("#txtAffectClients").val());objTicket.AffectUsers=$.trim($("#txtAffectUser").val());break;case"ndc":objTicket.NDC=$.trim($("#txtNDC").val());objTicket.AWP=$.trim($("#txtAWP").val());objTicket.ACQ340B=$.trim($("#txt340B").val());objTicket.ACQ=$.trim($("#txtACQ").val());objTicket.Volume=$.trim($("#txtVol").val());objTicket.Divisor=$.trim($("#txtDiv").val());objTicket.Brand=$("#selBrand :selected").val();objTicket.Description=$.trim($("#txtNDCDesc").val());objTicket.Relation=$.trim($("#txtRelHcpcs").val());validation(objTicket);break;case"drug":objTicket.HCPCS=$.trim($("#txtHCPCS").val());objTicket.ASP=$.trim($("#txtASP").val());objTicket.Unit=$.trim($("#txtUnit").val());objTicket.AutoBill=$("input[name=radBill]:radio").val();objTicket.Description=$.trim($("#txtHCPCSDesc").val());objTicket.Relation=$.trim($("#txtRelNDCs").val());break;case"pro":objTicket.RequestDate=$("#spUserRequestDate").text();objTicket.DueDate=$.trim($("#txtUserDueDate").val());objTicket.FirstName=$.trim($("#txtUserFirstName").val());objTicket.LastName=$.trim($("#txtUserLastName").val());objTicket.Portal=$("input[name=radPortal]:radio").val();objTicket.UserEmail=$.trim($("#txtUserEmail").val());objTicket.Job=$.trim($("#txtUserJob").val());objTicket.Phone=$.trim($("#txtUserPhone").val());objTicket.Team=$.trim($("#txtUserTeam").val());objTicket.Role=$("#selUserAcctAccess :selected").val();objTicket.ApprovalBy=$.trim($("#txtUserApproved").val());objTicket.ApprovalDate=$.trim($("#txtUserApprovalDate").val());validation(objTicket);break;case"exit":objTicket.FirstName=$.trim($("#txtExitFirstName").val());objTicket.LastName=$.trim($("#txtExitLastName").val());objTicket.UserName=$.trim($("#txtExitUserName").val());objTicket.InactiveDate=$.trim($("#txtUserInactiveDate").val());validation(objTicket)}}function cancelSupport(){var n=getParameterByName("isInAuth");n==="1"?($(".supportTicket",parent.document).toggleClass("open-supportTicket-bar"),$(".bottom-auth",parent.document).css("width","100%")):(clearSupportForm(),setTimeout(closeSupport(),2e3))}function getParameterByName(n){n=n.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var i=new RegExp("[\\?&]"+n+"=([^&#]*)"),t=i.exec(location.search);return t===null?"":decodeURIComponent(t[1].replace(/\+/g," "))}function clearSupportForm(){if(objTicket.Files!=undefined&&objTicket.Files.length>0)for(var n=0;n<objTicket.Files.length;n++)try{$.ajax({type:"POST",data:{Name:objTicket.Files[n]},url:"../../api/Authorization/removeTicketFiles",async:!1,success:function(){},error:function(XMLHttpRequest){var err=eval("("+XMLHttpRequest.responseText+")");autohidenotify3s("error","bottom right","",err.Message,'<span class="glyphicon glyphicon-chevron-down"><\/span>')}})}catch(t){}}function GetAuthInfo(n){var f,t;if(!(n.length<=1)&&(f=n[1],t=f.split("&"),!(t.length<=0))){var i=t[0].split("=")[1],r=t[1].split("=")[1],u=t[2].split("=")[1],e=t[3].split("=")[1];u=parseInt(u).toString()=="NaN"?0:parseInt(u).toString();i=parseInt(i).toString()=="NaN"?0:parseInt(i).toString();r=parseInt(r).toString()=="NaN"?0:parseInt(r).toString();$.ajax({dataType:"JSON",url:urlResolved + "/api/Authorization/Authorization_GetByID/?AuthID="+i+"&StageID="+r+"&IsCurrent="+u+"&RouteStage="+e+"",async:!1,success:function(n){var r,t,i;n[0].Authorizations.length>0?(r=n[0].Authorizations[0].Status,$(document.getElementById("h_valAuthoriationNumber")).text(n[0].Authorizations[0].AuthorizationNumber),$(document.getElementById("h_valAuthStatus")).text(n[0].Authorizations[0].Status).attr("class",r.toUpperCase()=="APPROVED"?"label label-success":"label label-danger"),$(document.getElementById("h_valAssignedUser")).text(n[0].Authorizations[0].AssignUser).attr("title",n[0].Authorizations[0].AssignedUserID),$(document.getElementById("h_valRequestProvider")).text(n[0].Authorizations[0].RequestProvider_name).attr("title",n[0].Authorizations[0].RequestProviderID),$(document.getElementById("h_valReferringProvider")).text(n[0].Authorizations[0].ReferenceProvider_name).attr("title",n[0].Authorizations[0].ReferenceProviderID),$(document.getElementById("h_valAssignedProvider")).text(n[0].Authorizations[0].AssigProvider).val(n[0].Authorizations[0].AssignedProviderID),$(document.getElementById("h_valPrimaryCareMD")).text(n[0].Authorizations[0].Providers_name).attr("title",n[0].Authorizations[0].Providers_name),$(document.getElementById("h_valMSO")).text(n[0].Authorizations[0].mso_name),$(document.getElementById("h_valIPA")).text(n[0].Authorizations[0].ipa_name).attr("title",n[0].Authorizations[0].IPA),$(document.getElementById("h_valTTE")).text(parseDateString(n[0].Authorizations[0].TTE)),$(document.getElementById("h_valExpiration")).text(parseDateString(n[0].Authorizations[0].ExpirationDate)),$(document.getElementById("h_valRequestDate")).text(parseDateString(n[0].Authorizations[0].RequestDate)),$(document.getElementById("h_valStartDate")).text(parseDateString(n[0].Authorizations[0].StartDate)),$(document.getElementById("h_valPrimeReview")).text(n[0].Authorizations[0].IsPrimeReview=="False"?"No":"Yes"),$(document.getElementById("h_val340B")).text(n[0].Authorizations[0].P340B==1?"true":"false"),$(document.getElementById("h_valHealthInsurance")).text(n[0].Authorizations[0].PAYOR_NAME_DEL),$(document.getElementById("h_valInsuranceID")).text(n[0].Authorizations[0].INSURANCE_ID),$(document.getElementById("h_valIsReview ")).text(n[0].Authorizations[0].IsReview=="False"?"No":"Yes"),n[1].Missing.length>0&&(t="",$(n[1].Missing).each(function(i){n[1].Missing[i].IsSelected=="1"&&(t+='<span class="label label-default lblMissing_'+n[1].Missing[i].MissingDocumentID+'">'+n[1].Missing[i].MissingDocumentName+"<\/span>")}),$(document.getElementById("h_valMissingDocuments")).html(t)),n[2].ToDoList.length>0&&(i="",$(n[2].ToDoList).each(function(t){n[2].ToDoList[t].IsSelected=="1"&&(i+='<span class="label label-default lblToDoList_'+n[2].ToDoList[t].ToDoListID+'">'+n[2].ToDoList[t].ToDoListName+"<\/span>")}),$(document.getElementById("h_valTodolist")).html(i))):autohidenotify3s("warning","bottom right","Warning","Data empty",'<span class="glyphicon glyphicon-chevron-down"><\/span>')},error:function(XMLHttpRequest){var err=eval("("+XMLHttpRequest.responseText+")");autohidenotify3s("error","bottom right","",err.Message,'<span class="glyphicon glyphicon-chevron-down"><\/span>')}})}}function parseDateString(n){var t=n.split(" ")[0].split("/"),i=t[1],r=t[0];return parseInt(t[0])<=9&&(r="0"+t[0]),parseInt(t[1])<=9&&(i="0"+t[1]),r+"/"+i+"/"+t[2]}var optStages=[],suppDropzone=null,objTicket={},valid=!0;$(document).ready(function(){$("#frmTicketSupport").focus();showPopupSupport();$(".datepicker-search").datepicker().on("changeDate",function(){$(".datepicker .day").click(function(){$(".datepicker").hide()})});$(".datepicker-search").mask("99/99/9999");$("#txtUserPhone").mask("(999) 999-9999");var n=moment().format("MM/DD/YYYY");$(".datepicker-search").val(n);$("#spUserRequestDate").text(n)});Dropzone.options.divSupportAttachmentInput=!1;Dropzone.options.divSupportAttachmentInput={url:"../../api/Authorization/uploadTicketFiles",method:"POST",maxFiles:5,uploadMultiple:!1,addRemoveLinks:!0,removedfile:function(n){var i=n.previewElement.id,t;return deleteAttachment(i,!0),(t=n.previewElement)!=null?t.parentNode.removeChild(n.previewElement):void 0},acceptedFiles:"image/*",init:function(){this.on("success",function(n,t){var r,i;if(t.indexOf(";")>0)for(r=t.split(";"),i=0;i<r.length;i++)objTicket.Files.push(r[i]),n.previewElement.id=r[i];else objTicket.Files.push(t),n.previewElement.id=t})}};
//# sourceMappingURL=ticket.min.js.map
